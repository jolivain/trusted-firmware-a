<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="755px" preserveAspectRatio="none" style="width:1040px;height:755px;" version="1.1" viewBox="0 0 1040 755" width="1040px" zoomAndPan="magnify"><defs><filter height="300%" id="f1tm914y4tkj98" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1tm914y4tkj98)" height="142.7969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="549" y="384.7578"/><rect fill="#FFFFFF" filter="url(#f1tm914y4tkj98)" height="112.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="549" y="585.6875"/><rect fill="#FFFFFF" filter="url(#f1tm914y4tkj98)" height="613.7891" style="stroke: #000000; stroke-width: 2.0;" width="976.5" x="52.5" y="84.4297"/><rect fill="#FFFFFF" filter="url(#f1tm914y4tkj98)" height="115.6641" style="stroke: #000000; stroke-width: 2.0;" width="404" x="499" y="404.8906"/><rect fill="#FFFFFF" filter="url(#f1tm914y4tkj98)" height="85.3984" style="stroke: #000000; stroke-width: 2.0;" width="520" x="499" y="605.8203"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="123.5" x2="123.5" y1="38.2969" y2="715.2188"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="554" x2="554" y1="38.2969" y2="715.2188"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="811.5" x2="811.5" y1="38.2969" y2="715.2188"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="899.5" x2="899.5" y1="38.2969" y2="715.2188"/><rect fill="#FEFECE" filter="url(#f1tm914y4tkj98)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="62.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="69.5" y="22.9951">arm_io_storage</text><rect fill="#FEFECE" filter="url(#f1tm914y4tkj98)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="62.5" y="714.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="69.5" y="734.2139">arm_io_storage</text><rect fill="#FEFECE" filter="url(#f1tm914y4tkj98)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="509" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="516" y="22.9951">io_storage</text><rect fill="#FEFECE" filter="url(#f1tm914y4tkj98)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="509" y="714.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="516" y="734.2139">io_storage</text><rect fill="#FEFECE" filter="url(#f1tm914y4tkj98)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="49" x="785.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="35" x="792.5" y="22.9951">io_fip</text><rect fill="#FEFECE" filter="url(#f1tm914y4tkj98)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="49" x="785.5" y="714.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="35" x="792.5" y="734.2139">io_fip</text><rect fill="#FEFECE" filter="url(#f1tm914y4tkj98)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="848.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="855.5" y="22.9951">io_memmap</text><rect fill="#FEFECE" filter="url(#f1tm914y4tkj98)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="848.5" y="714.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="855.5" y="734.2139">io_memmap</text><rect fill="#FFFFFF" filter="url(#f1tm914y4tkj98)" height="142.7969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="549" y="384.7578"/><rect fill="#FFFFFF" filter="url(#f1tm914y4tkj98)" height="112.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="549" y="585.6875"/><polygon fill="#A80036" points="112,65.2969,122,69.2969,112,73.2969,116,69.2969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3" x2="118" y1="69.2969" y2="69.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="10" y="64.3638">arm_io_setup()</text><rect fill="none" height="613.7891" style="stroke: #000000; stroke-width: 2.0;" width="976.5" x="52.5" y="84.4297"/><polygon fill="#EEEEEE" points="52.5,84.4297,233.5,84.4297,233.5,91.4297,223.5,101.4297,52.5,101.4297,52.5,84.4297" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="136" x="67.5" y="97.4966">io dev registration</text><polygon fill="#A80036" points="800,118.5625,810,122.5625,800,126.5625,804,122.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="124" x2="806" y1="122.5625" y2="122.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="215" x="131" y="117.6294">register_io_dev_fip(&amp;fip_dev_con)</text><polygon fill="#A80036" points="565,147.6953,555,151.6953,565,155.6953,561,151.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="559" x2="811" y1="151.6953" y2="151.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="571" y="146.7622">io_register_device(&amp;dev_info_pool[])</text><polygon fill="#FBFB77" filter="url(#f1tm914y4tkj98)" points="410,164.8281,410,204.8281,693,204.8281,693,174.8281,683,164.8281,410,164.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="683" x2="683" y1="164.8281" y2="174.8281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="693" x2="683" y1="174.8281" y2="174.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="262" x="416" y="181.895">devices[dev_count] = (fip_)dev_info_pool</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="416" y="197.0278">dev_count++</text><polygon fill="#A80036" points="887.5,231.0938,897.5,235.0938,887.5,239.0938,891.5,235.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="124" x2="893.5" y1="235.0938" y2="235.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="311" x="131" y="230.1606">register_io_dev_memmap(&amp;memmap_dev_con)</text><polygon fill="#A80036" points="565,260.2266,555,264.2266,565,268.2266,561,264.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="559" x2="898.5" y1="264.2266" y2="264.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="259" x="571" y="259.2935">io_register_device(&amp;memmap_dev_info)</text><polygon fill="#FBFB77" filter="url(#f1tm914y4tkj98)" points="408,277.3594,408,317.3594,695,317.3594,695,287.3594,685,277.3594,408,277.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="685" x2="685" y1="277.3594" y2="287.3594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="695" x2="685" y1="287.3594" y2="287.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="266" x="414" y="294.4263">devices[dev_count] = memmap_dev_info</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="414" y="309.5591">dev_count++</text><polygon fill="#A80036" points="542,343.625,552,347.625,542,351.625,546,347.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="124" x2="548" y1="347.625" y2="347.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="310" x="131" y="342.6919">io_dev_open(fip_dev_con, NULL, fip_dev_handle)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="554" x2="601" y1="371.8906" y2="371.8906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="601" x2="601" y1="371.8906" y2="384.8906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="560" x2="601" y1="384.8906" y2="384.8906"/><polygon fill="#A80036" points="570,380.8906,560,384.8906,570,388.8906,566,384.8906" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="244" x="566" y="366.8247">dev_open(dev_con, dev_spec, handle)</text><rect fill="none" height="115.6641" style="stroke: #000000; stroke-width: 2.0;" width="404" x="499" y="404.8906"/><polygon fill="#EEEEEE" points="499,404.8906,569,404.8906,569,411.8906,559,421.8906,499,421.8906,499,404.8906" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="514" y="417.9575">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="168" x="584" y="417.1011">[dev_open() on fip device]</text><polygon fill="#A80036" points="800,439.0234,810,443.0234,800,447.0234,804,443.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="559" x2="806" y1="443.0234" y2="443.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="215" x="566" y="438.0903">fip_dev_open(dev_spec, dev_info)</text><polygon fill="#FBFB77" filter="url(#f1tm914y4tkj98)" points="731,456.1563,731,511.1563,889,511.1563,889,466.1563,879,456.1563,731,456.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="879" x2="879" y1="456.1563" y2="466.1563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="889" x2="879" y1="466.1563" y2="466.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="737" y="473.2231">dev_info = one of the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="737" y="488.356">"fip_dev_info" from</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="737" y="503.4888">dev_info_pool[]</text><polygon fill="#A80036" points="542,544.5547,552,548.5547,542,552.5547,546,548.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="124" x2="548" y1="548.5547" y2="548.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="406" x="131" y="543.6216">io_dev_open(memmap_dev_con, NULL, memmap_dev_handle)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="554" x2="601" y1="572.8203" y2="572.8203"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="601" x2="601" y1="572.8203" y2="585.8203"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="560" x2="601" y1="585.8203" y2="585.8203"/><polygon fill="#A80036" points="570,581.8203,560,585.8203,570,589.8203,566,585.8203" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="244" x="566" y="567.7544">dev_open(dev_con, dev_spec, handle)</text><rect fill="none" height="85.3984" style="stroke: #000000; stroke-width: 2.0;" width="520" x="499" y="605.8203"/><polygon fill="#EEEEEE" points="499,605.8203,569,605.8203,569,612.8203,559,622.8203,499,622.8203,499,605.8203" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="514" y="618.8872">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="208" x="584" y="618.0308">[dev_open() on memmap device]</text><polygon fill="#A80036" points="887.5,639.9531,897.5,643.9531,887.5,647.9531,891.5,643.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="559" x2="893.5" y1="643.9531" y2="643.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="263" x="566" y="639.02">memmap_dev_open(dev_spec, dev_info)</text><polygon fill="#FBFB77" filter="url(#f1tm914y4tkj98)" points="789,657.0859,789,682.0859,1005,682.0859,1005,667.0859,995,657.0859,789,657.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="995" x2="995" y1="657.0859" y2="667.0859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1005" x2="995" y1="667.0859" y2="667.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="795" y="674.1528">dev_info = memmap_dev_info</text><!--
@startuml

participant arm_io_storage
participant io_storage
participant io_fip
participant io_memmap

 -> arm_io_storage : arm_io_setup()

group io dev registration

arm_io_storage -> io_fip : register_io_dev_fip(&fip_dev_con)
io_fip -> io_storage : io_register_device(&dev_info_pool[])
note over io_storage
	devices[dev_count] = (fip_)dev_info_pool
	dev_count++
end note

arm_io_storage -> io_memmap : register_io_dev_memmap(&memmap_dev_con)
io_memmap -> io_storage : io_register_device(&memmap_dev_info)
note over io_storage
	devices[dev_count] = memmap_dev_info
	dev_count++
end note

arm_io_storage -> io_storage : io_dev_open(fip_dev_con, NULL, fip_dev_handle)
 io_storage -> io_storage : dev_open(dev_con, dev_spec, handle)
activate io_storage
opt dev_open() on fip device
	io_storage -> io_fip : fip_dev_open(dev_spec, dev_info)
	note over io_fip
		dev_info = one of the
		"fip_dev_info" from
		dev_info_pool[]
	end note
end opt
deactivate io_storage


arm_io_storage -> io_storage : io_dev_open(memmap_dev_con, NULL, memmap_dev_handle)
io_storage -> io_storage : dev_open(dev_con, dev_spec, handle)
activate io_storage
opt dev_open() on memmap device
	io_storage -> io_memmap : memmap_dev_open(dev_spec, dev_info)
	note over io_memmap
		dev_info = memmap_dev_info
	end note
end opt
deactivate io_storage

end group
@enduml

PlantUML version 1.2017.15(Mon Jul 03 17:45:34 BST 2017)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.9.1+1-Ubuntu-0ubuntu1.18.04
Operating System: Linux
OS Version: 4.15.0-124-generic
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>