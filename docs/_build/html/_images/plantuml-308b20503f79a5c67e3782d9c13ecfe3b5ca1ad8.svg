<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1251px" preserveAspectRatio="none" style="width:1224px;height:1251px;" version="1.1" viewBox="0 0 1224 1251" width="1224px" zoomAndPan="magnify"><defs><filter height="300%" id="fd3kjn01vm4t3" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fd3kjn01vm4t3)" height="543.6563" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="52" y="489.0234"/><rect fill="#FFFFFF" filter="url(#fd3kjn01vm4t3)" height="506.5234" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="57" y="526.1563"/><rect fill="#FFFFFF" filter="url(#fd3kjn01vm4t3)" height="464.3906" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="62" y="568.2891"/><rect fill="#FFFFFF" filter="url(#fd3kjn01vm4t3)" height="782.7188" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="784.5" y="367.4922"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="57" x2="57" y1="38.2969" y2="1211.4766"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="539.5" x2="539.5" y1="38.2969" y2="1211.4766"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="688.5" x2="688.5" y1="38.2969" y2="1211.4766"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="789" x2="789" y1="38.2969" y2="1211.4766"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1001.5" x2="1001.5" y1="38.2969" y2="1211.4766"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1137.5" x2="1137.5" y1="38.2969" y2="1211.4766"/><rect fill="#FEFECE" filter="url(#fd3kjn01vm4t3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="94" x="8" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="15" y="22.9951">bl_common</text><rect fill="#FEFECE" filter="url(#fd3kjn01vm4t3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="94" x="8" y="1210.4766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="15" y="1230.4717">bl_common</text><rect fill="#FEFECE" filter="url(#fd3kjn01vm4t3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="478.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="485.5" y="22.9951">arm_io_storage</text><rect fill="#FEFECE" filter="url(#fd3kjn01vm4t3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="478.5" y="1210.4766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="485.5" y="1230.4717">arm_io_storage</text><rect fill="#FEFECE" filter="url(#fd3kjn01vm4t3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="643.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="650.5" y="22.9951">io_storage</text><rect fill="#FEFECE" filter="url(#fd3kjn01vm4t3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="643.5" y="1210.4766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="650.5" y="1230.4717">io_storage</text><rect fill="#FEFECE" filter="url(#fd3kjn01vm4t3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="75" x="750" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="61" x="757" y="22.9951">bl1_main</text><rect fill="#FEFECE" filter="url(#fd3kjn01vm4t3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="75" x="750" y="1210.4766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="61" x="757" y="1230.4717">bl1_main</text><rect fill="#FEFECE" filter="url(#fd3kjn01vm4t3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="944.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="951.5" y="22.9951">xxx_bl1_setup</text><rect fill="#FEFECE" filter="url(#fd3kjn01vm4t3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="944.5" y="1210.4766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="951.5" y="1230.4717">xxx_bl1_setup</text><rect fill="#FEFECE" filter="url(#fd3kjn01vm4t3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="135" x="1068.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="1075.5" y="22.9951">plat_bl1_common</text><rect fill="#FEFECE" filter="url(#fd3kjn01vm4t3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="135" x="1068.5" y="1210.4766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="1075.5" y="1230.4717">plat_bl1_common</text><rect fill="#FFFFFF" filter="url(#fd3kjn01vm4t3)" height="543.6563" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="52" y="489.0234"/><rect fill="#FFFFFF" filter="url(#fd3kjn01vm4t3)" height="506.5234" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="57" y="526.1563"/><rect fill="#FFFFFF" filter="url(#fd3kjn01vm4t3)" height="464.3906" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="62" y="568.2891"/><rect fill="#FFFFFF" filter="url(#fd3kjn01vm4t3)" height="782.7188" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="784.5" y="367.4922"/><rect fill="#EEEEEE" filter="url(#fd3kjn01vm4t3)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1209.5" x="3" y="68.8633"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1212.5" y1="68.8633" y2="68.8633"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1212.5" y1="71.8633" y2="71.8633"/><rect fill="#EEEEEE" filter="url(#fd3kjn01vm4t3)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="131" x="542.25" y="58.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="112" x="548.25" y="74.3638">Platform Setup</text><polygon fill="#A80036" points="989.5,108.4297,999.5,112.4297,989.5,116.4297,993.5,112.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="789.5" x2="995.5" y1="112.4297" y2="112.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="796.5" y="107.4966">bl1_platform_setup()</text><polygon fill="#A80036" points="551,137.5625,541,141.5625,551,145.5625,547,141.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="545" x2="1000.5" y1="141.5625" y2="141.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="557" y="136.6294">plat_arm_io_setup()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="540" x2="582" y1="170.8281" y2="170.8281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="582" x2="582" y1="170.8281" y2="183.8281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="541" x2="582" y1="183.8281" y2="183.8281"/><polygon fill="#A80036" points="551,179.8281,541,183.8281,551,187.8281,547,183.8281" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="547" y="165.7622">arm_io_setup()</text><rect fill="#FFFFFF" filter="url(#fd3kjn01vm4t3)" height="40.2656" style="stroke: #000000; stroke-width: 2.0;" width="257" x="475.5" y="191.8281"/><polygon fill="#EEEEEE" points="475.5,191.8281,541.5,191.8281,541.5,198.8281,531.5,208.8281,475.5,208.8281,475.5,191.8281" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="488.5" y="205.895">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="539.5" y="224.895">io device registration</text><rect fill="#EEEEEE" filter="url(#fd3kjn01vm4t3)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1209.5" x="3" y="257.6602"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1212.5" y1="257.6602" y2="257.6602"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1212.5" y1="260.6602" y2="260.6602"/><rect fill="#EEEEEE" filter="url(#fd3kjn01vm4t3)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="96" x="559.75" y="247.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="77" x="565.75" y="263.1606">Get Image</text><polygon fill="#A80036" points="989.5,297.2266,999.5,301.2266,989.5,305.2266,993.5,301.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="789.5" x2="995.5" y1="301.2266" y2="301.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="188" x="796.5" y="296.2935">bl1_plat_get_next_image_id()</text><polygon fill="#A80036" points="800.5,326.3594,790.5,330.3594,800.5,334.3594,796.5,330.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="794.5" x2="1000.5" y1="330.3594" y2="330.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="806.5" y="325.4263">BL2_IMAGE_ID</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="789.5" x2="836.5" y1="354.625" y2="354.625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="836.5" x2="836.5" y1="354.625" y2="367.625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="795.5" x2="836.5" y1="367.625" y2="367.625"/><polygon fill="#A80036" points="805.5,363.625,795.5,367.625,805.5,371.625,801.5,367.625" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="801.5" y="349.5591">bl1_load_bl2()</text><polygon fill="#A80036" points="1126,397.625,1136,401.625,1126,405.625,1130,401.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="794.5" x2="1132" y1="401.625" y2="401.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="264" x="801.5" y="396.6919">bl1_plat_get_image_desc(BL2_IMAGE_ID)</text><polygon fill="#A80036" points="805.5,426.7578,795.5,430.7578,805.5,434.7578,801.5,430.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="799.5" x2="1137" y1="430.7578" y2="430.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="811.5" y="425.8247">BL2_IMAGE_DESC</text><polygon fill="#A80036" points="1126,455.8906,1136,459.8906,1126,463.8906,1130,459.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="794.5" x2="1132" y1="459.8906" y2="459.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="311" x="801.5" y="454.9575">bl1_plat_handle_pre_image_load(BL2_IMAGE_ID)</text><polygon fill="#A80036" points="73,485.0234,63,489.0234,73,493.0234,69,489.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="67" x2="783.5" y1="489.0234" y2="489.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="290" x="79" y="484.0903">load_auth_image(BL2_IMAGE_ID, image_info)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="62" x2="109" y1="513.2891" y2="513.2891"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="109" x2="109" y1="513.2891" y2="526.2891"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="68" x2="109" y1="526.2891" y2="526.2891"/><polygon fill="#A80036" points="78,522.2891,68,526.2891,78,530.2891,74,526.2891" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="459" x="74" y="508.2231">load_auth_image_internal(BL2_IMAGE_ID, image_info, is_parent_image)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="67" x2="114" y1="555.4219" y2="555.4219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="114" x2="114" y1="555.4219" y2="568.4219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="73" x2="114" y1="568.4219" y2="568.4219"/><polygon fill="#A80036" points="83,564.4219,73,568.4219,83,572.4219,79,568.4219" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="254" x="79" y="550.356">load_image(BL2_IMAGE_ID, image_info)</text><polygon fill="#A80036" points="528,598.4219,538,602.4219,528,606.4219,532,602.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="72" x2="534" y1="602.4219" y2="602.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="439" x="79" y="597.4888">plat_get_image_source(BL2_IMAGE_ID, &amp;dev_handle, &amp;image_spec)</text><rect fill="#FFFFFF" filter="url(#fd3kjn01vm4t3)" height="40.2656" style="stroke: #000000; stroke-width: 2.0;" width="257" x="475.5" y="610.5547"/><polygon fill="#EEEEEE" points="475.5,610.5547,541.5,610.5547,541.5,617.5547,531.5,627.5547,475.5,627.5547,475.5,610.5547" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="488.5" y="624.6216">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="239" x="486.5" y="643.6216">init and check device (BL2_IMAGE_ID)</text><polygon fill="#A80036" points="83,672.8203,73,676.8203,83,680.8203,79,676.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="77" x2="539" y1="676.8203" y2="676.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="89" y="671.8872">dev_handle</text><polygon fill="#A80036" points="676.5,701.9531,686.5,705.9531,676.5,709.9531,680.5,705.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="72" x2="682.5" y1="705.9531" y2="705.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="327" x="79" y="701.02">io_open(dev_handle, image_spec, &amp;image_handle)</text><rect fill="#FFFFFF" filter="url(#fd3kjn01vm4t3)" height="40.2656" style="stroke: #000000; stroke-width: 2.0;" width="152" x="640.5" y="714.0859"/><polygon fill="#EEEEEE" points="640.5,714.0859,706.5,714.0859,706.5,721.0859,696.5,731.0859,640.5,731.0859,640.5,714.0859" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="653.5" y="728.1528">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="646.5" y="747.1528">io_open() on fip device</text><polygon fill="#A80036" points="83,776.3516,73,780.3516,83,784.3516,79,780.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="77" x2="687.5" y1="780.3516" y2="780.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="89" y="775.4185">image_handle</text><polygon fill="#A80036" points="676.5,805.4844,686.5,809.4844,676.5,813.4844,680.5,809.4844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="72" x2="682.5" y1="809.4844" y2="809.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="79" y="804.5513">io_size(image_handle, &amp;image_size)</text><rect fill="#FFFFFF" filter="url(#fd3kjn01vm4t3)" height="40.2656" style="stroke: #000000; stroke-width: 2.0;" width="145" x="640.5" y="817.6172"/><polygon fill="#EEEEEE" points="640.5,817.6172,706.5,817.6172,706.5,824.6172,696.5,834.6172,640.5,834.6172,640.5,817.6172" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="653.5" y="831.6841">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="646.5" y="850.6841">io_size() on fip device</text><polygon fill="#A80036" points="676.5,879.8828,686.5,883.8828,676.5,887.8828,680.5,883.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="72" x2="682.5" y1="883.8828" y2="883.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="403" x="79" y="878.9497">io_read(image_handle, image_base, image_size, &amp;bytes_read)</text><rect fill="#FFFFFF" filter="url(#fd3kjn01vm4t3)" height="40.2656" style="stroke: #000000; stroke-width: 2.0;" width="149" x="640.5" y="892.0156"/><polygon fill="#EEEEEE" points="640.5,892.0156,706.5,892.0156,706.5,899.0156,696.5,909.0156,640.5,909.0156,640.5,892.0156" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="653.5" y="906.0825">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="646.5" y="925.0825">io_read() on fip device</text><polygon fill="#A80036" points="676.5,954.2813,686.5,958.2813,676.5,962.2813,680.5,958.2813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="72" x2="682.5" y1="958.2813" y2="958.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="79" y="953.3481">io_close(image_handle)</text><rect fill="#FFFFFF" filter="url(#fd3kjn01vm4t3)" height="40.2656" style="stroke: #000000; stroke-width: 2.0;" width="153" x="640.5" y="966.4141"/><polygon fill="#EEEEEE" points="640.5,966.4141,706.5,966.4141,706.5,973.4141,696.5,983.4141,640.5,983.4141,640.5,966.4141" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="653.5" y="980.481">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="646.5" y="999.481">io_close() on fip device</text><polygon fill="#A80036" points="676.5,1028.6797,686.5,1032.6797,676.5,1036.6797,680.5,1032.6797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="57" x2="682.5" y1="1032.6797" y2="1032.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="164" x="64" y="1027.7466">io_dev_close(dev_handle)</text><rect fill="#FFFFFF" filter="url(#fd3kjn01vm4t3)" height="40.2656" style="stroke: #000000; stroke-width: 2.0;" width="183" x="640.5" y="1040.8125"/><polygon fill="#EEEEEE" points="640.5,1040.8125,706.5,1040.8125,706.5,1047.8125,696.5,1057.8125,640.5,1057.8125,640.5,1040.8125" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="21" x="653.5" y="1054.8794">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="646.5" y="1073.8794">io_dev_close() on fip device</text><rect fill="#EEEEEE" filter="url(#fd3kjn01vm4t3)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1209.5" x="3" y="1106.6445"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1212.5" y1="1106.6445" y2="1106.6445"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1212.5" y1="1109.6445" y2="1109.6445"/><rect fill="#EEEEEE" filter="url(#fd3kjn01vm4t3)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="168" x="523.75" y="1096.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="149" x="529.75" y="1112.145">Prepare Next Image</text><polygon fill="#A80036" points="1126,1146.2109,1136,1150.2109,1126,1154.2109,1130,1150.2109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="789.5" x2="1132" y1="1150.2109" y2="1150.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="318" x="796.5" y="1145.2778">bl1_plat_handle_post_image_load(BL2_IMAGE_ID)</text><rect fill="#EEEEEE" filter="url(#fd3kjn01vm4t3)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1209.5" x="3" y="1178.9102"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1212.5" y1="1178.9102" y2="1178.9102"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1212.5" y1="1181.9102" y2="1181.9102"/><rect fill="#EEEEEE" filter="url(#fd3kjn01vm4t3)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="164" x="525.75" y="1168.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="145" x="531.75" y="1184.4106">Jump to next Image</text><!--
@startuml

participant bl_common
participant arm_io_storage
participant io_storage

== Platform Setup ==

bl1_main -> xxx_bl1_setup : bl1_platform_setup()
xxx_bl1_setup -> arm_io_storage : plat_arm_io_setup()

arm_io_storage -> arm_io_storage : arm_io_setup()
ref over arm_io_storage, io_storage : io device registration

== Get Image ==
bl1_main -> xxx_bl1_setup : bl1_plat_get_next_image_id()
bl1_main <- - xxx_bl1_setup : BL2_IMAGE_ID

bl1_main -> bl1_main : bl1_load_bl2()
activate bl1_main
bl1_main -> plat_bl1_common : bl1_plat_get_image_desc(BL2_IMAGE_ID)
bl1_main <- - plat_bl1_common : BL2_IMAGE_DESC

bl1_main -> plat_bl1_common : bl1_plat_handle_pre_image_load(BL2_IMAGE_ID)

bl1_main -> bl_common : load_auth_image(BL2_IMAGE_ID, image_info)
activate bl_common
bl_common -> bl_common : load_auth_image_internal(BL2_IMAGE_ID, image_info, is_parent_image)
activate bl_common
bl_common -> bl_common : load_image(BL2_IMAGE_ID, image_info)
activate bl_common
bl_common -> arm_io_storage : plat_get_image_source(BL2_IMAGE_ID, &dev_handle, &image_spec)
ref over arm_io_storage, io_storage : init and check device (BL2_IMAGE_ID)
bl_common <- - arm_io_storage : dev_handle

bl_common -> io_storage : io_open(dev_handle, image_spec, &image_handle)
ref over io_storage : io_open() on fip device
bl_common <- - io_storage : image_handle
bl_common -> io_storage : io_size(image_handle, &image_size)
ref over io_storage : io_size() on fip device
bl_common -> io_storage : io_read(image_handle, image_base, image_size, &bytes_read)
ref over io_storage : io_read() on fip device
bl_common -> io_storage : io_close(image_handle)
ref over io_storage : io_close() on fip device
bl_common -> io_storage : io_dev_close(dev_handle)
ref over io_storage : io_dev_close() on fip device

deactivate bl_common
deactivate bl_common
deactivate bl_common

== Prepare Next Image ==
bl1_main -> plat_bl1_common : bl1_plat_handle_post_image_load(BL2_IMAGE_ID)

deactivate bl1_main

== Jump to next Image ==

@enduml

PlantUML version 1.2017.15(Mon Jul 03 17:45:34 BST 2017)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.9.1+1-Ubuntu-0ubuntu1.18.04
Operating System: Linux
OS Version: 4.15.0-124-generic
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>