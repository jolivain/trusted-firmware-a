<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1365px" preserveAspectRatio="none" style="width:1608px;height:1365px;" version="1.1" viewBox="0 0 1608 1365" width="1608px" zoomAndPan="magnify"><defs><filter height="300%" id="f14ic88ea301pe" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="1350.9063" style="stroke: #A80036; stroke-width: 1.0;" width="195" x="4" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="136" x="33.5" y="16.0669">BL1 common code</text><rect fill="#ADD8E6" height="1350.9063" style="stroke: #A80036; stroke-width: 1.0;" width="468" x="201" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="139" x="365.5" y="16.0669">arm platform code</text><rect fill="#DDDDDD" height="1350.9063" style="stroke: #A80036; stroke-width: 1.0;" width="572.5" x="671" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="173" x="870.75" y="16.0669">platform common code</text><rect fill="#FFFFFF" filter="url(#f14ic88ea301pe)" height="165.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="141" y="444.0234"/><rect fill="#FFFFFF" filter="url(#f14ic88ea301pe)" height="165.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="141" y="924.0156"/><rect fill="#FFFFFF" filter="url(#f14ic88ea301pe)" height="985.1172" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1208.5" y="215.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="47" x2="47" y1="58.4297" y2="1316.6094"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="146" x2="146" y1="58.4297" y2="1316.6094"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="261" x2="261" y1="58.4297" y2="1316.6094"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="451" x2="451" y1="58.4297" y2="1316.6094"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="603" x2="603" y1="58.4297" y2="1316.6094"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="744" x2="744" y1="58.4297" y2="1316.6094"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="904" x2="904" y1="58.4297" y2="1316.6094"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1213.5" x2="1213.5" y1="58.4297" y2="1316.6094"/><rect fill="#FEFECE" filter="url(#f14ic88ea301pe)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="75" x="8" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="61" x="15" y="43.1279">bl1_main</text><rect fill="#FEFECE" filter="url(#f14ic88ea301pe)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="75" x="8" y="1315.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="61" x="15" y="1335.6045">bl1_main</text><rect fill="#FEFECE" filter="url(#f14ic88ea301pe)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="94" x="97" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="104" y="43.1279">bl_common</text><rect fill="#FEFECE" filter="url(#f14ic88ea301pe)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="94" x="97" y="1315.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="80" x="104" y="1335.6045">bl_common</text><rect fill="#FEFECE" filter="url(#f14ic88ea301pe)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="109" x="205" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="212" y="43.1279">fvp_bl1_setup</text><rect fill="#FEFECE" filter="url(#f14ic88ea301pe)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="109" x="205" y="1315.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="212" y="1335.6045">fvp_bl1_setup</text><rect fill="#FEFECE" filter="url(#f14ic88ea301pe)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="115" x="392" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="101" x="399" y="43.1279">arm_bl1_setup</text><rect fill="#FEFECE" filter="url(#f14ic88ea301pe)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="115" x="392" y="1315.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="101" x="399" y="1335.6045">arm_bl1_setup</text><rect fill="#FEFECE" filter="url(#f14ic88ea301pe)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="542" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="549" y="43.1279">arm_io_storage</text><rect fill="#FEFECE" filter="url(#f14ic88ea301pe)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="542" y="1315.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="105" x="549" y="1335.6045">arm_io_storage</text><rect fill="#FEFECE" filter="url(#f14ic88ea301pe)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="135" x="675" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="682" y="43.1279">plat_bl1_common</text><rect fill="#FEFECE" filter="url(#f14ic88ea301pe)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="135" x="675" y="1315.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="682" y="1335.6045">plat_bl1_common</text><rect fill="#FEFECE" filter="url(#f14ic88ea301pe)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="157" x="824" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="143" x="831" y="43.1279">fconf_dyn_cfg_getter</text><rect fill="#FEFECE" filter="url(#f14ic88ea301pe)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="157" x="824" y="1315.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="143" x="831" y="1335.6045">fconf_dyn_cfg_getter</text><rect fill="#FEFECE" filter="url(#f14ic88ea301pe)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="48" x="1187.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="34" x="1194.5" y="43.1279">fconf</text><rect fill="#FEFECE" filter="url(#f14ic88ea301pe)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="48" x="1187.5" y="1315.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="34" x="1194.5" y="1335.6045">fconf</text><rect fill="#FFFFFF" filter="url(#f14ic88ea301pe)" height="165.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="141" y="444.0234"/><rect fill="#FFFFFF" filter="url(#f14ic88ea301pe)" height="165.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="141" y="924.0156"/><rect fill="#FFFFFF" filter="url(#f14ic88ea301pe)" height="985.1172" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1208.5" y="215.9609"/><polygon fill="#A80036" points="249.5,85.4297,259.5,89.4297,249.5,93.4297,253.5,89.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="47.5" x2="255.5" y1="89.4297" y2="89.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="54.5" y="84.4966">bl1_platform_setup()</text><polygon fill="#A80036" points="439.5,114.5625,449.5,118.5625,439.5,122.5625,443.5,118.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="261.5" x2="445.5" y1="118.5625" y2="118.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="166" x="268.5" y="113.6294">arm_bl1_platform_setup()</text><polygon fill="#A80036" points="591.5,143.6953,601.5,147.6953,591.5,151.6953,595.5,147.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="451.5" x2="597.5" y1="147.6953" y2="147.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="458.5" y="142.7622">plat_arm_io_setup()</text><polygon fill="#FBFB77" filter="url(#f14ic88ea301pe)" points="523,160.8281,523,185.8281,680,185.8281,680,170.8281,670,160.8281,523,160.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="670" x2="670" y1="160.8281" y2="170.8281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="680" x2="670" y1="170.8281" y2="170.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="529" y="177.895">register and setup fip</text><polygon fill="#A80036" points="1196.5,211.9609,1206.5,215.9609,1196.5,219.9609,1200.5,215.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="451.5" x2="1202.5" y1="215.9609" y2="215.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="289" x="458.5" y="211.0278">set_fw_config_info(fw_config_base, max_size)</text><polygon fill="#FBFB77" filter="url(#f14ic88ea301pe)" points="1121,229.0938,1121,284.0938,1302,284.0938,1302,239.0938,1292,229.0938,1121,229.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1292" x2="1292" y1="229.0938" y2="239.0938"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1302" x2="1292" y1="239.0938" y2="239.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="159" x="1127" y="246.1606">set fw_config information</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="1127" y="261.2935">(address, size, image_id)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="1127" y="276.4263">in global dtb_infos array.</text><polygon fill="#A80036" points="1196.5,310.4922,1206.5,314.4922,1196.5,318.4922,1200.5,314.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="451.5" x2="1202.5" y1="314.4922" y2="314.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="458.5" y="309.5591">fconf_load_config(FW_CONFIG_ID)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1218.5" x2="1260.5" y1="343.7578" y2="343.7578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1260.5" x2="1260.5" y1="343.7578" y2="356.7578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1219.5" x2="1260.5" y1="356.7578" y2="356.7578"/><polygon fill="#A80036" points="1229.5,352.7578,1219.5,356.7578,1229.5,360.7578,1225.5,356.7578" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="336" x="1225.5" y="338.6919">FCONF_GET_PROPERTY(dyn_cfg, dtb, FW_CONFIG_ID)</text><polygon fill="#A80036" points="915.5,381.7578,905.5,385.7578,915.5,389.7578,911.5,385.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="909.5" x2="1207.5" y1="385.7578" y2="385.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="257" x="921.5" y="380.8247">dyn_cfg_dtb_info_getter(FW_CONFIG_ID)</text><polygon fill="#A80036" points="1196.5,410.8906,1206.5,414.8906,1196.5,418.8906,1200.5,414.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="904.5" x2="1202.5" y1="414.8906" y2="414.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="911.5" y="409.9575">fw_config_info</text><polygon fill="#A80036" points="162,440.0234,152,444.0234,162,448.0234,158,444.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="156" x2="1207.5" y1="444.0234" y2="444.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="303" x="168" y="439.0903">load_auth_image(FW_CONFIG_ID, &amp;image_info)</text><polygon fill="#FBFB77" filter="url(#f14ic88ea301pe)" points="41,457.1563,41,497.1563,247,497.1563,247,467.1563,237,457.1563,41,457.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="237" x2="237" y1="457.1563" y2="467.1563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="247" x2="237" y1="467.1563" y2="467.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="47" y="474.2231">load and auth image from fip</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="47" y="489.356">with info from plat_io_policy</text><polygon fill="#A80036" points="591.5,508.4219,601.5,512.4219,591.5,516.4219,595.5,512.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="151" x2="597.5" y1="512.4219" y2="512.4219"/><polygon fill="#A80036" points="1196.5,537.4219,1206.5,541.4219,1196.5,545.4219,1200.5,541.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="603.5" x2="1202.5" y1="541.4219" y2="541.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="390" x="610.5" y="536.4888">FCONF_GET_PROPERTY(arm, arm_io_policies, FW_CONFIG_ID)</text><polygon fill="#FBFB77" filter="url(#f14ic88ea301pe)" points="1089,554.5547,1089,579.5547,1333,579.5547,1333,564.5547,1323,554.5547,1089,554.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1323" x2="1323" y1="554.5547" y2="564.5547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1333" x2="1323" y1="564.5547" y2="564.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="1095" y="571.6216">use statically defined policies in bl1</text><polygon fill="#A80036" points="1196.5,605.6875,1206.5,609.6875,1196.5,613.6875,1200.5,609.6875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="146" x2="1202.5" y1="609.6875" y2="609.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="153" y="604.7544">image_info</text><polygon fill="#FBFB77" filter="url(#f14ic88ea301pe)" points="1091,622.8203,1091,647.8203,1331,647.8203,1331,632.8203,1321,622.8203,1091,622.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1321" x2="1321" y1="622.8203" y2="632.8203"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1331" x2="1321" y1="632.8203" y2="632.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="219" x="1097" y="639.8872">get fw_config_dtb from image_info</text><polygon fill="#A80036" points="1196.5,673.9531,1206.5,677.9531,1196.5,681.9531,1200.5,677.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="451.5" x2="1202.5" y1="677.9531" y2="677.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="336" x="458.5" y="673.02">FCONF_GET_PROPERTY(dyn_cfg, dtb, FW_CONFIG_ID)</text><polygon fill="#A80036" points="915.5,703.0859,905.5,707.0859,915.5,711.0859,911.5,707.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="909.5" x2="1207.5" y1="707.0859" y2="707.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="257" x="921.5" y="702.1528">dyn_cfg_dtb_info_getter(FW_CONFIG_ID)</text><polygon fill="#A80036" points="462.5,732.2188,452.5,736.2188,462.5,740.2188,458.5,736.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="456.5" x2="903.5" y1="736.2188" y2="736.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="468.5" y="731.2856">fw_config_info</text><polygon fill="#A80036" points="892.5,761.3516,902.5,765.3516,892.5,769.3516,896.5,765.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="451.5" x2="898.5" y1="765.3516" y2="765.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="228" x="458.5" y="760.4185">populate_dtb_registry(uintptr_t dtb)</text><polygon fill="#A80036" points="1196.5,790.4844,1206.5,794.4844,1196.5,798.4844,1200.5,794.4844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="451.5" x2="1202.5" y1="794.4844" y2="794.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="237" x="458.5" y="789.5513">fconf_load_config(TB_FW_CONFIG_ID)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1218.5" x2="1260.5" y1="823.75" y2="823.75"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1260.5" x2="1260.5" y1="823.75" y2="836.75"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1219.5" x2="1260.5" y1="836.75" y2="836.75"/><polygon fill="#A80036" points="1229.5,832.75,1219.5,836.75,1229.5,840.75,1225.5,836.75" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="359" x="1225.5" y="818.6841">FCONF_GET_PROPERTY(dyn_cfg, dtb, TB_FW_CONFIG_ID)</text><polygon fill="#A80036" points="915.5,861.75,905.5,865.75,915.5,869.75,911.5,865.75" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="909.5" x2="1207.5" y1="865.75" y2="865.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="280" x="921.5" y="860.8169">dyn_cfg_dtb_info_getter(TB_FW_CONFIG_ID)</text><polygon fill="#A80036" points="1196.5,890.8828,1206.5,894.8828,1196.5,898.8828,1200.5,894.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="904.5" x2="1202.5" y1="894.8828" y2="894.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="911.5" y="889.9497">tb_fw_config_info</text><polygon fill="#A80036" points="162,920.0156,152,924.0156,162,928.0156,158,924.0156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="156" x2="1207.5" y1="924.0156" y2="924.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="326" x="168" y="919.0825">load_auth_image(TB_FW_CONFIG_ID, &amp;image_info)</text><polygon fill="#FBFB77" filter="url(#f14ic88ea301pe)" points="41,937.1484,41,977.1484,247,977.1484,247,947.1484,237,937.1484,41,937.1484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="237" x2="237" y1="937.1484" y2="947.1484"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="247" x2="237" y1="947.1484" y2="947.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="47" y="954.2153">load and auth image from fip</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="47" y="969.3481">with info from plat_io_policy</text><polygon fill="#A80036" points="591.5,988.4141,601.5,992.4141,591.5,996.4141,595.5,992.4141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="151" x2="597.5" y1="992.4141" y2="992.4141"/><polygon fill="#A80036" points="1196.5,1017.4141,1206.5,1021.4141,1196.5,1025.4141,1200.5,1021.4141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="603.5" x2="1202.5" y1="1021.4141" y2="1021.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="413" x="610.5" y="1016.481">FCONF_GET_PROPERTY(arm, arm_io_policies, TB_FW_CONFIG_ID)</text><polygon fill="#FBFB77" filter="url(#f14ic88ea301pe)" points="1089,1034.5469,1089,1059.5469,1333,1059.5469,1333,1044.5469,1323,1034.5469,1089,1034.5469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1323" x2="1323" y1="1034.5469" y2="1044.5469"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1333" x2="1323" y1="1044.5469" y2="1044.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="1095" y="1051.6138">use statically defined policies in bl1</text><polygon fill="#A80036" points="1196.5,1085.6797,1206.5,1089.6797,1196.5,1093.6797,1200.5,1089.6797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="146" x2="1202.5" y1="1089.6797" y2="1089.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="153" y="1084.7466">image_info</text><polygon fill="#FBFB77" filter="url(#f14ic88ea301pe)" points="1081,1102.8125,1081,1127.8125,1341,1127.8125,1341,1112.8125,1331,1102.8125,1081,1102.8125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1331" x2="1331" y1="1102.8125" y2="1112.8125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1341" x2="1331" y1="1112.8125" y2="1112.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="239" x="1087" y="1119.8794">get tb_fw_config_dtb from image_info</text><polygon fill="#A80036" points="462.5,1138.9453,452.5,1142.9453,462.5,1146.9453,458.5,1142.9453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="456.5" x2="1207.5" y1="1142.9453" y2="1142.9453"/><polygon fill="#A80036" points="732.5,1167.9453,742.5,1171.9453,732.5,1175.9453,736.5,1171.9453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="451.5" x2="738.5" y1="1171.9453" y2="1171.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="264" x="458.5" y="1167.0122">bl1_plat_get_image_desc(BL2_IMAGE_ID)</text><polygon fill="#A80036" points="462.5,1197.0781,452.5,1201.0781,462.5,1205.0781,458.5,1201.0781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="456.5" x2="743.5" y1="1201.0781" y2="1201.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="468.5" y="1196.145">BL2_IMAGE_DESC</text><polygon fill="#FBFB77" filter="url(#f14ic88ea301pe)" points="304,1214.2109,304,1254.2109,595,1254.2109,595,1224.2109,585,1214.2109,304,1214.2109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="585" x2="585" y1="1214.2109" y2="1224.2109"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="595" x2="585" y1="1224.2109" y2="1224.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="270" x="310" y="1231.2778">set ep_info.args.arg0 of BL2_IMAGE_DESC</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181" x="310" y="1246.4106">to FW_CONFIG base address</text><rect fill="#EEEEEE" filter="url(#f14ic88ea301pe)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1593.5" x="3" y="1284.043"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1596.5" y1="1284.043" y2="1284.043"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1596.5" y1="1287.043" y2="1287.043"/><rect fill="#EEEEEE" filter="url(#f14ic88ea301pe)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="301" x="649.25" y="1273.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="282" x="655.25" y="1289.5435">load &amp; auth, prepare and jump to BL2</text><!--
@startuml

box "BL1 common code"
	participant bl1_main
	participant bl_common
end box

box "arm platform code" #LightBlue
	participant fvp_bl1_setup
	participant arm_bl1_setup
	participant arm_io_storage
end box

box "platform common code"
	participant plat_bl1_common
	participant fconf_dyn_cfg_getter
	participant fconf
end box

bl1_main -> fvp_bl1_setup : bl1_platform_setup()
fvp_bl1_setup -> arm_bl1_setup : arm_bl1_platform_setup()
arm_bl1_setup -> arm_io_storage : plat_arm_io_setup()
note over arm_io_storage : register and setup fip
arm_bl1_setup -> fconf : set_fw_config_info(fw_config_base, max_size)
note over fconf
	set fw_config information
	(address, size, image_id)
	in global dtb_infos array.
end note
activate fconf
	arm_bl1_setup -> fconf : fconf_load_config(FW_CONFIG_ID)
	fconf -> fconf : FCONF_GET_PROPERTY(dyn_cfg, dtb, FW_CONFIG_ID)
	fconf -> fconf_dyn_cfg_getter: dyn_cfg_dtb_info_getter(FW_CONFIG_ID)
	fconf_dyn_cfg_getter -> fconf: fw_config_info
	fconf -> bl_common : load_auth_image(FW_CONFIG_ID, &image_info)
	activate bl_common
	note over bl_common
		load and auth image from fip
		with info from plat_io_policy
	end note
	bl_common -> arm_io_storage
	arm_io_storage -> fconf: FCONF_GET_PROPERTY(arm, arm_io_policies, FW_CONFIG_ID)
	note over fconf: use statically defined policies in bl1
	fconf <- bl_common : image_info
	deactivate bl_common
	note over fconf : get fw_config_dtb from image_info
	arm_bl1_setup -> fconf: FCONF_GET_PROPERTY(dyn_cfg, dtb, FW_CONFIG_ID)
	fconf -> fconf_dyn_cfg_getter: dyn_cfg_dtb_info_getter(FW_CONFIG_ID)
	fconf_dyn_cfg_getter -> arm_bl1_setup: fw_config_info
	arm_bl1_setup -> fconf_dyn_cfg_getter: populate_dtb_registry(uintptr_t dtb)
	arm_bl1_setup -> fconf: fconf_load_config(TB_FW_CONFIG_ID)
	fconf -> fconf : FCONF_GET_PROPERTY(dyn_cfg, dtb, TB_FW_CONFIG_ID)
	fconf -> fconf_dyn_cfg_getter: dyn_cfg_dtb_info_getter(TB_FW_CONFIG_ID)
	fconf_dyn_cfg_getter -> fconf: tb_fw_config_info
	fconf -> bl_common : load_auth_image(TB_FW_CONFIG_ID, &image_info)
	activate bl_common
	note over bl_common
		load and auth image from fip
		with info from plat_io_policy
	end note
	bl_common -> arm_io_storage
	arm_io_storage -> fconf: FCONF_GET_PROPERTY(arm, arm_io_policies, TB_FW_CONFIG_ID)
	note over fconf: use statically defined policies in bl1
	fconf <- bl_common : image_info
	deactivate bl_common
	note over fconf : get tb_fw_config_dtb from image_info
	fconf -> arm_bl1_setup
	arm_bl1_setup -> plat_bl1_common : bl1_plat_get_image_desc(BL2_IMAGE_ID)
	arm_bl1_setup <- plat_bl1_common : BL2_IMAGE_DESC
	note over arm_bl1_setup
	set ep_info.args.arg0 of BL2_IMAGE_DESC
	to FW_CONFIG base address
	end note
deactivate fconf

== load & auth, prepare and jump to BL2 ==

@enduml

PlantUML version 1.2017.15(Mon Jul 03 17:45:34 BST 2017)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.9.1+1-Ubuntu-0ubuntu1.18.04
Operating System: Linux
OS Version: 4.15.0-124-generic
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>