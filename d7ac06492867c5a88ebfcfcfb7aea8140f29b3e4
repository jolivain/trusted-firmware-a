{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "8b796df2_af2ea4fa",
        "filename": "plat/arm/board/tc/tc_common_dpe.c",
        "patchSetId": 3
      },
      "lineNbr": 21,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2023-12-01T15:26:38Z",
      "side": 1,
      "message": "This function is specifically defined when \u0027MEASURED_BOOT\u0027 support is available. Consequently, redefining it for DPE would result in a build failure (redefinition). Do you think DPE should be employed independently, without \u0027MEASURED_BOOT\u0027 support?\n\nAs far as I understand, \u0027MEASURED_BOOT\u0027 complements DPE support. DPE can be utilized with TPM for additional security, and certainly, it can operate on its own in systems lacking TPM or \u0027MEASURED_BOOT\u0027 support.",
      "range": {
        "startLine": 21,
        "startChar": 0,
        "endLine": 21,
        "endChar": 77
      },
      "revId": "d7ac06492867c5a88ebfcfcfb7aea8140f29b3e4",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d5ec9b34_1f45bae0",
        "filename": "plat/arm/board/tc/tc_common_dpe.c",
        "patchSetId": 3
      },
      "lineNbr": 21,
      "author": {
        "id": 1000024
      },
      "writtenOn": "2024-01-29T11:28:37Z",
      "side": 1,
      "message": "I enabled it in the case of DPE as well:\nhttps://review.trustedfirmware.org/c/TF-A/trusted-firmware-a/+/24645/3/include/plat/common/platform.h#144\n\nDICE_PROTECTION_ENVIRONMET is a flavour of MEASURED_BOOT. On the TC platform two flavours are implemented:\n- RSS based rss_measured_boot_*() for RME enabled platforms. TC is not RME capable but we used it to test the comms between RSS and TF-A.\n- RSS based dpe_derive_context() for Total Compute. \n\n\nShould we use two command line flags? \nMEASURED_BOOT\u003d\u003c0,1\u003e\nMEASURED_BOOT_FLAVOUR\u003d\u003cdpe, event-log, rss-measured-boot\u003e",
      "parentUuid": "8b796df2_af2ea4fa",
      "range": {
        "startLine": 21,
        "startChar": 0,
        "endLine": 21,
        "endChar": 77
      },
      "revId": "d7ac06492867c5a88ebfcfcfb7aea8140f29b3e4",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fe7d0dca_e5d0bab3",
        "filename": "plat/arm/board/tc/tc_common_dpe.c",
        "patchSetId": 3
      },
      "lineNbr": 21,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2024-02-07T13:52:01Z",
      "side": 1,
      "message": "The way we\u0027ve handled this so far is that each platform is responsible for pulling the right measured boot backend source files. Arm development platforms in general pull in the event log backend [1](https://git.trustedfirmware.org/TF-A/trusted-firmware-a.git/tree/plat/arm/common/arm_common.mk#n415), while TC platform specifically pulls in the RSS backend [2](https://git.trustedfirmware.org/TF-A/trusted-firmware-a.git/tree/plat/arm/board/tc/platform.mk#n171). We\u0027ve not had a need for a `MEASURED_BOOT_FLAVOUR` build option so far because each platform knew exactly which backend it supported.\n\nEven with the introduction of the DPE backend, can\u0027t we handle this directly inside the TC platform makefile with something like this?\n\n```\nifeq (${MEASURED_BOOT},1)\n  ifeq (${DICE_PROTECTION_ENVIRONMENT},1)\n    # Include dice_prot_env.mk and dependencies.\n  else\n    # Include rss_measured_boot.mk and dependencies.\n  endif\nendif\n```\n\nThis means that both `MEASURED_BOOT\u003d1` and `DICE_PROTECTION_ENVIRONMENT\u003d1` would need to be specified when one wants to build TF-A for TC platform with DPE-based measured boot - the alternative being `MEASURED_BOOT\u003d1` and `DICE_PROTECTION_ENVIRONMENT\u003d0` to build TF-A with RSS-based measured boot.\n\nWith this, I think we\u0027d no longer need the changes introduced in `include/plat/common/platform.h` and `Makefile` in this patch.\n\nHow does that sound?",
      "parentUuid": "d5ec9b34_1f45bae0",
      "range": {
        "startLine": 21,
        "startChar": 0,
        "endLine": 21,
        "endChar": 77
      },
      "revId": "d7ac06492867c5a88ebfcfcfb7aea8140f29b3e4",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "985286a3_5bdf6a99",
        "filename": "plat/arm/board/tc/tc_common_dpe.c",
        "patchSetId": 3
      },
      "lineNbr": 21,
      "author": {
        "id": 1000024
      },
      "writtenOn": "2024-02-12T09:46:43Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "fe7d0dca_e5d0bab3",
      "range": {
        "startLine": 21,
        "startChar": 0,
        "endLine": 21,
        "endChar": 77
      },
      "revId": "d7ac06492867c5a88ebfcfcfb7aea8140f29b3e4",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}