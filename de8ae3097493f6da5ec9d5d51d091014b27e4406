{
  "comments": [
    {
      "key": {
        "uuid": "7fbbdf82_409cbf6a",
        "filename": "plat/xilinx/zynqmp/bl31_zynqmp_setup.c",
        "patchSetId": 3
      },
      "lineNbr": 67,
      "author": {
        "id": 1000098
      },
      "writtenOn": "2021-01-25T19:54:48Z",
      "side": 1,
      "message": "Hi Michal,\n\nI saw your previous comments on patchset 1. I am a bit confused. Why is solution 2 preferred over solution 1. In solution 1, the preprocessor helps us to only compile the appropriate code. the conditional check is essentially performed statically during compile time, thereby helping to make sure the binary only contains the necessary console driver code. I think this kind of solution is the popular style in the TF-A. I see you suggesting solution 2 will achieve the same result. I believe you are relying on linker to prune unused functions.\n\nMay be I am missing something. Let me know your thoughts.\n\nSolution 1 pseudo code:\n# if ZYNQMP_CONSOLE \u003d\u003d ZYNQMP_CONSOLE_cadence( or cadence1 or cadence2)\n    code related to cadence console driver\n#else \n    code related to dcc console\n#endif\n\nsolution 2 pseudo code:\nif(ZYNQMP_CONSOLE_IS(cadence)){\n   code related to cadence console driver\n} else if(ZYNQMP_CONSOLE_IS(dcc)){\n    code related to dcc console\n}",
      "revId": "de8ae3097493f6da5ec9d5d51d091014b27e4406",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "32f7365a_2f4b0d6f",
        "filename": "plat/xilinx/zynqmp/bl31_zynqmp_setup.c",
        "patchSetId": 3
      },
      "lineNbr": 82,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2021-01-25T08:15:09Z",
      "side": 1,
      "message": "Is it good to have default \u0027else\u0027 to cover \u0027no cadence or dcc console\u0027 case with error log \u0027invalid zynqmp console\u0027?",
      "revId": "de8ae3097493f6da5ec9d5d51d091014b27e4406",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bec00a86_1db92129",
        "filename": "plat/xilinx/zynqmp/bl31_zynqmp_setup.c",
        "patchSetId": 3
      },
      "lineNbr": 82,
      "author": {
        "id": 1000469
      },
      "writtenOn": "2021-01-25T13:15:13Z",
      "side": 1,
      "message": "Not aware if TFA is using any log buffer where this message is added. Or how user would see it?\nI think it would make sense to have if (cadence) ... else  use dcc port - it is there all the time. But it is setup already cadence or dcc and error is catch below that\u0027s why I don\u0027t think it is useful to have any else part here.",
      "parentUuid": "32f7365a_2f4b0d6f",
      "revId": "de8ae3097493f6da5ec9d5d51d091014b27e4406",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0ad04006_82e9cb85",
        "filename": "plat/xilinx/zynqmp/bl31_zynqmp_setup.c",
        "patchSetId": 3
      },
      "lineNbr": 82,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2021-01-25T13:25:27Z",
      "side": 1,
      "message": "Ack, Understood, I too not sure how to save the message in case of console is not available but seems like that is platform dependent implementation.\nIf \u0027dcc\u0027 port available all the time then I agree there is no need of extra \u0027else\u0027 here.",
      "parentUuid": "bec00a86_1db92129",
      "revId": "de8ae3097493f6da5ec9d5d51d091014b27e4406",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4669f592_6e410dbe",
        "filename": "plat/xilinx/zynqmp/bl31_zynqmp_setup.c",
        "patchSetId": 3
      },
      "lineNbr": 82,
      "author": {
        "id": 1000469
      },
      "writtenOn": "2021-01-25T13:55:28Z",
      "side": 1,
      "message": "dcc is available all the time but code was done like this that because of saving space. Make sense only one console driver to be present in final binary.\nIf there is just else then in cadence case you will compile both drivers and you can\u0027t fit to allocated space. \nWe have already discussed how to save some space and then we could have more space for multi console implementation where dcc can be present all the time which would be also useful as crash console.",
      "parentUuid": "0ad04006_82e9cb85",
      "revId": "de8ae3097493f6da5ec9d5d51d091014b27e4406",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    }
  ]
}