{
  "comments": [
    {
      "key": {
        "uuid": "6a14a0f3_0c993579",
        "filename": "drivers/io/io_fip.c",
        "patchSetId": 5
      },
      "lineNbr": 253,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2020-02-05T12:49:23Z",
      "side": 1,
      "message": "Having a single global variable to the header is not enough. There are several problems that it doesn\u0027t integrate well with the IO layer and wouldn\u0027t scale when multple FIP devices have to be handled. \n\nIf you would like to get the FIP header, suggest to do something using the exisiting IP framework, suggest something like this:\n```\nfip_toc_header_t header;\n\nplat_get_image_source(FIP_IMAGE_ID, \u0026dev_handle, \u0026image_spec);\n\n\t/* Attempt to access the image */\nio_result \u003d io_open(dev_handle, image_spec, \u0026image_handle);\n\nio_result \u003d io_read(image_handle, \u0026header, sizeof(header), \u0026bytes_read);\n```\n\nThis will return the full FIP header which can be inspected for platform flags.",
      "range": {
        "startLine": 253,
        "startChar": 3,
        "endLine": 253,
        "endChar": 16
      },
      "revId": "424ad30fbabde06f95dec11bdbede5e5ef1e7485",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "61bedc77_1446cc4f",
        "filename": "drivers/io/io_fip.c",
        "patchSetId": 5
      },
      "lineNbr": 253,
      "author": {
        "id": 1000319
      },
      "writtenOn": "2020-02-05T21:20:32Z",
      "side": 1,
      "message": "That is not realistic for future queries.  We would need to read the entire image to get the fip header.  We need the ability to NOT read the image again to get the flags from the fip header - which is what this commit is trying to achieve.\n\nPlease suggest a method for the platform layer to retrieve the fip header flags without having to read the fip image again.",
      "parentUuid": "6a14a0f3_0c993579",
      "range": {
        "startLine": 253,
        "startChar": 3,
        "endLine": 253,
        "endChar": 16
      },
      "revId": "424ad30fbabde06f95dec11bdbede5e5ef1e7485",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8620f45b_438fe0f2",
        "filename": "drivers/io/io_fip.c",
        "patchSetId": 5
      },
      "lineNbr": 253,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2020-02-06T10:02:33Z",
      "side": 1,
      "message": "We could enhance the fip handle to store header flags  but we dont really want to encourage platforms to put fimrware data in the FIP ToC as the ToC is not part of authentication framework and is not secure. See discussion here for some discussion on this : https://lists.trustedfirmware.org/pipermail/tf-a/2020-January/000254.html\n\nCould you please describe your use of fip header flags ? An email to the list would be better for discussion.",
      "parentUuid": "61bedc77_1446cc4f",
      "range": {
        "startLine": 253,
        "startChar": 3,
        "endLine": 253,
        "endChar": 16
      },
      "revId": "424ad30fbabde06f95dec11bdbede5e5ef1e7485",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    }
  ]
}