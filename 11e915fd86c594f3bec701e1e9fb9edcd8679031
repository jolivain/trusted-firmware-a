{
  "comments": [
    {
      "key": {
        "uuid": "8da57797_fc1e7a43",
        "filename": "lib/extensions/pauth/pauth_demangle.S",
        "patchSetId": 1
      },
      "lineNbr": 25,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2020-02-07T00:55:08Z",
      "side": 1,
      "message": "is there a reason we dont want to use the XPAC* instructions ?",
      "revId": "11e915fd86c594f3bec701e1e9fb9edcd8679031",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "65a75076_16a5143c",
        "filename": "lib/extensions/pauth/pauth_demangle.S",
        "patchSetId": 1
      },
      "lineNbr": 25,
      "author": {
        "id": 1000105
      },
      "writtenOn": "2020-02-07T14:22:44Z",
      "side": 1,
      "message": "demangle_address() is also called from do_crash_reporting() and when External Aborts or SError are rooted to EL3 from lower ELx, XPACI or XPACLRI will use TCR_EL3 for stripping PAC, but not TCR_ELx, which caused the exception. For these exceptions the current do_crash_reporting() implementation doesn\u0027t show lower ELx register dump correctly and uses EL3 X30. It should be modified to display the correct data. I can change demangle_address() to use XPACI and then use its current code when do_crash_reporting() is fixed. Let me know what\u0027s your opinion of it.",
      "parentUuid": "8da57797_fc1e7a43",
      "revId": "11e915fd86c594f3bec701e1e9fb9edcd8679031",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5a54b986_c489f9a2",
        "filename": "lib/extensions/pauth/pauth_demangle.S",
        "patchSetId": 1
      },
      "lineNbr": 25,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2020-02-07T17:10:07Z",
      "side": 1,
      "message": "Thanks Alexei. Not sure i understand your comment about the lower ELx register dump and EL3 x30. I understand that if you get an exception from lower EL\u0027s do_crash_reporting is still dumping EL3 registers. Is this what you are referring to ? Also can you elaborate on the EL3 x30 comment?\n\nI think this patch is fine and need not be changed to use XPAC. Missed the fact that XPAC will use the current EL\u0027s TCR. Might we worth adding a short comment indicating why demangle_address is not using XPAC*.",
      "parentUuid": "65a75076_16a5143c",
      "revId": "11e915fd86c594f3bec701e1e9fb9edcd8679031",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5870a3f0_a08cfeb6",
        "filename": "lib/extensions/pauth/pauth_demangle.S",
        "patchSetId": 1
      },
      "lineNbr": 25,
      "author": {
        "id": 1000105
      },
      "writtenOn": "2020-02-10T15:21:12Z",
      "side": 1,
      "message": "Yes, getting \"exception from lower EL\u0027s do_crash_reporting is still dumping EL3 registers\", \u0026 X30 is EL3 LR. That\u0027s why it is OK for now to use XPACI, but it should be fixed.",
      "parentUuid": "5a54b986_c489f9a2",
      "revId": "11e915fd86c594f3bec701e1e9fb9edcd8679031",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    }
  ]
}