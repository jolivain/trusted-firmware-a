{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "56941b53_5d4fde4e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2021-06-15T17:26:28Z",
      "side": 1,
      "message": "Shouldnt this behavior be a build option? This sounds like we are disabling a security feature where a platform may want to configure TZC and then lock the door behind it and not change any settings for the rest of the boot cycle.",
      "revId": "8aabf259d49695a0f47fbf1f9f58e377cc27a2f3",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "74fb9474_2bccdc8d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1000550
      },
      "writtenOn": "2021-06-15T17:45:14Z",
      "side": 1,
      "message": "I find it very unlikely that\nthe hanging library function\ncan be thought as a security\nfeature.\nAfter all, anyone can copy this\ncode locally, modify it, and\nreconfigure filters.",
      "parentUuid": "56941b53_5d4fde4e",
      "revId": "8aabf259d49695a0f47fbf1f9f58e377cc27a2f3",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dab47eb8_a61111e9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1000550
      },
      "writtenOn": "2021-06-15T17:45:14Z",
      "side": 1,
      "message": "Raghu,",
      "revId": "8aabf259d49695a0f47fbf1f9f58e377cc27a2f3",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "453ef55d_ac68ee34",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2021-06-15T20:04:39Z",
      "side": 1,
      "message": "Not sure i understand what you mean by hanging library function. Do you mean it was not working all along and we are just finding this issue?\nSorry, i\u0027d like to understand a little bit more about what exactly this is fixing.",
      "parentUuid": "dab47eb8_a61111e9",
      "revId": "8aabf259d49695a0f47fbf1f9f58e377cc27a2f3",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4bbfc26d_b56c9ea6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1000550
      },
      "writtenOn": "2021-06-15T21:31:31Z",
      "side": 1,
      "message": "\u003e Do you mean it was not working all along and we are just finding this issue?\n\nIf ever called from DRAM - hang.\nBut you don\u0027t call it from DRAM.\nI call it from DRAM.\nBut it can\u0027t be regarded as a\nsecurity enforcement, because I\ncan just as well use the locally\nmodified copy of the same function.",
      "parentUuid": "453ef55d_ac68ee34",
      "revId": "8aabf259d49695a0f47fbf1f9f58e377cc27a2f3",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "162a1f9c_db2ac258",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2021-06-15T21:56:07Z",
      "side": 1,
      "message": "sorry, if what is called from dram? Can you provide a more elaborate explanation? \nAlso if what is used locally? If you mean that someone can make copies/forks of the code and do whatever they want, what you are saying is true. but the upstream implementation should work for all.",
      "parentUuid": "4bbfc26d_b56c9ea6",
      "revId": "8aabf259d49695a0f47fbf1f9f58e377cc27a2f3",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "191a8ecc_88c20b3a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1000550
      },
      "writtenOn": "2021-06-15T22:02:56Z",
      "side": 1,
      "message": "\u003e sorry, if what is called from dram?\n\nIf tzc400_disable_filters() is called\nfrom DRAM. Then it hangs.\n\n\u003e Also if what is used locally?\n\nModified/fixed code of tzc400_disable_filters()\nand tzc400_enable_filters(). I.e.\nthe ones with my patch applied.\nbl32 can use the locally modified\nversion to get the work done.\n\n\u003e but the upstream implementation should work for all.\n\nUpstream implementation works\nbecause it never calls these\nfunctions from DRAM.\nBut I call these functions from\nSPD/bl32, and that\u0027s where the whole\nthing hangs.",
      "parentUuid": "162a1f9c_db2ac258",
      "revId": "8aabf259d49695a0f47fbf1f9f58e377cc27a2f3",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f7d9e677_eca451f0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2021-06-15T22:13:38Z",
      "side": 1,
      "message": "okay, ignoring the DRAM issue, if i leave MMIO access to TZC open(filter 0 enabled), and there is an exploit in the secure world, would that allow exploited code to change TZC settings?\nI still dont get why executing the same function in dram(as opposed to SRAM) causes issues. Surely there is some context i\u0027m missing.",
      "parentUuid": "191a8ecc_88c20b3a",
      "revId": "8aabf259d49695a0f47fbf1f9f58e377cc27a2f3",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "06df1085_9f5e9d76",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1000550
      },
      "writtenOn": "2021-06-15T22:27:08Z",
      "side": 1,
      "message": "\u003e an exploit in the secure world, would that allow exploited code\n\u003e to change TZC settings?\n\nThe main thing to understand is\nthat the buggy library function\ndoes not prevent an exploit from\nwork. It prevents the correct code\nfrom work. In fact, the bl32 binary\nwill have the private copies of\ntzc400_disable_filters() and\ntzc400_enable_filters() in any case.\nIt doesn\u0027t call to bl2 to set up\ntzc, no. So it always has the local\ncopy, but it would be good to have\nthat copy from the same known-good\nsources.\n\n\u003e I still dont get why executing the same function in\n\u003e dram(as opposed to SRAM) causes issues.\n\nBecause disabling region 0 seems\nto be disabling the whole DRAM.\nIts not said in the docs explicitly\n(at least I haven\u0027t found), but the\ndoc says region 0 should not be disabled:\n---\nRegion access rules\n\nThe TZC-400 implements the following region rules:\n    A region must be enabled for a filter unit to provide a valid match.\n    Region 0 is always enabled.\n---",
      "parentUuid": "f7d9e677_eca451f0",
      "revId": "8aabf259d49695a0f47fbf1f9f58e377cc27a2f3",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f1bd44f9_f41482dd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2021-06-15T23:45:51Z",
      "side": 1,
      "message": "Alright. thanks for the explanation.",
      "parentUuid": "06df1085_9f5e9d76",
      "revId": "8aabf259d49695a0f47fbf1f9f58e377cc27a2f3",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}