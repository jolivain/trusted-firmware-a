{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "cccda025_734fce6c",
        "filename": "drivers/measured_boot/rss/dice_prot_env.c",
        "patchSetId": 7
      },
      "lineNbr": 42,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2024-02-05T15:09:58Z",
      "side": 1,
      "message": "Assuming `DICE_HASH_SIZE` and `DPE_DIGEST_SIZE` are both constant values fixed at compile time, this should be a compile-time assert (see `CASSERT()` macro) rather than a runtime one.\n\nAlso, could `DICE_HASH_SIZE` be replaced with `sizeof(dice_inputs-\u003eauthority_hash)`? I think this would be more self-explanatory with regards to the `memcpy()` call this relates to.",
      "revId": "d74bdf75b600378da557d3ba1d97664728df1f8f",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2ad30a18_4c1b2e02",
        "filename": "drivers/measured_boot/rss/dice_prot_env.c",
        "patchSetId": 7
      },
      "lineNbr": 42,
      "author": {
        "id": 1000024
      },
      "writtenOn": "2024-02-06T11:00:11Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "cccda025_734fce6c",
      "revId": "d74bdf75b600378da557d3ba1d97664728df1f8f",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a5196921_6638e5e7",
        "filename": "drivers/measured_boot/rss/dice_prot_env.c",
        "patchSetId": 7
      },
      "lineNbr": 50,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2024-02-05T15:09:58Z",
      "side": 1,
      "message": "needed",
      "range": {
        "startLine": 50,
        "startChar": 36,
        "endLine": 50,
        "endChar": 40
      },
      "revId": "d74bdf75b600378da557d3ba1d97664728df1f8f",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0f0a8ada_e0e395bf",
        "filename": "drivers/measured_boot/rss/dice_prot_env.c",
        "patchSetId": 7
      },
      "lineNbr": 50,
      "author": {
        "id": 1000024
      },
      "writtenOn": "2024-02-06T11:00:11Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "a5196921_6638e5e7",
      "range": {
        "startLine": 50,
        "startChar": 36,
        "endLine": 50,
        "endChar": 40
      },
      "revId": "d74bdf75b600378da557d3ba1d97664728df1f8f",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "78d19695_bde45788",
        "filename": "drivers/measured_boot/rss/dice_prot_env.c",
        "patchSetId": 7
      },
      "lineNbr": 51,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2024-02-05T15:09:58Z",
      "side": 1,
      "message": "Would there be value in adding the following 2 checks?\n1. (metadata-\u003esw_type_size \u003e\u003d 1)\n2. (metadata-\u003esw_type[metadata-\u003esw_type_size - 1] \u003d\u003d 0)\n?",
      "range": {
        "startLine": 51,
        "startChar": 37,
        "endLine": 51,
        "endChar": 63
      },
      "revId": "d74bdf75b600378da557d3ba1d97664728df1f8f",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3fc00930_1ebd02d7",
        "filename": "drivers/measured_boot/rss/dice_prot_env.c",
        "patchSetId": 7
      },
      "lineNbr": 51,
      "author": {
        "id": 1000024
      },
      "writtenOn": "2024-02-06T11:00:11Z",
      "side": 1,
      "message": "I think they are not needed:\n - metadata-sw_type is initialized to 0 if not set explicitly in tc_dpe_blx.c.\n - dpe_init set metadata-\u003esw_type_size at least to 1.",
      "parentUuid": "78d19695_bde45788",
      "range": {
        "startLine": 51,
        "startChar": 37,
        "endLine": 51,
        "endChar": 63
      },
      "revId": "d74bdf75b600378da557d3ba1d97664728df1f8f",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "10b1842f_feccf802",
        "filename": "drivers/measured_boot/rss/dice_prot_env.c",
        "patchSetId": 7
      },
      "lineNbr": 51,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2024-02-07T08:47:39Z",
      "side": 1,
      "message": "Yes but neither of these initializations are in `map_metadata_to_dice_inputs()`/`dpe_measure_and_record()`\u0027s remits. And yet `map_metadata_to_dice_inputs()` relies on them to be done correctly, else we risk setting a huge value in `dice_inputs-\u003ecode_descriptor_size` or losing a meaningful character from the `sw_type` string.\n\nIf we ever change the way `metadata-\u003esw_type` or `metadata-\u003esw_type_size` are initialized then I think it would be useful to have safeguards firing in `map_metadata_to_dice_inputs()` and all other places where we relied on the old initialization scheme.",
      "parentUuid": "3fc00930_1ebd02d7",
      "range": {
        "startLine": 51,
        "startChar": 37,
        "endLine": 51,
        "endChar": 63
      },
      "revId": "d74bdf75b600378da557d3ba1d97664728df1f8f",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4ae9f755_8af1a52f",
        "filename": "drivers/measured_boot/rss/dice_prot_env.c",
        "patchSetId": 7
      },
      "lineNbr": 104,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2024-02-05T15:09:58Z",
      "side": 1,
      "message": "(minor) Could we not just initialize `current_context_handle` to `initial_context_handle` at line 72 to achieve the same result? Or do we first need to go through some of the checks performed by lines 81-99 before we set `current_context_handle` to anything else than 0?\n\nAlso, the comment (*\"Only at the first call\"*) assumes that `dpe_init()` will never set `initial_context_handle` to 0 ; should this be checked upfront if line 103?",
      "range": {
        "startLine": 101,
        "startChar": 0,
        "endLine": 104,
        "endChar": 2
      },
      "revId": "d74bdf75b600378da557d3ba1d97664728df1f8f",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "23e537fd_f7d75cfd",
        "filename": "drivers/measured_boot/rss/dice_prot_env.c",
        "patchSetId": 7
      },
      "lineNbr": 104,
      "author": {
        "id": 1000024
      },
      "writtenOn": "2024-02-06T11:00:11Z",
      "side": 1,
      "message": "`initial_context_handle ` is not const, its value is queried at runtime, so it cannot be used as an initializer.",
      "parentUuid": "4ae9f755_8af1a52f",
      "range": {
        "startLine": 101,
        "startChar": 0,
        "endLine": 104,
        "endChar": 2
      },
      "revId": "d74bdf75b600378da557d3ba1d97664728df1f8f",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dec986fc_af1bd1b5",
        "filename": "drivers/measured_boot/rss/dice_prot_env.c",
        "patchSetId": 7
      },
      "lineNbr": 104,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2024-02-07T08:47:39Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "23e537fd_f7d75cfd",
      "range": {
        "startLine": 101,
        "startChar": 0,
        "endLine": 104,
        "endChar": 2
      },
      "revId": "d74bdf75b600378da557d3ba1d97664728df1f8f",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "98c95f99_14d724f9",
        "filename": "drivers/measured_boot/rss/dice_prot_env.c",
        "patchSetId": 7
      },
      "lineNbr": 159,
      "author": {
        "id": 1000124
      },
      "writtenOn": "2024-02-02T20:47:53Z",
      "side": 1,
      "message": "hash_calc_done \u003d\u003d false",
      "range": {
        "startLine": 159,
        "startChar": 8,
        "endLine": 159,
        "endChar": 22
      },
      "revId": "d74bdf75b600378da557d3ba1d97664728df1f8f",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4ed7e8d4_ab50dfd1",
        "filename": "drivers/measured_boot/rss/dice_prot_env.c",
        "patchSetId": 7
      },
      "lineNbr": 159,
      "author": {
        "id": 1000024
      },
      "writtenOn": "2024-02-06T11:00:11Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "98c95f99_14d724f9",
      "range": {
        "startLine": 159,
        "startChar": 8,
        "endLine": 159,
        "endChar": 22
      },
      "revId": "d74bdf75b600378da557d3ba1d97664728df1f8f",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}