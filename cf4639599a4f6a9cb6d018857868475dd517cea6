{
  "comments": [
    {
      "key": {
        "uuid": "092cc9d2_f7003c89",
        "filename": "plat/arm/board/n1sdp/n1sdp_bl31_setup.c",
        "patchSetId": 5
      },
      "lineNbr": 28,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2019-10-30T15:00:50Z",
      "side": 1,
      "message": "Need more elaboration on what is meant by local and remote. Is there no need to keep this in a private header ?",
      "range": {
        "startLine": 28,
        "startChar": 6,
        "endLine": 28,
        "endChar": 27
      },
      "revId": "cf4639599a4f6a9cb6d018857868475dd517cea6",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "767484aa_5529e5bd",
        "filename": "plat/arm/board/n1sdp/n1sdp_bl31_setup.c",
        "patchSetId": 5
      },
      "lineNbr": 28,
      "author": {
        "id": 1000102
      },
      "writtenOn": "2019-10-30T16:34:09Z",
      "side": 1,
      "message": "Done\nSince the earlier struct were also defined here so i kept it same.",
      "parentUuid": "092cc9d2_f7003c89",
      "range": {
        "startLine": 28,
        "startChar": 6,
        "endLine": 28,
        "endChar": 27
      },
      "revId": "cf4639599a4f6a9cb6d018857868475dd517cea6",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e96bcabb_272473cf",
        "filename": "plat/arm/board/n1sdp/n1sdp_bl31_setup.c",
        "patchSetId": 5
      },
      "lineNbr": 144,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2019-10-30T15:00:50Z",
      "side": 1,
      "message": "Need sanity check of values read from SDS. I know we cannot check exactly, but there must be an upper bound (and lower bound) which we can validate against.",
      "range": {
        "startLine": 144,
        "startChar": 15,
        "endLine": 144,
        "endChar": 39
      },
      "revId": "cf4639599a4f6a9cb6d018857868475dd517cea6",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c26b78a5_d59430e6",
        "filename": "plat/arm/board/n1sdp/n1sdp_bl31_setup.c",
        "patchSetId": 5
      },
      "lineNbr": 144,
      "author": {
        "id": 1000102
      },
      "writtenOn": "2019-10-30T16:34:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e96bcabb_272473cf",
      "range": {
        "startLine": 144,
        "startChar": 15,
        "endLine": 144,
        "endChar": 39
      },
      "revId": "cf4639599a4f6a9cb6d018857868475dd517cea6",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dc8a7010_fdcab578",
        "filename": "plat/arm/board/n1sdp/n1sdp_bl31_setup.c",
        "patchSetId": 5
      },
      "lineNbr": 162,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2019-10-30T15:00:50Z",
      "side": 1,
      "message": "nit: should",
      "range": {
        "startLine": 162,
        "startChar": 29,
        "endLine": 162,
        "endChar": 35
      },
      "revId": "cf4639599a4f6a9cb6d018857868475dd517cea6",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a8184d4d_1d245b3a",
        "filename": "plat/arm/board/n1sdp/n1sdp_bl31_setup.c",
        "patchSetId": 5
      },
      "lineNbr": 162,
      "author": {
        "id": 1000102
      },
      "writtenOn": "2019-10-30T16:34:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "dc8a7010_fdcab578",
      "range": {
        "startLine": 162,
        "startChar": 29,
        "endLine": 162,
        "endChar": 35
      },
      "revId": "cf4639599a4f6a9cb6d018857868475dd517cea6",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2a9a8f65_689b1b28",
        "filename": "plat/arm/board/n1sdp/n1sdp_bl31_setup.c",
        "patchSetId": 5
      },
      "lineNbr": 165,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2019-10-29T08:23:20Z",
      "side": 1,
      "message": "I am confused by this... If I understand correctly, this stores the first 4 bytes of the plat_info structure at address N1SDP_PLATFORM_INFO_BASE. This structure starts with a boolean. I am not sure the size of a boolean is defined by the C standard (I think it just says that it must be large enough to hold 0 and 1).\n\nIs this code correct? Am I missing something?",
      "range": {
        "startLine": 165,
        "startChar": 41,
        "endLine": 165,
        "endChar": 64
      },
      "revId": "cf4639599a4f6a9cb6d018857868475dd517cea6",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4e8686aa_00c77246",
        "filename": "plat/arm/board/n1sdp/n1sdp_bl31_setup.c",
        "patchSetId": 5
      },
      "lineNbr": 165,
      "author": {
        "id": 1000102
      },
      "writtenOn": "2019-10-29T10:19:03Z",
      "side": 1,
      "message": "plat_info structure is 4 bytes long, Boolean also takes 1 byte(An object declared as type _Bool is large enough to store the values 0 and 1, which is at least a byte long)\n\nIntention here is to copy plat_info structure at this address for UEFI.",
      "parentUuid": "2a9a8f65_689b1b28",
      "range": {
        "startLine": 165,
        "startChar": 41,
        "endLine": 165,
        "endChar": 64
      },
      "revId": "cf4639599a4f6a9cb6d018857868475dd517cea6",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3341f1b0_539d5662",
        "filename": "plat/arm/board/n1sdp/n1sdp_bl31_setup.c",
        "patchSetId": 5
      },
      "lineNbr": 165,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2019-10-29T11:57:00Z",
      "side": 1,
      "message": "I agree with you, _Bool is *at least* 1 byte long but that doesn\u0027t say what its *exact* width is. If I am not mistaken, it could well be 8 bytes long and that would still be compliant with the C standard. This code is making an assumption on the exact size of the _Bool type and I think it should not. And even so, assuming that _Bool is indeed 1 byte long, there would still be no guarantee that the structure is 4 bytes long, as the compiler is free to insert padding bytes between fields (unless the structure is declared as packed).\n\nIn fact, given that the n1sdp_plat_info structure is passed from SCP over SDS, I am guessing it is crucial that both firmwares have the same view of the structure layout. So I think we need to declare the structure as packed and use fixed-width types only (i.e. replacing \"bool multichip_mode\" by \"uint8_t multichip_mode\").\n\nDoes it make sense?",
      "parentUuid": "4e8686aa_00c77246",
      "range": {
        "startLine": 165,
        "startChar": 41,
        "endLine": 165,
        "endChar": 64
      },
      "revId": "cf4639599a4f6a9cb6d018857868475dd517cea6",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "efb923e9_8ca48416",
        "filename": "plat/arm/board/n1sdp/n1sdp_bl31_setup.c",
        "patchSetId": 5
      },
      "lineNbr": 165,
      "author": {
        "id": 1000102
      },
      "writtenOn": "2019-10-29T14:44:29Z",
      "side": 1,
      "message": "Yes the points you raised make sense, but considering scope of our Firmware (TF-A and SCP) i think we are good with current declaration.\nIf you see ARM compilers basic data types the size of boolean is a byte long, though i am not sure if it is \"The docment\" to refer \nhttp://infocenter.arm.com/help/index.jsp?topic\u003d/com.arm.doc.dui0491c/Babfcgfc.html\nhttp://www.keil.com/support/man/docs/armcc/armcc_chr1359125009502.htm\nUsing  Boolean makes more sense for multichip_mode.\n\nIf we assume that Boolean is always going to be byte long then i think this structure is always going to be 4 Byte long no need to declare it as packed.(i have verified this in SCP/TF-A and UEFI)",
      "parentUuid": "3341f1b0_539d5662",
      "range": {
        "startLine": 165,
        "startChar": 41,
        "endLine": 165,
        "endChar": 64
      },
      "revId": "cf4639599a4f6a9cb6d018857868475dd517cea6",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7bb0bac9_5a28ed49",
        "filename": "plat/arm/board/n1sdp/n1sdp_bl31_setup.c",
        "patchSetId": 5
      },
      "lineNbr": 165,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2019-10-30T15:00:50Z",
      "side": 1,
      "message": "Hi Manish, I agree with Sandrine that the sizes have to be more tightly specified when cross image boundaries. Please modify as suggested.",
      "parentUuid": "efb923e9_8ca48416",
      "range": {
        "startLine": 165,
        "startChar": 41,
        "endLine": 165,
        "endChar": 64
      },
      "revId": "cf4639599a4f6a9cb6d018857868475dd517cea6",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b036ce50_a4691ca7",
        "filename": "plat/arm/board/n1sdp/n1sdp_bl31_setup.c",
        "patchSetId": 5
      },
      "lineNbr": 165,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2019-10-30T16:13:57Z",
      "side": 1,
      "message": "Hi Manish, Soby,\n\nActually I think Manish is right, it is safe to assume that _Bool is exactly 1 byte long. Although this is not enforced by the C standard, it is clearly defined in the Arm ABIs (both 32-bit and 64-bit architectures).\n\nhttps://developer.arm.com/docs/ihi0055/latest/procedure-call-standard-for-the-arm-64-bit-architecture\nhttps://developer.arm.com/docs/ihi0042/latest/procedure-call-standard-for-the-arm-architecture-abi-2018q4-documentation\n\nIn these documents, _Bool maps to an unsigned byte.\n\nSo I am happy for multichip_mode to be of bool type. However, I still think we need to pack the structure to eliminate any risk of padding, unless you can point me to a section in the ABI that says it can\u0027t happen in this case. It is very unlikely that the compiler would introduce any padding bytes in a structure of uint8_t/bool variables but it is not impossible I think.",
      "parentUuid": "7bb0bac9_5a28ed49",
      "range": {
        "startLine": 165,
        "startChar": 41,
        "endLine": 165,
        "endChar": 64
      },
      "revId": "cf4639599a4f6a9cb6d018857868475dd517cea6",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a93ab11c_d7cabf05",
        "filename": "plat/arm/board/n1sdp/n1sdp_bl31_setup.c",
        "patchSetId": 5
      },
      "lineNbr": 165,
      "author": {
        "id": 1000102
      },
      "writtenOn": "2019-10-30T16:34:09Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b036ce50_a4691ca7",
      "range": {
        "startLine": 165,
        "startChar": 41,
        "endLine": 165,
        "endChar": 64
      },
      "revId": "cf4639599a4f6a9cb6d018857868475dd517cea6",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3974ca7a_bb90b32c",
        "filename": "plat/arm/board/n1sdp/n1sdp_bl31_setup.c",
        "patchSetId": 5
      },
      "lineNbr": 165,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2019-10-30T17:02:32Z",
      "side": 1,
      "message": "OK, that\u0027s fine then.",
      "parentUuid": "a93ab11c_d7cabf05",
      "range": {
        "startLine": 165,
        "startChar": 41,
        "endLine": 165,
        "endChar": 64
      },
      "revId": "cf4639599a4f6a9cb6d018857868475dd517cea6",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    }
  ]
}