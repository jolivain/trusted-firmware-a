{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "0918dec0_a2d1ce8c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 7
      },
      "lineNbr": 0,
      "author": {
        "id": 1000118
      },
      "writtenOn": "2021-02-12T16:54:56Z",
      "side": 1,
      "message": "\u003e Patch Set 7: Verified-1\n\u003e \n\u003e Build Failed \n\u003e \n\u003e https://jenkins.oss.arm.com/job/tf-gerrit-tforg-l2/2034/ : This Jenkins server is not publicly accessible. A core maintainer will let you know if this CI failure is blocking the merge of this patch.\n\nclang is (of course) using a different name for its CRC intrinsics. Created a (very) poor man\u0027s version of arm_acle.h, which checks for the compiler.",
      "revId": "9174fd10b66f17fccd4622ebbe2f8b84c58b79c9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "652e9b20_a338dd90",
        "filename": "plat/arm/board/juno/platform.mk",
        "patchSetId": 7
      },
      "lineNbr": 171,
      "author": {
        "id": 1000098
      },
      "writtenOn": "2021-02-11T22:27:56Z",
      "side": 1,
      "message": "Alexei had introduced a build flag called ARM_ARCH_FEATURE for specifying arm architecture features. I was wondering if that would make specifying this feature simpler rather than appending to each CPPFLAGS.\n\nARM_ARCH_FEATURE \u003d crc\nhttps://review.trustedfirmware.org/c/TF-A/trusted-firmware-a/+/7377",
      "range": {
        "startLine": 167,
        "startChar": 0,
        "endLine": 171,
        "endChar": 35
      },
      "revId": "9174fd10b66f17fccd4622ebbe2f8b84c58b79c9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "22c86114_0362c52f",
        "filename": "plat/arm/board/juno/platform.mk",
        "patchSetId": 7
      },
      "lineNbr": 171,
      "author": {
        "id": 1000118
      },
      "writtenOn": "2021-02-12T16:54:56Z",
      "side": 1,
      "message": "But that is too late in here, isn\u0027t it? It works if I specify this on the make command line, but not in platform.mk. To me it looks like ARM_ARCH_FEATURE is already parsed in the top level Makefile *before* we include PLAT_MAKEFILE_FULL.\n\nOr is there a trick I am missing?",
      "parentUuid": "652e9b20_a338dd90",
      "range": {
        "startLine": 167,
        "startChar": 0,
        "endLine": 171,
        "endChar": 35
      },
      "revId": "9174fd10b66f17fccd4622ebbe2f8b84c58b79c9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e1eb97fc_49df4bde",
        "filename": "plat/arm/board/juno/platform.mk",
        "patchSetId": 7
      },
      "lineNbr": 171,
      "author": {
        "id": 1000098
      },
      "writtenOn": "2021-02-12T17:16:30Z",
      "side": 1,
      "message": "Specifying it in make command line i.e., every build configuration for Juno, seems good to me. May be @Alexei has other suggestion.",
      "parentUuid": "22c86114_0362c52f",
      "range": {
        "startLine": 167,
        "startChar": 0,
        "endLine": 171,
        "endChar": 35
      },
      "revId": "9174fd10b66f17fccd4622ebbe2f8b84c58b79c9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4a55aa56_1722fca9",
        "filename": "plat/arm/board/juno/platform.mk",
        "patchSetId": 7
      },
      "lineNbr": 171,
      "author": {
        "id": 1000118
      },
      "writtenOn": "2021-02-12T18:46:08Z",
      "side": 1,
      "message": "Are you suggesting that we ask the user to add this every time they want to build for Juno? I don\u0027t think this is the right solution: if that is a requirement of the code, it should be enforced by the build system. I don\u0027t like enumerating all the stages either, but that is how I made it work. So either I keep this, or there is a simpler way to specify this? Not sure if moving the ARM_ARCH_FEATURES processing later in the top level Makefile really works (I think there are dependencies).\n\nI wonder if we can accept this slightly annoying enumeration for now, with the chance of this getting remedied with the build system overhaul?",
      "parentUuid": "e1eb97fc_49df4bde",
      "range": {
        "startLine": 167,
        "startChar": 0,
        "endLine": 171,
        "endChar": 35
      },
      "revId": "9174fd10b66f17fccd4622ebbe2f8b84c58b79c9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "32c957f4_8cfbd26e",
        "filename": "plat/arm/board/juno/platform.mk",
        "patchSetId": 7
      },
      "lineNbr": 171,
      "author": {
        "id": 1000098
      },
      "writtenOn": "2021-02-12T20:20:18Z",
      "side": 1,
      "message": "After reading my comment myself, I realize I made a wrong suggestion. Perhaps, it would be good if the build system enforces the ARM_ARCH_FEATURE appropriately to support crc intrinsics for Juno, at least when TRNG_SUPPORT\u003d1. I am sure others will have better ideas to deal with this concern.",
      "parentUuid": "4a55aa56_1722fca9",
      "range": {
        "startLine": 167,
        "startChar": 0,
        "endLine": 171,
        "endChar": 35
      },
      "revId": "9174fd10b66f17fccd4622ebbe2f8b84c58b79c9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "07e127d5_4a43d00c",
        "filename": "plat/arm/board/juno/platform.mk",
        "patchSetId": 7
      },
      "lineNbr": 171,
      "author": {
        "id": 1000105
      },
      "writtenOn": "2021-02-16T16:26:56Z",
      "side": 1,
      "message": "Will this work?\nARM_ARCH_FEATURE ?\u003d crc",
      "parentUuid": "32c957f4_8cfbd26e",
      "range": {
        "startLine": 167,
        "startChar": 0,
        "endLine": 171,
        "endChar": 35
      },
      "revId": "9174fd10b66f17fccd4622ebbe2f8b84c58b79c9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "116d98e5_cfc1f0a6",
        "filename": "plat/arm/board/juno/platform.mk",
        "patchSetId": 7
      },
      "lineNbr": 171,
      "author": {
        "id": 1000118
      },
      "writtenOn": "2021-02-16T16:46:29Z",
      "side": 1,
      "message": "No, unfortunately not. I think the point is that this variable is referenced in line 208 of the top level Makefile, whereas the platform Makefile is included only in line 549. At least that is my understanding of it. So any change to ARM_ARCH_FEATURE would be applied, but is not honoured, since we actually use ${arch-features}, which isn\u0027t updated anymore.",
      "parentUuid": "07e127d5_4a43d00c",
      "range": {
        "startLine": 167,
        "startChar": 0,
        "endLine": 171,
        "endChar": 35
      },
      "revId": "9174fd10b66f17fccd4622ebbe2f8b84c58b79c9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "398cdfd0_2f775142",
        "filename": "plat/arm/board/juno/platform.mk",
        "patchSetId": 7
      },
      "lineNbr": 171,
      "author": {
        "id": 1000105
      },
      "writtenOn": "2021-02-17T09:23:35Z",
      "side": 1,
      "message": "IMHO in that case the proper way of making this work is to add \"ARM_ARCH_FEATURE\u003dcrc\" in Juno CI configuration (see tf_config/qemu_sbsa-stack-protector-rndcanary as example with \"rng\") and update documentation for Juno build instructions.",
      "parentUuid": "116d98e5_cfc1f0a6",
      "range": {
        "startLine": 167,
        "startChar": 0,
        "endLine": 171,
        "endChar": 35
      },
      "revId": "9174fd10b66f17fccd4622ebbe2f8b84c58b79c9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "19ca4075_0aecd293",
        "filename": "plat/arm/board/juno/platform.mk",
        "patchSetId": 7
      },
      "lineNbr": 171,
      "author": {
        "id": 1000118
      },
      "writtenOn": "2021-02-17T13:01:49Z",
      "side": 1,
      "message": "Mmmh, really? Since CRC instructions are now a prerequisite for a Juno build, this should be modeled in the build system.\nIf we want to use ARM_ARCH_FEATURE, then it should become possible to define this in a platform Makefile. I wonder if we get this for free with the build system makeover?",
      "parentUuid": "398cdfd0_2f775142",
      "range": {
        "startLine": 167,
        "startChar": 0,
        "endLine": 171,
        "endChar": 35
      },
      "revId": "9174fd10b66f17fccd4622ebbe2f8b84c58b79c9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1334d625_9cbaa51b",
        "filename": "plat/arm/board/juno/platform.mk",
        "patchSetId": 7
      },
      "lineNbr": 171,
      "author": {
        "id": 1000105
      },
      "writtenOn": "2021-02-22T16:25:56Z",
      "side": 1,
      "message": "Please explain what you mean by \"build system makeover\".",
      "parentUuid": "19ca4075_0aecd293",
      "range": {
        "startLine": 167,
        "startChar": 0,
        "endLine": 171,
        "endChar": 35
      },
      "revId": "9174fd10b66f17fccd4622ebbe2f8b84c58b79c9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "374253f9_0d0edb3b",
        "filename": "plat/arm/board/juno/platform.mk",
        "patchSetId": 7
      },
      "lineNbr": 171,
      "author": {
        "id": 1000049
      },
      "writtenOn": "2021-02-22T17:26:11Z",
      "side": 1,
      "message": "I think Andre is refering to the Cmake work which is still in progress by ChrisK.",
      "parentUuid": "1334d625_9cbaa51b",
      "range": {
        "startLine": 167,
        "startChar": 0,
        "endLine": 171,
        "endChar": 35
      },
      "revId": "9174fd10b66f17fccd4622ebbe2f8b84c58b79c9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1bce8ff0_a978bfdc",
        "filename": "plat/arm/board/juno/platform.mk",
        "patchSetId": 7
      },
      "lineNbr": 171,
      "author": {
        "id": 1000105
      },
      "writtenOn": "2021-02-23T09:43:47Z",
      "side": 1,
      "message": "Which build options will be used if ARM_ARCH_MINOR\u003dn (n!\u003d0) and ARM_ARCH_FEAT\u003dx are passed from build command or are set in CI configuration?",
      "parentUuid": "1334d625_9cbaa51b",
      "range": {
        "startLine": 167,
        "startChar": 0,
        "endLine": 171,
        "endChar": 35
      },
      "revId": "9174fd10b66f17fccd4622ebbe2f8b84c58b79c9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}