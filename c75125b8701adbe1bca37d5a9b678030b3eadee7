{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "9cd1c399_cb77fb82",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 34
      },
      "lineNbr": 0,
      "author": {
        "id": 1000660
      },
      "writtenOn": "2023-06-27T21:34:00Z",
      "side": 1,
      "message": "https://ci.trustedfirmware.org/job/tf-a-gerrit-tforg-l2/1089/\n\nOnly Static checks have failed due to the addition of new files (aarch32/pmuv3.c, aarch64/pmuv3.c)\nwhich is included for Coverity by default. No explicit build configs are needed here.\nHence Manually providing Verified +1.",
      "revId": "c75125b8701adbe1bca37d5a9b678030b3eadee7",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f02810d8_98cb114e",
        "filename": "lib/el3_runtime/aarch32/context_mgmt.c",
        "patchSetId": 34
      },
      "lineNbr": 153,
      "author": {
        "id": 1000744
      },
      "writtenOn": "2023-06-27T15:59:25Z",
      "side": 1,
      "message": "Am I missing something here? Shouldn\u0027t we be enabling the PMU on entry into NS?",
      "range": {
        "startLine": 152,
        "startChar": 0,
        "endLine": 153,
        "endChar": 19
      },
      "revId": "c75125b8701adbe1bca37d5a9b678030b3eadee7",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9ee1955e_a7fc275e",
        "filename": "lib/el3_runtime/aarch32/context_mgmt.c",
        "patchSetId": 34
      },
      "lineNbr": 153,
      "author": {
        "id": 1000883
      },
      "writtenOn": "2023-06-27T16:05:59Z",
      "side": 1,
      "message": "And that\u0027s why I wanted to keep it enable... Anyway, this is the initialization, mostly for EL3, the PMU will in fact still be enabled for NS (there\u0027s no way to disable it), it might be more when you look at what the function actually does",
      "parentUuid": "f02810d8_98cb114e",
      "range": {
        "startLine": 152,
        "startChar": 0,
        "endLine": 153,
        "endChar": 19
      },
      "revId": "c75125b8701adbe1bca37d5a9b678030b3eadee7",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5880e2c8_f4f23730",
        "filename": "lib/el3_runtime/aarch32/context_mgmt.c",
        "patchSetId": 34
      },
      "lineNbr": 153,
      "author": {
        "id": 1000744
      },
      "writtenOn": "2023-06-28T11:00:14Z",
      "side": 1,
      "message": "Hmm I see. What is preventing us from calling this during the actual initialization of EL3? Without any context its not easy to parse out why we\u0027re configuring the PMU for EL3 in the exit path for the non-secure world.",
      "parentUuid": "9ee1955e_a7fc275e",
      "range": {
        "startLine": 152,
        "startChar": 0,
        "endLine": 153,
        "endChar": 19
      },
      "revId": "c75125b8701adbe1bca37d5a9b678030b3eadee7",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4c450d24_7870929c",
        "filename": "lib/el3_runtime/aarch32/context_mgmt.c",
        "patchSetId": 34
      },
      "lineNbr": 153,
      "author": {
        "id": 1000883
      },
      "writtenOn": "2023-06-28T12:22:25Z",
      "side": 1,
      "message": "I\u0027m so glad you asked this. You\u0027ll notice that this is exactly what I make aarch64 do. \n\nAll features are configured for EL3 at NS el3_exit, not just the pmu. This is because they require a few bits of information to do at once and it\u0027s only available here. It was simpler to do at the time I suppose.\n\nThe reason I don\u0027t do it properly for aarch32 is because of pushback from Soby to change it as little as possible.",
      "parentUuid": "5880e2c8_f4f23730",
      "range": {
        "startLine": 152,
        "startChar": 0,
        "endLine": 153,
        "endChar": 19
      },
      "revId": "c75125b8701adbe1bca37d5a9b678030b3eadee7",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "584282be_36a3f8d2",
        "filename": "lib/el3_runtime/aarch32/context_mgmt.c",
        "patchSetId": 34
      },
      "lineNbr": 153,
      "author": {
        "id": 1000744
      },
      "writtenOn": "2023-06-28T13:57:14Z",
      "side": 1,
      "message": "Right - do we have plans to change this down the road? It feels like we\u0027re trading clarity, for functional correctness here. My concern here is how this might be interpreted by others without the necessary context. If we can\u0027t avoid doing this, I think it merits having a comment explaining why we disable the PMU here.",
      "parentUuid": "4c450d24_7870929c",
      "range": {
        "startLine": 152,
        "startChar": 0,
        "endLine": 153,
        "endChar": 19
      },
      "revId": "c75125b8701adbe1bca37d5a9b678030b3eadee7",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b6969b66_edf4a43a",
        "filename": "lib/el3_runtime/aarch32/context_mgmt.c",
        "patchSetId": 34
      },
      "lineNbr": 153,
      "author": {
        "id": 1000883
      },
      "writtenOn": "2023-06-28T14:05:45Z",
      "side": 1,
      "message": "there are no plans to change aarch32. This is very deliberate and I doubt it will be allowed. So far it has worked (I can attest to that, it\u0027s quite beautiful actually) assuming noone wants to change anything, which we don\u0027t for aarch32.\n\nI could extend the comment to say something like \"we disable the pmu at EL3/secure execution for security, but this doesn\u0027t impact loewr ELs\"?",
      "parentUuid": "584282be_36a3f8d2",
      "range": {
        "startLine": 152,
        "startChar": 0,
        "endLine": 153,
        "endChar": 19
      },
      "revId": "c75125b8701adbe1bca37d5a9b678030b3eadee7",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "181e79fd_1878a100",
        "filename": "lib/el3_runtime/aarch32/context_mgmt.c",
        "patchSetId": 34
      },
      "lineNbr": 153,
      "author": {
        "id": 1000744
      },
      "writtenOn": "2023-06-28T14:38:45Z",
      "side": 1,
      "message": "That would be sufficient for me :)",
      "parentUuid": "b6969b66_edf4a43a",
      "range": {
        "startLine": 152,
        "startChar": 0,
        "endLine": 153,
        "endChar": 19
      },
      "revId": "c75125b8701adbe1bca37d5a9b678030b3eadee7",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8a365b16_d2380e3c",
        "filename": "lib/el3_runtime/aarch32/context_mgmt.c",
        "patchSetId": 34
      },
      "lineNbr": 153,
      "author": {
        "id": 1000883
      },
      "writtenOn": "2023-06-28T14:54:11Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "181e79fd_1878a100",
      "range": {
        "startLine": 152,
        "startChar": 0,
        "endLine": 153,
        "endChar": 19
      },
      "revId": "c75125b8701adbe1bca37d5a9b678030b3eadee7",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}