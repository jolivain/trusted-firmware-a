{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "4257c1a2_89bfbd0f",
        "filename": "drivers/fwu/fwu.c",
        "patchSetId": 15
      },
      "lineNbr": 88,
      "author": {
        "id": 1000098
      },
      "writtenOn": "2021-07-22T23:08:29Z",
      "side": 1,
      "message": "I am curious why the WARN macro was used here instead of ERROR().",
      "range": {
        "startLine": 88,
        "startChar": 2,
        "endLine": 88,
        "endChar": 6
      },
      "revId": "4b2c81d87fd55cb2b9ebe7c5d469c853b573aab1",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9ccb7f77_7cdf26b1",
        "filename": "drivers/fwu/fwu.c",
        "patchSetId": 15
      },
      "lineNbr": 88,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2021-07-23T08:21:42Z",
      "side": 1,
      "message": "\u0027fwu_metdata_load\u0027 gets called twice (if FWU_METADATA_IMAGE_ID load failed), so I thought it is better to put a warning message in this function, and if both metadata (FWU_METADATA_IMAGE_ID and BKUP_FWU_METADATA_IMAGE_ID) fail to load, then throw the error message (see at line no.178).",
      "parentUuid": "4257c1a2_89bfbd0f",
      "range": {
        "startLine": 88,
        "startChar": 2,
        "endLine": 88,
        "endChar": 6
      },
      "revId": "4b2c81d87fd55cb2b9ebe7c5d469c853b573aab1",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "238491f2_abaa1bfb",
        "filename": "drivers/fwu/fwu.c",
        "patchSetId": 15
      },
      "lineNbr": 88,
      "author": {
        "id": 1000098
      },
      "writtenOn": "2021-07-23T14:31:08Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "9ccb7f77_7cdf26b1",
      "range": {
        "startLine": 88,
        "startChar": 2,
        "endLine": 88,
        "endChar": 6
      },
      "revId": "4b2c81d87fd55cb2b9ebe7c5d469c853b573aab1",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2ab3c0fa_a8eab05d",
        "filename": "drivers/fwu/fwu.c",
        "patchSetId": 15
      },
      "lineNbr": 113,
      "author": {
        "id": 1000098
      },
      "writtenOn": "2021-07-26T23:21:51Z",
      "side": 1,
      "message": "I feel there is a redundant check for result. Would it be simpler to do it this way? I dont have any objection.\n\nif ((result !\u003d 0) {\n        WARN(\"Failed to read image id\u003d%u (%i)\\n\", image_id, result);\n        goto exit;\n}\n\nif(sizeof(struct fwu_metadata) !\u003d bytes_read) {\n       /* return -1 in case of partial/no read */\n        WARN(\"Read bytes (%zu) instead of expected (%zu) bytes\\n\", \n             bytes_read, sizeof(struct fwu_metadata));\n        goto exit;\n}",
      "range": {
        "startLine": 102,
        "startChar": 0,
        "endLine": 113,
        "endChar": 2
      },
      "revId": "4b2c81d87fd55cb2b9ebe7c5d469c853b573aab1",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b6ac5c82_1c178d86",
        "filename": "drivers/fwu/fwu.c",
        "patchSetId": 15
      },
      "lineNbr": 113,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2021-07-27T10:46:37Z",
      "side": 1,
      "message": "Agree. Let me update the code accordingly.\nI think logic you mentioned does not improve the performance though as in normal scenario (success case), this logic also ask for both checks \u0027result !\u003d 0\u0027 and \u0027sizeof(struct fwu_metadata) !\u003d bytes_read\u0027, but in failure case it avoid redundant \u0027result\u0027 check.",
      "parentUuid": "2ab3c0fa_a8eab05d",
      "range": {
        "startLine": 102,
        "startChar": 0,
        "endLine": 113,
        "endChar": 2
      },
      "revId": "4b2c81d87fd55cb2b9ebe7c5d469c853b573aab1",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0ef4ca3e_9e516b73",
        "filename": "drivers/fwu/fwu.c",
        "patchSetId": 15
      },
      "lineNbr": 118,
      "author": {
        "id": 1000098
      },
      "writtenOn": "2021-07-26T23:21:51Z",
      "side": 1,
      "message": "nitpick:\nI am curious why was string qualifier used again? I am guessing there might be some reason that I am not aware of.\n\nWARN(\"Sanity check failed on FWU metadata\\n\");",
      "revId": "4b2c81d87fd55cb2b9ebe7c5d469c853b573aab1",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a9db4896_4b8814be",
        "filename": "drivers/fwu/fwu.c",
        "patchSetId": 15
      },
      "lineNbr": 118,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2021-07-27T10:46:37Z",
      "side": 1,
      "message": "This is a trick to have single \u0027check failed on FWU metadata\u0027 string (const char *) defined.",
      "parentUuid": "0ef4ca3e_9e516b73",
      "revId": "4b2c81d87fd55cb2b9ebe7c5d469c853b573aab1",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2d03aed2_7a816310",
        "filename": "drivers/fwu/fwu.c",
        "patchSetId": 15
      },
      "lineNbr": 161,
      "author": {
        "id": 1000102
      },
      "writtenOn": "2021-07-26T11:55:44Z",
      "side": 1,
      "message": "nit: selection of the word, lying means its there(unintentionally) and nobody cares about it, may be you can use kept/stored",
      "range": {
        "startLine": 161,
        "startChar": 52,
        "endLine": 161,
        "endChar": 57
      },
      "revId": "4b2c81d87fd55cb2b9ebe7c5d469c853b573aab1",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5c7192c7_1953fb52",
        "filename": "drivers/fwu/fwu.c",
        "patchSetId": 15
      },
      "lineNbr": 161,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2021-07-26T11:59:28Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "2d03aed2_7a816310",
      "range": {
        "startLine": 161,
        "startChar": 52,
        "endLine": 161,
        "endChar": 57
      },
      "revId": "4b2c81d87fd55cb2b9ebe7c5d469c853b573aab1",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fd615136_2444e02c",
        "filename": "drivers/fwu/fwu.mk",
        "patchSetId": 15
      },
      "lineNbr": 7,
      "author": {
        "id": 1000098
      },
      "writtenOn": "2021-07-26T23:21:51Z",
      "side": 1,
      "message": "I am curious why we need to declare this explicitly. Do we expect another set of firmware update drivers in the future for TF-A? Is it just for readability?\n\nBL2_SOURCES        +\u003d driver/fwu/fwu.c",
      "revId": "4b2c81d87fd55cb2b9ebe7c5d469c853b573aab1",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ec4b96ca_24471218",
        "filename": "drivers/fwu/fwu.mk",
        "patchSetId": 15
      },
      "lineNbr": 7,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2021-07-27T10:46:37Z",
      "side": 1,
      "message": "Yes, this is only done for the readability purpose. I don\u0027t think there will be any another set for firmware update in near future. PSA FWU specification may get updated in future, but those changes will be part of this driver directory only.\n\nHaving said that I don\u0027t see any issue in putting source path explicitly as you mentioned. Please let me know what do you think.",
      "parentUuid": "fd615136_2444e02c",
      "revId": "4b2c81d87fd55cb2b9ebe7c5d469c853b573aab1",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bfc5a085_1847704d",
        "filename": "drivers/fwu/fwu.mk",
        "patchSetId": 15
      },
      "lineNbr": 7,
      "author": {
        "id": 1000098
      },
      "writtenOn": "2021-07-27T13:16:01Z",
      "side": 1,
      "message": "I dont have a strong opinion. You can leave it the way it is.",
      "parentUuid": "ec4b96ca_24471218",
      "revId": "4b2c81d87fd55cb2b9ebe7c5d469c853b573aab1",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}