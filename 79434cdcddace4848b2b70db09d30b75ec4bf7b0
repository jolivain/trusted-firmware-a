{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "1f675599_220e15a1",
        "filename": "include/arch/aarch64/arch.h",
        "patchSetId": 3
      },
      "lineNbr": 265,
      "author": {
        "id": 1000660
      },
      "writtenOn": "2022-07-06T14:42:15Z",
      "side": 1,
      "message": "nit : Its S3_0_C0_C6_2",
      "revId": "79434cdcddace4848b2b70db09d30b75ec4bf7b0",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0c5703b9_7287eb29",
        "filename": "include/arch/aarch64/arch.h",
        "patchSetId": 3
      },
      "lineNbr": 265,
      "author": {
        "id": 1000750
      },
      "writtenOn": "2022-07-06T16:05:20Z",
      "side": 1,
      "message": "Thanks, I\u0027ll take care of this.",
      "parentUuid": "1f675599_220e15a1",
      "revId": "79434cdcddace4848b2b70db09d30b75ec4bf7b0",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a786d373_2043fa7f",
        "filename": "include/arch/aarch64/arch_features.h",
        "patchSetId": 3
      },
      "lineNbr": 115,
      "author": {
        "id": 1000660
      },
      "writtenOn": "2022-07-06T14:42:15Z",
      "side": 1,
      "message": "As per the Arm ARM, FEAT_PACQARMA3 is added to the v8.3 extension while V8.8 got released. So isn\u0027t this still a v8.3 extension? \n\nSo IMO its should be is_armv8_3_pauth_qarma3_present().\nLet me know your thoughts.",
      "revId": "79434cdcddace4848b2b70db09d30b75ec4bf7b0",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "415c500e_b173f533",
        "filename": "include/arch/aarch64/arch_features.h",
        "patchSetId": 3
      },
      "lineNbr": 115,
      "author": {
        "id": 1000750
      },
      "writtenOn": "2022-07-06T16:05:20Z",
      "side": 1,
      "message": "Yeah. It\u0027s not very clear in the ARM-ARM, to be honest. I went through it and, although what you say sounds OK, saying that it is part of v8.8 doesn\u0027t sound any crazy either. See pages A2-99 and A2-118 in ARM-ARM DDI 0487H.a for reference.",
      "parentUuid": "a786d373_2043fa7f",
      "revId": "79434cdcddace4848b2b70db09d30b75ec4bf7b0",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ed3c6e4b_1396d3b0",
        "filename": "include/arch/aarch64/arch_features.h",
        "patchSetId": 3
      },
      "lineNbr": 115,
      "author": {
        "id": 1000660
      },
      "writtenOn": "2022-07-06T17:12:00Z",
      "side": 1,
      "message": "Just explaining my thoughts behind it: \n\nFor example, as part of feature detection mechanism, we enable features based on arch_version to verify their presence. So we will definitely use this function if in case we want to detect FEAT_PACQARMA,in future. \n\nAssume we are building TF-A for arch MAJOR\u003d8 and MINOR\u003d3, so in this case all the features till v8.3 get enabled and will be detected in feature detection mechanism. If in case we keep 8_8 naming, it will be confusing at later part. So keeping it as 8_3 will be safe and eliminates this confusion in my understanding.",
      "parentUuid": "415c500e_b173f533",
      "revId": "79434cdcddace4848b2b70db09d30b75ec4bf7b0",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a9fb25a2_75ae0b1f",
        "filename": "include/arch/aarch64/arch_features.h",
        "patchSetId": 3
      },
      "lineNbr": 115,
      "author": {
        "id": 1000099
      },
      "writtenOn": "2022-07-08T18:59:48Z",
      "side": 1,
      "message": "+1",
      "parentUuid": "ed3c6e4b_1396d3b0",
      "revId": "79434cdcddace4848b2b70db09d30b75ec4bf7b0",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "36ee76ff_01bd2fb5",
        "filename": "include/arch/aarch64/arch_features.h",
        "patchSetId": 3
      },
      "lineNbr": 122,
      "author": {
        "id": 1000099
      },
      "writtenOn": "2022-07-08T18:59:48Z",
      "side": 1,
      "message": "This return value might need to be more specific as there are specific permitted values for both PA3 and GPA3 and have the potential to be extended in future. So, \"!\u003d0U\" might encounter some reserved values which may not be supported for the given arch extension.\n\nAlso, I see the potential for some asserts based on the arch extensions.\n\"\nPA3, bits [15:12] \nWhen this field is non-zero, FEAT_PACQARMA3 is implemented.\nIn Armv8.3, the permitted values are 0b0000, 0b0001, 0b0010, 0b0011, 0b0100, and 0b0101.\nFrom Armv8.6, the permitted values are 0b0011, 0b0100, and 0b0101.\nIf the value of ID_AA64ISAR1_EL1.API is non-zero, or the value of ID_AA64ISAR1_EL1.APA \nis non-zero, this field must have the value 0b0000\n\nGPA3, bits [11:8] \nFEAT_PACQARMA3 implements the functionality identified by 0b0001.\nFrom Armv8.3, the permitted values are 0b0000 and 0b0001.\n\"",
      "range": {
        "startLine": 117,
        "startChar": 1,
        "endLine": 122,
        "endChar": 62
      },
      "revId": "79434cdcddace4848b2b70db09d30b75ec4bf7b0",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3fe3d1e6_f5443dd4",
        "filename": "include/arch/aarch64/arch_features.h",
        "patchSetId": 3
      },
      "lineNbr": 122,
      "author": {
        "id": 1000750
      },
      "writtenOn": "2022-07-08T22:26:11Z",
      "side": 1,
      "message": "Hmmmm... Maybe. But, according to the ARM ARM, the value 0 on these fields indicate that the algorithm is not present, and therefore it can be used (along with the fields in ID_AA64ISAR1_EL1) to determine whether PAuth is present or not too. So we know that QARMA3 is not present if the value is 0. Otherwise, we have QARMA3 in different flavors.\nMaybe what we can do is to make it not boolean. I can rename the function then, so it says check_armv8_3_pauth_qarma3_presence() (or similar) instead of is_armv8_8_pauth_qarma3_present(), as it wouldn\u0027t return a boolean value anymore.",
      "parentUuid": "36ee76ff_01bd2fb5",
      "range": {
        "startLine": 117,
        "startChar": 1,
        "endLine": 122,
        "endChar": 62
      },
      "revId": "79434cdcddace4848b2b70db09d30b75ec4bf7b0",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}