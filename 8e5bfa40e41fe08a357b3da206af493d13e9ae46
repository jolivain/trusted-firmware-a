{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "5f82cb95_385069a1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000655
      },
      "writtenOn": "2022-11-24T08:57:26Z",
      "side": 1,
      "message": "LGTM",
      "revId": "8e5bfa40e41fe08a357b3da206af493d13e9ae46",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3cd28b65_402c4936",
        "filename": "plat/qemu/common/qemu_bl2_setup.c",
        "patchSetId": 2
      },
      "lineNbr": 2,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-12-07T19:35:36Z",
      "side": 1,
      "message": "nit: 2022",
      "range": {
        "startLine": 2,
        "startChar": 22,
        "endLine": 2,
        "endChar": 26
      },
      "revId": "8e5bfa40e41fe08a357b3da206af493d13e9ae46",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b70a2f32_c7c9552a",
        "filename": "plat/qemu/common/qemu_bl2_setup.c",
        "patchSetId": 2
      },
      "lineNbr": 2,
      "author": {
        "id": 1000120
      },
      "writtenOn": "2022-12-08T14:37:37Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "3cd28b65_402c4936",
      "range": {
        "startLine": 2,
        "startChar": 22,
        "endLine": 2,
        "endChar": 26
      },
      "revId": "8e5bfa40e41fe08a357b3da206af493d13e9ae46",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1f356779_d761c53c",
        "filename": "plat/qemu/common/qemu_bl2_setup.c",
        "patchSetId": 2
      },
      "lineNbr": 174,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2022-12-08T10:28:38Z",
      "side": 1,
      "message": "Just for my understanding, can you please explain the difference between SPMC_OPTEE and SPD_opteed macros? IIUC -\n\nSPMC_OPTEE -\u003e  payload dispatcher is SPMD and OPTEE is running at S-EL1\nSPD_opteed -\u003e payload dispatcher is OPTEED and OPTEE is running at S-EL1\n\nIf yes, then what is the difference between these two OPTEE images? Sorry, if it is documented somewhere please point me out.",
      "range": {
        "startLine": 174,
        "startChar": 12,
        "endLine": 174,
        "endChar": 22
      },
      "revId": "8e5bfa40e41fe08a357b3da206af493d13e9ae46",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "611bff42_968b54ed",
        "filename": "plat/qemu/common/qemu_bl2_setup.c",
        "patchSetId": 2
      },
      "lineNbr": 174,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-12-08T13:17:56Z",
      "side": 1,
      "message": "Former is using FF-A as transport. Latter is using legacy OP-TEE SMCs/GP client API as I understand it but Jens surely knows better.\n\nOn SPMC/FF-A there is some information here https://optee.readthedocs.io/en/latest/architecture/spmc.html#spmc-config-options\n\nI wonder if SPMC_OPTEE could be equivalent to (defined(SPD_spmd) \u0026\u0026 (SPMD_SPM_AT_SEL2 \u003d\u003d 0)) ?",
      "parentUuid": "1f356779_d761c53c",
      "range": {
        "startLine": 174,
        "startChar": 12,
        "endLine": 174,
        "endChar": 22
      },
      "revId": "8e5bfa40e41fe08a357b3da206af493d13e9ae46",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a4ed9eed_7bededba",
        "filename": "plat/qemu/common/qemu_bl2_setup.c",
        "patchSetId": 2
      },
      "lineNbr": 174,
      "author": {
        "id": 1000120
      },
      "writtenOn": "2022-12-08T14:15:43Z",
      "side": 1,
      "message": "defined(SPD_spmd) \u0026\u0026 (SPMD_SPM_AT_SEL2 \u003d\u003d 0) says that there\u0027s _an_ SPMC at S-EL1, SPMC_OPTEE says that furthermore it\u0027s OP-TEE.\n\nThis is needed to be able to load OP-TEE in more or less the same way when there\u0027s no S-EL2.",
      "parentUuid": "611bff42_968b54ed",
      "range": {
        "startLine": 174,
        "startChar": 12,
        "endLine": 174,
        "endChar": 22
      },
      "revId": "8e5bfa40e41fe08a357b3da206af493d13e9ae46",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e55bd637_901ab708",
        "filename": "plat/qemu/common/qemu_bl2_setup.c",
        "patchSetId": 2
      },
      "lineNbr": 174,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2022-12-08T21:06:18Z",
      "side": 1,
      "message": "Thanks to both of you! It might be helpful to have these build options documented somewhere in the TF-A documentation. May be in the build-options file [1]?\n\n[1]: https://git.trustedfirmware.org/TF-A/trusted-firmware-a.git/tree/docs/getting_started/build-options.rst#n801",
      "parentUuid": "a4ed9eed_7bededba",
      "range": {
        "startLine": 174,
        "startChar": 12,
        "endLine": 174,
        "endChar": 22
      },
      "revId": "8e5bfa40e41fe08a357b3da206af493d13e9ae46",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "350641a9_587b7600",
        "filename": "plat/qemu/common/qemu_bl2_setup.c",
        "patchSetId": 2
      },
      "lineNbr": 174,
      "author": {
        "id": 1000120
      },
      "writtenOn": "2022-12-14T16:13:50Z",
      "side": 1,
      "message": "Makes sense. Added a new commit \"docs(build): describes the SPMC_OPTEE build option\" in this topic branch.",
      "parentUuid": "e55bd637_901ab708",
      "range": {
        "startLine": 174,
        "startChar": 12,
        "endLine": 174,
        "endChar": 22
      },
      "revId": "8e5bfa40e41fe08a357b3da206af493d13e9ae46",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fada8cb0_187e85e5",
        "filename": "plat/qemu/common/qemu_bl2_setup.c",
        "patchSetId": 2
      },
      "lineNbr": 183,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2022-12-08T10:28:38Z",
      "side": 1,
      "message": "Not related to this change but want to check my understanding system DTB consumption.\nIs this secure/non-secure address? I think it is consumed by both BL32 and BL33 that doesn\u0027t seems to be correct. \nIf it is Non-Secure address - It is possible to be consumed by the BL32 and BL33, but it can be attacked by NS agent.\nIf it is Secure address - It is not possible to consume it by BL33.\n\nDo we need two copies System DTB then (secure and non-secure)?",
      "range": {
        "startLine": 183,
        "startChar": 37,
        "endLine": 183,
        "endChar": 59
      },
      "revId": "8e5bfa40e41fe08a357b3da206af493d13e9ae46",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "aca9fd5b_023048b2",
        "filename": "plat/qemu/common/qemu_bl2_setup.c",
        "patchSetId": 2
      },
      "lineNbr": 183,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-12-08T13:17:56Z",
      "side": 1,
      "message": "As I understand it, OP-TEE amends the device tree with the reserved / secure carve out region that NS components (bootloader/linux) aren\u0027t meant to touch. So from the initial dtb loaded by TF-A, OP-TEE/BL32 updates it early at boot, and the same device tree is passed later to BL33.\n\nThe two dtb copies concept exists in FVP but doens\u0027t exist in qemu, they would have to be made consistent (copy secure version to ns version) after OP-TEE has updated the blob, and before being passed to BL33.",
      "parentUuid": "fada8cb0_187e85e5",
      "range": {
        "startLine": 183,
        "startChar": 37,
        "endLine": 183,
        "endChar": 59
      },
      "revId": "8e5bfa40e41fe08a357b3da206af493d13e9ae46",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d4ff33f2_322d329d",
        "filename": "plat/qemu/common/qemu_bl2_setup.c",
        "patchSetId": 2
      },
      "lineNbr": 183,
      "author": {
        "id": 1000120
      },
      "writtenOn": "2022-12-08T14:15:43Z",
      "side": 1,
      "message": "Yes, it\u0027s non-secure. I can\u0027t recall why we need to explicitly carve out some memory, it shouldn\u0027t be needed on platforms where the DTB isn\u0027t generated by the model at least. But, there\u0027s also the \"secure-chosen\" node where OP-TEE finds the \"kaslr-seed\" needed for ASLR.",
      "parentUuid": "aca9fd5b_023048b2",
      "range": {
        "startLine": 183,
        "startChar": 37,
        "endLine": 183,
        "endChar": 59
      },
      "revId": "8e5bfa40e41fe08a357b3da206af493d13e9ae46",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e7829d8e_b34a5edc",
        "filename": "plat/qemu/common/qemu_bl2_setup.c",
        "patchSetId": 2
      },
      "lineNbr": 183,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2022-12-08T21:06:18Z",
      "side": 1,
      "message": "Understood! that clears my confusion. Thanks!",
      "parentUuid": "d4ff33f2_322d329d",
      "range": {
        "startLine": 183,
        "startChar": 37,
        "endLine": 183,
        "endChar": 59
      },
      "revId": "8e5bfa40e41fe08a357b3da206af493d13e9ae46",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}