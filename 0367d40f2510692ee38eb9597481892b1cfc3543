{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "1ccfbef6_f03db7c7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000162
      },
      "writtenOn": "2022-04-13T13:20:19Z",
      "side": 1,
      "message": "Ping. @Joanna can we please start the review for this patch?",
      "revId": "0367d40f2510692ee38eb9597481892b1cfc3543",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "44dc3c89_60e6f651",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000049
      },
      "writtenOn": "2022-05-13T12:44:10Z",
      "side": 1,
      "message": "Last call for v2.7. We freeze the tree next week.",
      "revId": "0367d40f2510692ee38eb9597481892b1cfc3543",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5b637aaf_53a41cf7",
        "filename": "services/std_svc/std_svc_setup.c",
        "patchSetId": 2
      },
      "lineNbr": 61,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-04-13T13:35:10Z",
      "side": 1,
      "message": "Isn\u0027t it a fatal condition if a platform doesn\u0027t init. SPMD and SPMC properly?\nWouldn\u0027t the platform security be potentially compromised but still allowing to boot?",
      "revId": "0367d40f2510692ee38eb9597481892b1cfc3543",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "879e4746_d06db9a4",
        "filename": "services/std_svc/std_svc_setup.c",
        "patchSetId": 2
      },
      "lineNbr": 61,
      "author": {
        "id": 1000162
      },
      "writtenOn": "2022-04-13T13:39:48Z",
      "side": 1,
      "message": "I dont think platform security might be compromised. As an example, if SPMC manifest is not found, the init process returns failure. But the platform is still usable for other use cases. So there is no reason to abort the std_svc init phase.",
      "parentUuid": "5b637aaf_53a41cf7",
      "revId": "0367d40f2510692ee38eb9597481892b1cfc3543",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3b3badd5_d5408008",
        "filename": "services/std_svc/std_svc_setup.c",
        "patchSetId": 2
      },
      "lineNbr": 61,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-04-13T14:00:48Z",
      "side": 1,
      "message": "\u003e if SPMC manifest is not found\nThis already sounds a fatal condition, doesn\u0027t it?\nIf a platform implements SPMD and SPMC, then there is no reason for this SPMC manifest to miss at boot time.\n\nUnless perhaps in the lab for debug or chipset BSP bring up. But that doesn\u0027t look a production use case?",
      "parentUuid": "879e4746_d06db9a4",
      "revId": "0367d40f2510692ee38eb9597481892b1cfc3543",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "519f29c1_4d9b44b3",
        "filename": "services/std_svc/std_svc_setup.c",
        "patchSetId": 2
      },
      "lineNbr": 61,
      "author": {
        "id": 1000162
      },
      "writtenOn": "2022-04-13T20:29:30Z",
      "side": 1,
      "message": "If it is a fatal condition, then we should panic. Instead the device boots up with a disabled PSCI implementation.\n\nBut aborting boot or running a partial std_svc does not cover all use cases either.\n\nAs you rightly pointed out, chip bringup, platform bringup (valid use cases) dont work well with the current implementation.\n\nSo, this patch does not regress the current behavior. But allows for graceful error recovery even for production devices.",
      "parentUuid": "3b3badd5_d5408008",
      "revId": "0367d40f2510692ee38eb9597481892b1cfc3543",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5e035b26_32422df4",
        "filename": "services/std_svc/std_svc_setup.c",
        "patchSetId": 2
      },
      "lineNbr": 61,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-05-13T18:40:30Z",
      "side": 1,
      "message": "Hi Varun,\n\nThere are other reasons for spmd_setup to fail (beyond missing the SPMC manifest) including failure in loading BL32 image, or failure conditions from spmd_spmc_init.\n\nAFAIU if std_svc_setup returns 1, then runtime_svc_init displays an error but doesn\u0027t prevent to continue booting and initialize services in a safe manner:\nhttps://git.trustedfirmware.org/TF-A/trusted-firmware-a.git/tree/common/runtime_svc.c?h\u003dv2.6#n133\n\nI don\u0027t get why PSCI services would be improperly initialized (also provided psci init happens at line 49), but I may miss something (perhaps downstream changes?).\nIMO if we change the behavior for spmd_setup which follows a pattern used for all other services in this same function, then we should question the design of the whole function.",
      "parentUuid": "519f29c1_4d9b44b3",
      "revId": "0367d40f2510692ee38eb9597481892b1cfc3543",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "03b148bc_29e3258c",
        "filename": "services/std_svc/std_svc_setup.c",
        "patchSetId": 2
      },
      "lineNbr": 61,
      "author": {
        "id": 1000162
      },
      "writtenOn": "2022-05-25T22:07:16Z",
      "side": 1,
      "message": "When one of the sub-services fails, entire std_svc fails and does not service any SMC FIDs. So it is important that all sub-tests pass or handle failures internally without impacting others. When any sub-service fails, we see \"ERROR:   Error initializing runtime service std_svc\" and this in turn kills std_svc.\n\nI agree, the design needs an overhaul. The current one is a mess. This patch fixes one of the platforms where we would like to still use PSCI after SPMD setup fails.",
      "parentUuid": "5e035b26_32422df4",
      "revId": "0367d40f2510692ee38eb9597481892b1cfc3543",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}