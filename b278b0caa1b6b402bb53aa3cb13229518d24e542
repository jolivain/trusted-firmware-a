{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "f69be834_9b11a459",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000695
      },
      "writtenOn": "2021-09-30T23:45:26Z",
      "side": 1,
      "message": "Hi all,\n\nThis is the second CL in a series of patches that aim to improve the robustness and reusability of the UFS code. High level information about future patches can be found here: https://lists.trustedfirmware.org/pipermail/tf-a/2021-September/001332.html.\n\nCode review would be greatly appreciated!",
      "revId": "b278b0caa1b6b402bb53aa3cb13229518d24e542",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b30f4bf0_cf61c1f0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2021-10-04T08:06:31Z",
      "side": 1,
      "message": "Can you please fix the commit title per conventional commit rules?\n\nChange-Id: I9403a5a25d3ca50af5f2f9a65b774f6a2d7a9626\nâœ–   type must be one of [build, chore, ci, docs, feat, fix, perf, refactor, revert, style, test] [type-enum]",
      "revId": "b278b0caa1b6b402bb53aa3cb13229518d24e542",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5cbf8cac_327e9aaa",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000149
      },
      "writtenOn": "2021-10-04T17:03:55Z",
      "side": 1,
      "message": "I\u0027m very ignorant around the UFS and TF code, so apologies if I\u0027m off base (Haojian would hopefully have more context).\n\nBut abstractly this looks ok, though it would be good to get some testing on HiKey960 (or HiKey970?) as it has a long history UFS issues (depending on the UFS chip) when not using the proprietary bootloader.\n\nI\u0027m not sure I have a ton of cycles free to do a bootloader rebuild and testing (unfortunately the UFS issues we\u0027ve seen over time are rare, and there are 3 versions with different UFS chips, so testing will be fairly time consuming).\n\nBut assuming no other objections, maybe we can do a quick smoke test with this and let it be merged? I\u0027m not sure how much longer the HiKey960 will have lifetime wise, so we may get away without another bootloader update, and I don\u0027t want to block useful changes on its account.\n \n",
      "revId": "b278b0caa1b6b402bb53aa3cb13229518d24e542",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4d3beceb_c6250fb2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000695
      },
      "writtenOn": "2021-10-04T18:46:56Z",
      "side": 1,
      "message": "Done!",
      "parentUuid": "b30f4bf0_cf61c1f0",
      "revId": "b278b0caa1b6b402bb53aa3cb13229518d24e542",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b8783c15_e8086b3b",
        "filename": "drivers/ufs/ufs.c",
        "patchSetId": 1
      },
      "lineNbr": 816,
      "author": {
        "id": 1000149
      },
      "writtenOn": "2021-10-04T17:03:55Z",
      "side": 1,
      "message": "Is returning a failure here ok? So much of the rest of this function just asserts on failure, suggesting the caller isn\u0027t likely to expect a failure and handle it in a useful way.",
      "revId": "b278b0caa1b6b402bb53aa3cb13229518d24e542",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c2b654b9_c64d5398",
        "filename": "drivers/ufs/ufs.c",
        "patchSetId": 1
      },
      "lineNbr": 816,
      "author": {
        "id": 1000695
      },
      "writtenOn": "2021-10-04T18:46:56Z",
      "side": 1,
      "message": "I returned a failure here because in a future CL I want to remove all asserts in ufs_init and replace them with returned error values. Having said that, I agree that it would be better to keep a consistent pattern for now, so I changed this to an assert in patchset 2.",
      "parentUuid": "b8783c15_e8086b3b",
      "revId": "b278b0caa1b6b402bb53aa3cb13229518d24e542",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "25325b63_47f8a7a3",
        "filename": "drivers/ufs/ufs.c",
        "patchSetId": 1
      },
      "lineNbr": 832,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2021-10-04T07:03:47Z",
      "side": 1,
      "message": "May this be removed now result is consumed line 815 even in release builds?",
      "range": {
        "startLine": 832,
        "startChar": 1,
        "endLine": 832,
        "endChar": 14
      },
      "revId": "b278b0caa1b6b402bb53aa3cb13229518d24e542",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d08f28af_d0e1b973",
        "filename": "drivers/ufs/ufs.c",
        "patchSetId": 1
      },
      "lineNbr": 832,
      "author": {
        "id": 1000695
      },
      "writtenOn": "2021-10-04T18:46:56Z",
      "side": 1,
      "message": "I\u0027ll keep this for now since I replaced line 815 with an assert in patchset 2.",
      "parentUuid": "25325b63_47f8a7a3",
      "range": {
        "startLine": 832,
        "startChar": 1,
        "endLine": 832,
        "endChar": 14
      },
      "revId": "b278b0caa1b6b402bb53aa3cb13229518d24e542",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "90dcf3d8_a3eadffd",
        "filename": "include/drivers/ufs.h",
        "patchSetId": 1
      },
      "lineNbr": 262,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2021-10-04T07:03:47Z",
      "side": 1,
      "message": "Does this match any timing recommendation from the spec? If so, would it be possible to add a reference to the section?",
      "range": {
        "startLine": 260,
        "startChar": 0,
        "endLine": 262,
        "endChar": 32
      },
      "revId": "b278b0caa1b6b402bb53aa3cb13229518d24e542",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0567e0e2_5e74546c",
        "filename": "include/drivers/ufs.h",
        "patchSetId": 1
      },
      "lineNbr": 262,
      "author": {
        "id": 1000695
      },
      "writtenOn": "2021-10-04T18:46:56Z",
      "side": 1,
      "message": "This doesn\u0027t match any timing recommendations from the spec, but we verified these changes on our own board. Anand can provide more details about tests we conducted.",
      "parentUuid": "90dcf3d8_a3eadffd",
      "range": {
        "startLine": 260,
        "startChar": 0,
        "endLine": 262,
        "endChar": 32
      },
      "revId": "b278b0caa1b6b402bb53aa3cb13229518d24e542",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}