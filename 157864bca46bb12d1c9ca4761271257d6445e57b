{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "d6f241f0_4301a8cb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000695
      },
      "writtenOn": "2023-03-15T06:29:35Z",
      "side": 1,
      "message": "Madhukar, could you review this?",
      "revId": "157864bca46bb12d1c9ca4761271257d6445e57b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7f3a7b34_8d5f143e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000695
      },
      "writtenOn": "2023-03-15T06:29:58Z",
      "side": 1,
      "message": "Haojian, could you review this?",
      "revId": "157864bca46bb12d1c9ca4761271257d6445e57b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "506b6455_8a4b7be3",
        "filename": "drivers/ufs/ufs.c",
        "patchSetId": 1
      },
      "lineNbr": 54,
      "author": {
        "id": 1001001
      },
      "writtenOn": "2023-03-13T12:38:11Z",
      "side": 1,
      "message": "can we return immediately when an error condition is encountered, instead of assigning an error code to the result variable and continuing to execute the rest of the code as the result is not accumulated.",
      "revId": "157864bca46bb12d1c9ca4761271257d6445e57b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "63603547_498acbb5",
        "filename": "drivers/ufs/ufs.c",
        "patchSetId": 1
      },
      "lineNbr": 54,
      "author": {
        "id": 1000695
      },
      "writtenOn": "2023-03-15T06:29:10Z",
      "side": 1,
      "message": "Not really. If the condition that leads to line 61 is true we should return -EIO, not -EAGAIN.",
      "parentUuid": "506b6455_8a4b7be3",
      "revId": "157864bca46bb12d1c9ca4761271257d6445e57b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5a0dc6cb_e6a18a08",
        "filename": "drivers/ufs/ufs.c",
        "patchSetId": 1
      },
      "lineNbr": 54,
      "author": {
        "id": 1001001
      },
      "writtenOn": "2023-03-15T09:12:18Z",
      "side": 1,
      "message": "you are right. I missed line 61",
      "parentUuid": "63603547_498acbb5",
      "revId": "157864bca46bb12d1c9ca4761271257d6445e57b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "74d14df7_ea8fee4c",
        "filename": "drivers/ufs/ufs.c",
        "patchSetId": 1
      },
      "lineNbr": 148,
      "author": {
        "id": 1001001
      },
      "writtenOn": "2023-03-13T12:38:11Z",
      "side": 1,
      "message": "is it okay to wait for 1 millisecond when timeout_ms is 0?",
      "revId": "157864bca46bb12d1c9ca4761271257d6445e57b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d77d9798_f6c1feb3",
        "filename": "drivers/ufs/ufs.c",
        "patchSetId": 1
      },
      "lineNbr": 148,
      "author": {
        "id": 1000695
      },
      "writtenOn": "2023-03-15T06:29:10Z",
      "side": 1,
      "message": "Yes it is okay. The function will simply return -ETIMEDOUT.",
      "parentUuid": "74d14df7_ea8fee4c",
      "revId": "157864bca46bb12d1c9ca4761271257d6445e57b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "79df8134_34fded4f",
        "filename": "drivers/ufs/ufs.c",
        "patchSetId": 1
      },
      "lineNbr": 148,
      "author": {
        "id": 1001001
      },
      "writtenOn": "2023-03-15T09:12:18Z",
      "side": 1,
      "message": "If timeout_ms is 0, there should be no need to wait for 1 millisecond, as you confirm waiting extra millisecond has no impact I am fine.",
      "parentUuid": "d77d9798_f6c1feb3",
      "revId": "157864bca46bb12d1c9ca4761271257d6445e57b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "de658df5_6420ed97",
        "filename": "drivers/ufs/ufs.c",
        "patchSetId": 1
      },
      "lineNbr": 157,
      "author": {
        "id": 1001001
      },
      "writtenOn": "2023-03-13T12:38:11Z",
      "side": 1,
      "message": "can we do `return result` after initializing result with 0",
      "revId": "157864bca46bb12d1c9ca4761271257d6445e57b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "383b4066_0d2c77c8",
        "filename": "drivers/ufs/ufs.c",
        "patchSetId": 1
      },
      "lineNbr": 157,
      "author": {
        "id": 1000695
      },
      "writtenOn": "2023-03-15T06:29:10Z",
      "side": 1,
      "message": "Is there a reason you prefer doing `return result` over `return 0`? Semantically they are the same.",
      "parentUuid": "de658df5_6420ed97",
      "revId": "157864bca46bb12d1c9ca4761271257d6445e57b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "88877322_2fdb92b1",
        "filename": "drivers/ufs/ufs.c",
        "patchSetId": 1
      },
      "lineNbr": 157,
      "author": {
        "id": 1001001
      },
      "writtenOn": "2023-03-15T09:12:18Z",
      "side": 1,
      "message": "Yes, they are the same semantically. To keep the style uniform with `ufs_uic_error_handler`",
      "parentUuid": "383b4066_0d2c77c8",
      "revId": "157864bca46bb12d1c9ca4761271257d6445e57b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "55f35d92_872811f9",
        "filename": "drivers/ufs/ufs.c",
        "patchSetId": 1
      },
      "lineNbr": 157,
      "author": {
        "id": 1000700
      },
      "writtenOn": "2023-03-15T09:58:32Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "88877322_2fdb92b1",
      "revId": "157864bca46bb12d1c9ca4761271257d6445e57b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "134fd3c4_50698584",
        "filename": "drivers/ufs/ufs.c",
        "patchSetId": 1
      },
      "lineNbr": 329,
      "author": {
        "id": 1000350
      },
      "writtenOn": "2023-03-15T08:22:05Z",
      "side": 1,
      "message": "Could you help to share comments on the reason of changing interrupts?",
      "revId": "157864bca46bb12d1c9ca4761271257d6445e57b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8aac7df7_f7090105",
        "filename": "drivers/ufs/ufs.c",
        "patchSetId": 1
      },
      "lineNbr": 329,
      "author": {
        "id": 1000700
      },
      "writtenOn": "2023-03-15T09:58:32Z",
      "side": 1,
      "message": "The main reason is: there are spurious error interrupts set during link-startup (UE is set multiple times even if cleared) \nAnd the error handler checks for errors based on the enabled interrupts, so we removed the error interrupts here to avoid checking for those in error handler before link-startup",
      "parentUuid": "134fd3c4_50698584",
      "revId": "157864bca46bb12d1c9ca4761271257d6445e57b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "de6ff05d_a477ca9b",
        "filename": "drivers/ufs/ufs.c",
        "patchSetId": 1
      },
      "lineNbr": 364,
      "author": {
        "id": 1000350
      },
      "writtenOn": "2023-03-15T07:59:23Z",
      "side": 1,
      "message": "The comment may be not accurate. UE indicates that a layer is in error condition. So it\u0027s just to clear the error.",
      "revId": "157864bca46bb12d1c9ca4761271257d6445e57b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3d8d65c3_4debc83e",
        "filename": "drivers/ufs/ufs.c",
        "patchSetId": 1
      },
      "lineNbr": 364,
      "author": {
        "id": 1000700
      },
      "writtenOn": "2023-03-15T09:58:32Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "de6ff05d_a477ca9b",
      "revId": "157864bca46bb12d1c9ca4761271257d6445e57b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e774a5ac_3c2fae60",
        "filename": "drivers/ufs/ufs.c",
        "patchSetId": 1
      },
      "lineNbr": 368,
      "author": {
        "id": 1001001
      },
      "writtenOn": "2023-03-13T12:38:11Z",
      "side": 1,
      "message": "how about `(void)mmio_read_32(base + UECPA);`",
      "revId": "157864bca46bb12d1c9ca4761271257d6445e57b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b84960f0_86f23e79",
        "filename": "drivers/ufs/ufs.c",
        "patchSetId": 1
      },
      "lineNbr": 368,
      "author": {
        "id": 1000695
      },
      "writtenOn": "2023-03-15T06:29:10Z",
      "side": 1,
      "message": "Could you elaborate? Why do you prefer adding `(void)` at the beginning?",
      "parentUuid": "e774a5ac_3c2fae60",
      "revId": "157864bca46bb12d1c9ca4761271257d6445e57b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1f27b849_49ee4653",
        "filename": "drivers/ufs/ufs.c",
        "patchSetId": 1
      },
      "lineNbr": 368,
      "author": {
        "id": 1000350
      },
      "writtenOn": "2023-03-15T07:59:23Z",
      "side": 1,
      "message": "It\u0027s better to add comments that the register is ROC type. It\u0027s also used to clear error.",
      "revId": "157864bca46bb12d1c9ca4761271257d6445e57b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b9a358f4_f4cde675",
        "filename": "drivers/ufs/ufs.c",
        "patchSetId": 1
      },
      "lineNbr": 368,
      "author": {
        "id": 1001001
      },
      "writtenOn": "2023-03-15T09:12:18Z",
      "side": 1,
      "message": "Adding a void makes it clear to the reader of the code that the return value is not being used and intentional.",
      "parentUuid": "b84960f0_86f23e79",
      "revId": "157864bca46bb12d1c9ca4761271257d6445e57b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "96f125cf_2ffb6834",
        "filename": "drivers/ufs/ufs.c",
        "patchSetId": 1
      },
      "lineNbr": 368,
      "author": {
        "id": 1000700
      },
      "writtenOn": "2023-03-15T09:58:32Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1f27b849_49ee4653",
      "revId": "157864bca46bb12d1c9ca4761271257d6445e57b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "90ff1a7e_840e3cef",
        "filename": "drivers/ufs/ufs.c",
        "patchSetId": 1
      },
      "lineNbr": 623,
      "author": {
        "id": 1000350
      },
      "writtenOn": "2023-03-15T07:59:23Z",
      "side": 1,
      "message": "UFS_INT_UCCS is removed. Is there any reason?",
      "revId": "157864bca46bb12d1c9ca4761271257d6445e57b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "12b95096_1566bd88",
        "filename": "drivers/ufs/ufs.c",
        "patchSetId": 1
      },
      "lineNbr": 623,
      "author": {
        "id": 1000700
      },
      "writtenOn": "2023-03-15T09:58:32Z",
      "side": 1,
      "message": "Because for transfer requests, UFSHC only sets UTRCS, UCCS is for UIC commands only\nSo waiting for UTRCS should suffice in this case",
      "parentUuid": "90ff1a7e_840e3cef",
      "revId": "157864bca46bb12d1c9ca4761271257d6445e57b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "36060ebb_5b5a06c2",
        "filename": "drivers/ufs/ufs.c",
        "patchSetId": 1
      },
      "lineNbr": 1031,
      "author": {
        "id": 1000350
      },
      "writtenOn": "2023-03-15T07:59:23Z",
      "side": 1,
      "message": "In this case, ufshc_reset() is skipped. Then why do you need to enable interrupts here? Since it\u0027s assumed that interrupts are enabled already.",
      "revId": "157864bca46bb12d1c9ca4761271257d6445e57b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "08e02868_691bd4ca",
        "filename": "drivers/ufs/ufs.c",
        "patchSetId": 1
      },
      "lineNbr": 1031,
      "author": {
        "id": 1000700
      },
      "writtenOn": "2023-03-15T09:58:32Z",
      "side": 1,
      "message": "You are right, assuming we are skipping init, we don\u0027t need this, removed",
      "parentUuid": "36060ebb_5b5a06c2",
      "revId": "157864bca46bb12d1c9ca4761271257d6445e57b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c7c415d2_399340be",
        "filename": "drivers/ufs/ufs.c",
        "patchSetId": 1
      },
      "lineNbr": 1046,
      "author": {
        "id": 1000350
      },
      "writtenOn": "2023-03-15T07:59:23Z",
      "side": 1,
      "message": "Interrupts have been enabled by ufshc_reset(). So why do you need to enable it again?",
      "revId": "157864bca46bb12d1c9ca4761271257d6445e57b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "84a7aebb_b5c58af5",
        "filename": "drivers/ufs/ufs.c",
        "patchSetId": 1
      },
      "lineNbr": 1046,
      "author": {
        "id": 1000700
      },
      "writtenOn": "2023-03-15T09:58:32Z",
      "side": 1,
      "message": "This enables all the interrupts, including the error interrupts (UFS_INT_ERR) to ensure we check for errors post link-startup whereas the one in ufshc_reset doesn\u0027t enable all of them, as explained in the previous comment",
      "parentUuid": "c7c415d2_399340be",
      "revId": "157864bca46bb12d1c9ca4761271257d6445e57b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}