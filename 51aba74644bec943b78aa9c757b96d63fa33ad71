{
  "comments": [
    {
      "key": {
        "uuid": "3beefa6f_b8dd7578",
        "filename": "drivers/arm/fvp/bad_trng.c",
        "patchSetId": 1
      },
      "lineNbr": 18,
      "author": {
        "id": 1000118
      },
      "writtenOn": "2020-09-28T23:07:34Z",
      "side": 1,
      "message": "Other UUID users in the tree seem to just break this down, which looks more readable:\n{0x71, 0x70, 0xee, 0x85}, ....",
      "revId": "51aba74644bec943b78aa9c757b96d63fa33ad71",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2c103146_867e94d2",
        "filename": "drivers/arm/fvp/bad_trng.c",
        "patchSetId": 1
      },
      "lineNbr": 36,
      "author": {
        "id": 1000118
      },
      "writtenOn": "2020-09-28T23:07:34Z",
      "side": 1,
      "message": "Not that it really matters, but the whole sequence can be simplified:\n       *out \u003d val | (uint64_t)val \u003c\u003c 8;\n       *out |\u003d *out \u003c\u003c 16;\n       *out |\u003d *out \u003c\u003c 32;",
      "revId": "51aba74644bec943b78aa9c757b96d63fa33ad71",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f740409d_d754c596",
        "filename": "services/std_svc/trng/trng_entropy_pool.c",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2020-09-21T15:56:09Z",
      "side": 1,
      "message": "Out of curiosity, why is there a limitation of 192 bits?",
      "range": {
        "startLine": 13,
        "startChar": 59,
        "endLine": 13,
        "endChar": 67
      },
      "revId": "51aba74644bec943b78aa9c757b96d63fa33ad71",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "783f1a50_409519da",
        "filename": "services/std_svc/trng/trng_entropy_pool.c",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1000272
      },
      "writtenOn": "2020-09-21T16:07:40Z",
      "side": 1,
      "message": "The interface can return entropy in 3, 64-bit registers, totaling 192 bits.",
      "parentUuid": "f740409d_d754c596",
      "range": {
        "startLine": 13,
        "startChar": 59,
        "endLine": 13,
        "endChar": 67
      },
      "revId": "51aba74644bec943b78aa9c757b96d63fa33ad71",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "969532a4_ff7fb7b8",
        "filename": "services/std_svc/trng/trng_entropy_pool.c",
        "patchSetId": 1
      },
      "lineNbr": 34,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2020-09-21T15:56:09Z",
      "side": 1,
      "message": "nit: i think this line should be on the next line per coding standards. Even if it is not, that generally seems the pattern in code so might be good to stick to it.\n\n/*\n * comment starts here.\n * comment ends here.\n */",
      "revId": "51aba74644bec943b78aa9c757b96d63fa33ad71",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cc87db40_2d894cc1",
        "filename": "services/std_svc/trng/trng_entropy_pool.c",
        "patchSetId": 1
      },
      "lineNbr": 34,
      "author": {
        "id": 1000272
      },
      "writtenOn": "2020-09-21T16:07:40Z",
      "side": 1,
      "message": "Understood. I\u0027ll be getting to this when I next look at this patch (it may be a week or two)",
      "parentUuid": "969532a4_ff7fb7b8",
      "revId": "51aba74644bec943b78aa9c757b96d63fa33ad71",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0ffa73b5_04e32e1d",
        "filename": "services/std_svc/trng/trng_entropy_pool.c",
        "patchSetId": 1
      },
      "lineNbr": 53,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2020-09-21T15:56:09Z",
      "side": 1,
      "message": "pack entropy in the out buffer? not sure what this statement means.",
      "range": {
        "startLine": 53,
        "startChar": 3,
        "endLine": 53,
        "endChar": 30
      },
      "revId": "51aba74644bec943b78aa9c757b96d63fa33ad71",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cda09bb7_973c5512",
        "filename": "services/std_svc/trng/trng_entropy_pool.c",
        "patchSetId": 1
      },
      "lineNbr": 53,
      "author": {
        "id": 1000272
      },
      "writtenOn": "2020-09-21T16:07:40Z",
      "side": 1,
      "message": "The entropy is stored internally in a way that\u0027s different from the expected structure of the return value. This function shuffles the bits around so that they appear in the lest significant bits of out, which I was referring to as \"packing\". I don\u0027t think this is a particularly good way to explain this, so I\u0027m eager to have suggestions on how to reword this. Does this make sense? how would you word this?",
      "parentUuid": "0ffa73b5_04e32e1d",
      "range": {
        "startLine": 53,
        "startChar": 3,
        "endLine": 53,
        "endChar": 30
      },
      "revId": "51aba74644bec943b78aa9c757b96d63fa33ad71",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6a8b28a4_9f336142",
        "filename": "services/std_svc/trng/trng_entropy_pool.c",
        "patchSetId": 1
      },
      "lineNbr": 53,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2020-09-21T16:22:51Z",
      "side": 1,
      "message": "Oh, i think the packing aspect was clear. The comment was perhaps meant to be \"pack the entropy IN the out buffer\". It is missing the word \"in\".\nThe way i understood this is that you have a 256 bit circular buffer of entropy and the bits are returned to the caller in least significant bit to most significant bit order. Although, i think this clarification can be made below in the for loop.",
      "parentUuid": "cda09bb7_973c5512",
      "range": {
        "startLine": 53,
        "startChar": 3,
        "endLine": 53,
        "endChar": 30
      },
      "revId": "51aba74644bec943b78aa9c757b96d63fa33ad71",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "afd64c48_e8374f51",
        "filename": "services/std_svc/trng/trng_entropy_pool.c",
        "patchSetId": 1
      },
      "lineNbr": 58,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2020-09-21T15:56:09Z",
      "side": 1,
      "message": "do we need to check nbits \u003c 193 bits? or assert? it seems like it is checked in other files but would be good to make an assertion here.",
      "range": {
        "startLine": 58,
        "startChar": 32,
        "endLine": 58,
        "endChar": 37
      },
      "revId": "51aba74644bec943b78aa9c757b96d63fa33ad71",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "835c5ea0_034eb062",
        "filename": "services/std_svc/trng/trng_entropy_pool.c",
        "patchSetId": 1
      },
      "lineNbr": 58,
      "author": {
        "id": 1000272
      },
      "writtenOn": "2020-09-21T16:07:40Z",
      "side": 1,
      "message": "Yes, that would be good to add. Though we\u0027re likely to see duplicate checks without LTO because the two checks are in different translation units. I don\u0027t think this is a problem.",
      "parentUuid": "afd64c48_e8374f51",
      "range": {
        "startLine": 58,
        "startChar": 32,
        "endLine": 58,
        "endChar": 37
      },
      "revId": "51aba74644bec943b78aa9c757b96d63fa33ad71",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2e6806aa_eabc2c57",
        "filename": "services/std_svc/trng/trng_entropy_pool.c",
        "patchSetId": 1
      },
      "lineNbr": 74,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2020-09-21T15:56:09Z",
      "side": 1,
      "message": "ent buffer? do you mean out ?",
      "range": {
        "startLine": 74,
        "startChar": 57,
        "endLine": 74,
        "endChar": 60
      },
      "revId": "51aba74644bec943b78aa9c757b96d63fa33ad71",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3f679d16_3180d180",
        "filename": "services/std_svc/trng/trng_entropy_pool.c",
        "patchSetId": 1
      },
      "lineNbr": 74,
      "author": {
        "id": 1000272
      },
      "writtenOn": "2020-09-21T16:07:40Z",
      "side": 1,
      "message": "Yes. This was missed in a renaming. Thanks!",
      "parentUuid": "2e6806aa_eabc2c57",
      "range": {
        "startLine": 74,
        "startChar": 57,
        "endLine": 74,
        "endChar": 60
      },
      "revId": "51aba74644bec943b78aa9c757b96d63fa33ad71",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3f73d338_33f5cfc1",
        "filename": "services/std_svc/trng/trng_entropy_pool.c",
        "patchSetId": 1
      },
      "lineNbr": 117,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2020-09-21T15:56:09Z",
      "side": 1,
      "message": "0xFFFFFFFFFFFFFFFFULL",
      "range": {
        "startLine": 117,
        "startChar": 23,
        "endLine": 117,
        "endChar": 41
      },
      "revId": "51aba74644bec943b78aa9c757b96d63fa33ad71",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aa3a0bc8_fa322d2f",
        "filename": "services/std_svc/trng/trng_entropy_pool.c",
        "patchSetId": 1
      },
      "lineNbr": 117,
      "author": {
        "id": 1000272
      },
      "writtenOn": "2020-09-21T16:07:40Z",
      "side": 1,
      "message": "Good catch. I\u0027ll include this when I next work on this patch.",
      "parentUuid": "3f73d338_33f5cfc1",
      "range": {
        "startLine": 117,
        "startChar": 23,
        "endLine": 117,
        "endChar": 41
      },
      "revId": "51aba74644bec943b78aa9c757b96d63fa33ad71",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "29b24fa9_e216ea05",
        "filename": "services/std_svc/trng/trng_entropy_pool.c",
        "patchSetId": 1
      },
      "lineNbr": 117,
      "author": {
        "id": 1000118
      },
      "writtenOn": "2020-09-28T23:07:34Z",
      "side": 1,
      "message": "or even better: ~0ULL",
      "parentUuid": "aa3a0bc8_fa322d2f",
      "range": {
        "startLine": 117,
        "startChar": 23,
        "endLine": 117,
        "endChar": 41
      },
      "revId": "51aba74644bec943b78aa9c757b96d63fa33ad71",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aec4fe63_dd8edc6a",
        "filename": "services/std_svc/trng/trng_main.c",
        "patchSetId": 1
      },
      "lineNbr": 24,
      "author": {
        "id": 1000118
      },
      "writtenOn": "2020-09-28T23:07:34Z",
      "side": 1,
      "message": "What about using ~0UL instead of the long number of Fs?",
      "revId": "51aba74644bec943b78aa9c757b96d63fa33ad71",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fc53bce9_e7916cd0",
        "filename": "services/std_svc/trng/trng_main.c",
        "patchSetId": 1
      },
      "lineNbr": 31,
      "author": {
        "id": 1000118
      },
      "writtenOn": "2020-09-28T23:07:34Z",
      "side": 1,
      "message": "First, this should be 32 here.\nAnd secondly, this is off-by-1. \"switch ((nbits - 1) / 32)\" seems better, but then the mask above is not correct for 32, 64, 96 bits. I fixed it by overwriting the mask when the modulo is 0. But I am sure there is a better way.",
      "revId": "51aba74644bec943b78aa9c757b96d63fa33ad71",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5ae6b7f3_cb7a8f96",
        "filename": "services/std_svc/trng/trng_main.c",
        "patchSetId": 1
      },
      "lineNbr": 59,
      "author": {
        "id": 1000118
      },
      "writtenOn": "2020-09-28T23:07:34Z",
      "side": 1,
      "message": "same here: ((nbits - 1) / 64): One register can hold 64 bits, from 0 to 63. Same issue with mask as above, though.\nLinux uses larger buffers (\u003e\u003d32 bytes), so most calls actually request the maximum. And fail at the moment.",
      "revId": "51aba74644bec943b78aa9c757b96d63fa33ad71",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    }
  ]
}