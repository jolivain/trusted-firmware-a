{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "d0197a1e_bc13d8bd",
        "filename": "lib/el3_runtime/aarch64/context_mgmt.c",
        "patchSetId": 34
      },
      "lineNbr": 875,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2023-06-27T09:01:29Z",
      "side": 1,
      "message": "Not sure for the need to EL2 context save and restore in a pre-v8.4 system (ie. no S-El2).",
      "revId": "de9855b98ef7cf80bc14e89305b515d6490c1953",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a4c162c9_b75b059d",
        "filename": "lib/el3_runtime/aarch64/context_mgmt.c",
        "patchSetId": 34
      },
      "lineNbr": 875,
      "author": {
        "id": 1000883
      },
      "writtenOn": "2023-06-27T12:27:22Z",
      "side": 1,
      "message": "in those configurations it won\u0027t be a save/restore. If you have a look at cm_el2_sysregs_context_save in the previous patch I specifically factor these things out such that we\u0027re left with an identical action, just done as part of context instead on in-place with this function",
      "parentUuid": "d0197a1e_bc13d8bd",
      "revId": "de9855b98ef7cf80bc14e89305b515d6490c1953",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "77ea1709_acdbda9c",
        "filename": "lib/el3_runtime/aarch64/context_mgmt.c",
        "patchSetId": 34
      },
      "lineNbr": 875,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2023-06-27T14:52:42Z",
      "side": 1,
      "message": "Conceptually El2 save and restore for these cases are not valid. Also concerned about the memory footprint increase being imposed for pre 8.4 systems which are very constrained.",
      "parentUuid": "a4c162c9_b75b059d",
      "revId": "de9855b98ef7cf80bc14e89305b515d6490c1953",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d10a2768_08788b6a",
        "filename": "lib/el3_runtime/aarch64/context_mgmt.c",
        "patchSetId": 34
      },
      "lineNbr": 875,
      "author": {
        "id": 1000883
      },
      "writtenOn": "2023-06-27T16:39:02Z",
      "side": 1,
      "message": "And I am challenging this concept. The argument is that the in-place writing of SCTLR_EL2 is in fact a context restore, just obscured under a different name with funny constraints. In these configurations where it doesn\u0027t need to be contexted in and out (i.e. no SEL2), then the smc handlers do not call cm_el2_sysregs_context_{save, restore}. So this operation does, in fact become valid, as cm_prepare_el3_exit() is an initialization routine.\n\nAs for the memory footprint, this adds 16 bytes of context but removes a bunch of code (in unison with some of the previous patches) in cm_prepare_el3_exit(). I did a quick check before and after this patch and the binary came out pretty much identical for a minimal fvp config. I don\u0027t see this as a problem. The context structures need more work anyway.",
      "revId": "de9855b98ef7cf80bc14e89305b515d6490c1953",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}