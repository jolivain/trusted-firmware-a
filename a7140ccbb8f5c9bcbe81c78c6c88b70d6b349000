{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "b13dfb2f_c6d9697c",
        "filename": "services/spd/opteed/nssmc_opteed.h",
        "patchSetId": 2
      },
      "lineNbr": 43,
      "author": {
        "id": 1000120
      },
      "writtenOn": "2023-01-09T11:51:43Z",
      "side": 1,
      "message": "The OP-TEE image isn\u0027t an ELF.\nI\u0027d rather have all this in teesmc_opteed.h.",
      "range": {
        "startLine": 43,
        "startChar": 8,
        "endLine": 43,
        "endChar": 36
      },
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b740b298_d974c881",
        "filename": "services/spd/opteed/nssmc_opteed.h",
        "patchSetId": 2
      },
      "lineNbr": 43,
      "author": {
        "id": 1000962
      },
      "writtenOn": "2023-01-09T19:57:22Z",
      "side": 1,
      "message": "Renamed to \u0027*_LOAD_IMAGE\u0027 and moved to teesmc_opteed.h.",
      "parentUuid": "b13dfb2f_c6d9697c",
      "range": {
        "startLine": 43,
        "startChar": 8,
        "endLine": 43,
        "endChar": 36
      },
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "96cbda5b_7154bec5",
        "filename": "services/spd/opteed/opteed.mk",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 1000120
      },
      "writtenOn": "2023-01-09T11:51:43Z",
      "side": 1,
      "message": "OP-TEE",
      "range": {
        "startLine": 20,
        "startChar": 35,
        "endLine": 20,
        "endChar": 40
      },
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a2ef4371_14b97693",
        "filename": "services/spd/opteed/opteed.mk",
        "patchSetId": 2
      },
      "lineNbr": 20,
      "author": {
        "id": 1000962
      },
      "writtenOn": "2023-01-09T19:57:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "96cbda5b_7154bec5",
      "range": {
        "startLine": 20,
        "startChar": 35,
        "endLine": 20,
        "endChar": 40
      },
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f67af9c4_93bb1639",
        "filename": "services/spd/opteed/opteed_main.c",
        "patchSetId": 2
      },
      "lineNbr": 152,
      "author": {
        "id": 1000120
      },
      "writtenOn": "2023-01-09T11:51:43Z",
      "side": 1,
      "message": "Please use the classic C style of comments /* */. Same for all the other occurrences.",
      "range": {
        "startLine": 152,
        "startChar": 8,
        "endLine": 152,
        "endChar": 10
      },
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "234a1904_48f99b07",
        "filename": "services/spd/opteed/opteed_main.c",
        "patchSetId": 2
      },
      "lineNbr": 152,
      "author": {
        "id": 1000962
      },
      "writtenOn": "2023-01-09T19:57:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f67af9c4_93bb1639",
      "range": {
        "startLine": 152,
        "startChar": 8,
        "endLine": 152,
        "endChar": 10
      },
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "54ccfc4b_b1707cb6",
        "filename": "services/spd/opteed/opteed_main.c",
        "patchSetId": 2
      },
      "lineNbr": 164,
      "author": {
        "id": 1000120
      },
      "writtenOn": "2023-01-09T11:51:43Z",
      "side": 1,
      "message": "Please break the line as:\n\nstatic int32_t\nopteed_init_with_entry_point(entry_point_info_t *optee_entry_point)\n\ninstead",
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4d8afa2a_8af97930",
        "filename": "services/spd/opteed/opteed_main.c",
        "patchSetId": 2
      },
      "lineNbr": 164,
      "author": {
        "id": 1000962
      },
      "writtenOn": "2023-01-09T19:57:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "54ccfc4b_b1707cb6",
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "85b16d2e_d33b078d",
        "filename": "services/spd/opteed/opteed_main.c",
        "patchSetId": 2
      },
      "lineNbr": 196,
      "author": {
        "id": 1000120
      },
      "writtenOn": "2023-01-09T11:51:43Z",
      "side": 1,
      "message": "OP-TEE binary image",
      "range": {
        "startLine": 196,
        "startChar": 68,
        "endLine": 196,
        "endChar": 77
      },
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a9f31564_7cc35d2e",
        "filename": "services/spd/opteed/opteed_main.c",
        "patchSetId": 2
      },
      "lineNbr": 196,
      "author": {
        "id": 1000962
      },
      "writtenOn": "2023-01-09T19:57:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "85b16d2e_d33b078d",
      "range": {
        "startLine": 196,
        "startChar": 68,
        "endLine": 196,
        "endChar": 77
      },
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f6f2145d_ba80231b",
        "filename": "services/spd/opteed/opteed_main.c",
        "patchSetId": 2
      },
      "lineNbr": 202,
      "author": {
        "id": 1000120
      },
      "writtenOn": "2023-01-09T11:51:43Z",
      "side": 1,
      "message": "No need to cast",
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "eff8677f_26865615",
        "filename": "services/spd/opteed/opteed_main.c",
        "patchSetId": 2
      },
      "lineNbr": 202,
      "author": {
        "id": 1000962
      },
      "writtenOn": "2023-01-09T19:57:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f6f2145d_ba80231b",
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8b38add3_92b7db82",
        "filename": "services/spd/opteed/opteed_main.c",
        "patchSetId": 2
      },
      "lineNbr": 221,
      "author": {
        "id": 1000120
      },
      "writtenOn": "2023-01-09T11:51:43Z",
      "side": 1,
      "message": "Cast is not needed",
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "09e4baa2_cfbcfb53",
        "filename": "services/spd/opteed/opteed_main.c",
        "patchSetId": 2
      },
      "lineNbr": 221,
      "author": {
        "id": 1000962
      },
      "writtenOn": "2023-01-09T19:57:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8b38add3_92b7db82",
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c9dbef21_03d8aeda",
        "filename": "services/spd/opteed/opteed_main.c",
        "patchSetId": 2
      },
      "lineNbr": 224,
      "author": {
        "id": 1000120
      },
      "writtenOn": "2023-01-09T11:51:43Z",
      "side": 1,
      "message": "Please declare rc above together with the other local variables.",
      "range": {
        "startLine": 224,
        "startChar": 1,
        "endLine": 224,
        "endChar": 12
      },
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "94c8007a_2465e98b",
        "filename": "services/spd/opteed/opteed_main.c",
        "patchSetId": 2
      },
      "lineNbr": 224,
      "author": {
        "id": 1000962
      },
      "writtenOn": "2023-01-09T19:57:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c9dbef21_03d8aeda",
      "range": {
        "startLine": 224,
        "startChar": 1,
        "endLine": 224,
        "endChar": 12
      },
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4e9c4749_b15bc860",
        "filename": "services/spd/opteed/opteed_main.c",
        "patchSetId": 2
      },
      "lineNbr": 225,
      "author": {
        "id": 1000120
      },
      "writtenOn": "2023-01-09T11:51:43Z",
      "side": 1,
      "message": "This should align with the opening \"(\" on the line above.",
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7c1147f6_9676e97f",
        "filename": "services/spd/opteed/opteed_main.c",
        "patchSetId": 2
      },
      "lineNbr": 225,
      "author": {
        "id": 1000962
      },
      "writtenOn": "2023-01-09T19:57:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4e9c4749_b15bc860",
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b6270a08_21146c53",
        "filename": "services/spd/opteed/opteed_main.c",
        "patchSetId": 2
      },
      "lineNbr": 229,
      "author": {
        "id": 1000120
      },
      "writtenOn": "2023-01-09T11:51:43Z",
      "side": 1,
      "message": "Please remove the space between (optee_image_info_t *) and data_va",
      "range": {
        "startLine": 229,
        "startChar": 36,
        "endLine": 229,
        "endChar": 37
      },
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "20b2ec56_feafd4e2",
        "filename": "services/spd/opteed/opteed_main.c",
        "patchSetId": 2
      },
      "lineNbr": 229,
      "author": {
        "id": 1000962
      },
      "writtenOn": "2023-01-09T19:57:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b6270a08_21146c53",
      "range": {
        "startLine": 229,
        "startChar": 36,
        "endLine": 229,
        "endChar": 37
      },
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "52821795_8601a5d5",
        "filename": "services/spd/opteed/opteed_main.c",
        "patchSetId": 2
      },
      "lineNbr": 243,
      "author": {
        "id": 1000120
      },
      "writtenOn": "2023-01-09T11:51:43Z",
      "side": 1,
      "message": "Please declare in the start of this block, that is, together with the other variables at the start of this function. Same below for the for for loop.",
      "range": {
        "startLine": 243,
        "startChar": 10,
        "endLine": 243,
        "endChar": 11
      },
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e7f584eb_55753720",
        "filename": "services/spd/opteed/opteed_main.c",
        "patchSetId": 2
      },
      "lineNbr": 243,
      "author": {
        "id": 1000962
      },
      "writtenOn": "2023-01-09T19:57:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "52821795_8601a5d5",
      "range": {
        "startLine": 243,
        "startChar": 10,
        "endLine": 243,
        "endChar": 11
      },
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f87a740e_068e9840",
        "filename": "services/spd/opteed/opteed_main.c",
        "patchSetId": 2
      },
      "lineNbr": 252,
      "author": {
        "id": 1000120
      },
      "writtenOn": "2023-01-09T11:51:43Z",
      "side": 1,
      "message": "No need to cast.",
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ccc712ad_0de593f8",
        "filename": "services/spd/opteed/opteed_main.c",
        "patchSetId": 2
      },
      "lineNbr": 252,
      "author": {
        "id": 1000962
      },
      "writtenOn": "2023-01-09T19:57:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f87a740e_068e9840",
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "288ddb27_a46f4653",
        "filename": "services/spd/opteed/opteed_main.c",
        "patchSetId": 2
      },
      "lineNbr": 256,
      "author": {
        "id": 1000120
      },
      "writtenOn": "2023-01-09T11:51:43Z",
      "side": 1,
      "message": "Align with the opening ( on the line above.",
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "48cb333e_639803eb",
        "filename": "services/spd/opteed/opteed_main.c",
        "patchSetId": 2
      },
      "lineNbr": 256,
      "author": {
        "id": 1000962
      },
      "writtenOn": "2023-01-09T19:57:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "288ddb27_a46f4653",
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5836a2ba_e1094b48",
        "filename": "services/spd/opteed/opteed_main.c",
        "patchSetId": 2
      },
      "lineNbr": 289,
      "author": {
        "id": 1000120
      },
      "writtenOn": "2023-01-09T11:51:43Z",
      "side": 1,
      "message": "Align with the opening ( on the line above.",
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5398d1fd_dc4d0dea",
        "filename": "services/spd/opteed/opteed_main.c",
        "patchSetId": 2
      },
      "lineNbr": 289,
      "author": {
        "id": 1000962
      },
      "writtenOn": "2023-01-09T19:57:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5836a2ba_e1094b48",
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b8c55271_76834a25",
        "filename": "services/spd/opteed/opteed_main.c",
        "patchSetId": 2
      },
      "lineNbr": 347,
      "author": {
        "id": 1000120
      },
      "writtenOn": "2023-01-09T11:51:43Z",
      "side": 1,
      "message": "OP-TEE",
      "range": {
        "startLine": 347,
        "startChar": 32,
        "endLine": 347,
        "endChar": 37
      },
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7c8cb917_bbcce960",
        "filename": "services/spd/opteed/opteed_main.c",
        "patchSetId": 2
      },
      "lineNbr": 347,
      "author": {
        "id": 1000962
      },
      "writtenOn": "2023-01-09T19:57:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b8c55271_76834a25",
      "range": {
        "startLine": 347,
        "startChar": 32,
        "endLine": 347,
        "endChar": 37
      },
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1f2530c0_f88570e5",
        "filename": "services/spd/opteed/opteed_main.c",
        "patchSetId": 2
      },
      "lineNbr": 376,
      "author": {
        "id": 1000120
      },
      "writtenOn": "2023-01-09T11:51:43Z",
      "side": 1,
      "message": "What is expected to happen here?",
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0145f2b5_53870090",
        "filename": "services/spd/opteed/opteed_main.c",
        "patchSetId": 2
      },
      "lineNbr": 376,
      "author": {
        "id": 1000962
      },
      "writtenOn": "2023-01-09T19:57:22Z",
      "side": 1,
      "message": "When OP-TEE is loaded the usual way by the firmware, when we switch to the non-secure world we will power on all of the cores and receive all the PM callbacks for optee_cpu_on_finish_handler.  If we load OP-TEE via an SMC, then when we receive later SMC calls for OP-TEE invocations, the corresponding context for that CPU will not have been setup yet so we are doing that here by detecting the UNKNOWN state (we know the CPU is on, because it\u0027s invoking the SMC; and we know the context isn\u0027t initialized because it\u0027s in the UNKNOWN state).",
      "parentUuid": "1f2530c0_f88570e5",
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ad3b09cf_44b702c9",
        "filename": "services/spd/opteed/opteed_main.c",
        "patchSetId": 2
      },
      "lineNbr": 376,
      "author": {
        "id": 1000120
      },
      "writtenOn": "2023-01-10T12:15:16Z",
      "side": 1,
      "message": "If NSSMC_OPTEED_CALL_LOAD_IMAGE hasn\u0027t been called yet we\u0027ll crash in opteed_cpu_on_finish_handler() when dereferencing optee_vector_table.",
      "parentUuid": "0145f2b5_53870090",
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "40dfe03c_20ba7932",
        "filename": "services/spd/opteed/opteed_main.c",
        "patchSetId": 2
      },
      "lineNbr": 376,
      "author": {
        "id": 1000962
      },
      "writtenOn": "2023-01-10T22:48:32Z",
      "side": 1,
      "message": "Correct, the assert(optee_vector_table) will get hit (I don\u0027t know if runtime assertions are on or not)...otherwise it\u0027ll crash in the dereference you mention.  Do you want me to check for the existence of optee_vector_table before we invoke opteed_cpu_on_finish_handler()? And if so, would you like it to panic, assert or return an error code from the SMC call?",
      "parentUuid": "ad3b09cf_44b702c9",
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bceb42e3_c69be842",
        "filename": "services/spd/opteed/opteed_main.c",
        "patchSetId": 2
      },
      "lineNbr": 376,
      "author": {
        "id": 1000120
      },
      "writtenOn": "2023-01-11T08:16:50Z",
      "side": 1,
      "message": "Returning an error makes the most sense to me.",
      "parentUuid": "40dfe03c_20ba7932",
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1bdf4ac0_a4668d8e",
        "filename": "services/spd/opteed/opteed_main.c",
        "patchSetId": 2
      },
      "lineNbr": 376,
      "author": {
        "id": 1000962
      },
      "writtenOn": "2023-01-11T20:04:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "bceb42e3_c69be842",
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ea296d62_3d65561c",
        "filename": "services/spd/opteed/opteed_pm.c",
        "patchSetId": 2
      },
      "lineNbr": 108,
      "author": {
        "id": 1000120
      },
      "writtenOn": "2023-01-09T11:51:43Z",
      "side": 1,
      "message": "Please align with the opening ( on the line above.",
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8363d7b0_1298a317",
        "filename": "services/spd/opteed/opteed_pm.c",
        "patchSetId": 2
      },
      "lineNbr": 108,
      "author": {
        "id": 1000962
      },
      "writtenOn": "2023-01-09T19:57:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ea296d62_3d65561c",
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "80b84468_098de949",
        "filename": "services/spd/opteed/opteed_pm.c",
        "patchSetId": 2
      },
      "lineNbr": 141,
      "author": {
        "id": 1000120
      },
      "writtenOn": "2023-01-09T11:51:43Z",
      "side": 1,
      "message": "Please add an empty line above. Same for this other places where the local variables aren\u0027t separated from code with an empty line.",
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f157a704_eeb63eab",
        "filename": "services/spd/opteed/opteed_pm.c",
        "patchSetId": 2
      },
      "lineNbr": 141,
      "author": {
        "id": 1000962
      },
      "writtenOn": "2023-01-09T19:57:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "80b84468_098de949",
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c94f4d44_9eee77e7",
        "filename": "services/spd/opteed/opteed_pm.c",
        "patchSetId": 2
      },
      "lineNbr": 183,
      "author": {
        "id": 1000120
      },
      "writtenOn": "2023-01-09T11:51:43Z",
      "side": 1,
      "message": "What\u0027s the expected outcome of this?",
      "range": {
        "startLine": 183,
        "startChar": 2,
        "endLine": 183,
        "endChar": 30
      },
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "523f6c66_693be223",
        "filename": "services/spd/opteed/opteed_pm.c",
        "patchSetId": 2
      },
      "lineNbr": 183,
      "author": {
        "id": 1000962
      },
      "writtenOn": "2023-01-09T19:57:22Z",
      "side": 1,
      "message": "This is handling the same situation that https://review.trustedfirmware.org/c/TF-A/trusted-firmware-a/+/18635/2/services/spd/opteed/opteed_main.c#376 is dealing with. If this is invoked from a core that we have not initialized for OP-TEE yet, then we wouldn\u0027t have a valid context to use for invoking the PM handler in OP-TEE...so this detects that and establishes that context.",
      "parentUuid": "c94f4d44_9eee77e7",
      "range": {
        "startLine": 183,
        "startChar": 2,
        "endLine": 183,
        "endChar": 30
      },
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5a24f65a_9fc2a4a1",
        "filename": "services/spd/opteed/opteed_pm.c",
        "patchSetId": 2
      },
      "lineNbr": 183,
      "author": {
        "id": 1000120
      },
      "writtenOn": "2023-01-10T12:15:16Z",
      "side": 1,
      "message": "OK, same problem here, crash in opteed_cpu_on_finish_handler() if OP-TEE hasn\u0027t been initialized on any CPU yet.",
      "parentUuid": "523f6c66_693be223",
      "range": {
        "startLine": 183,
        "startChar": 2,
        "endLine": 183,
        "endChar": 30
      },
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4b4340e5_339c2a05",
        "filename": "services/spd/opteed/opteed_pm.c",
        "patchSetId": 2
      },
      "lineNbr": 183,
      "author": {
        "id": 1000962
      },
      "writtenOn": "2023-01-10T22:48:32Z",
      "side": 1,
      "message": "AFAIK, this won\u0027t get invoked if we haven\u0027t initialized OP-TEE yet, because psci_register_spd_pm_hook() will not have been invoked yet (and that only happens if optee_vector_table is valid).",
      "parentUuid": "5a24f65a_9fc2a4a1",
      "range": {
        "startLine": 183,
        "startChar": 2,
        "endLine": 183,
        "endChar": 30
      },
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "970d69ff_cf1e54fb",
        "filename": "services/spd/opteed/opteed_pm.c",
        "patchSetId": 2
      },
      "lineNbr": 183,
      "author": {
        "id": 1000120
      },
      "writtenOn": "2023-01-11T08:16:50Z",
      "side": 1,
      "message": "OK, please add a short comment explaining that OP-TEE has to have been initialized for at least one CPU to reach this function and so on.",
      "parentUuid": "4b4340e5_339c2a05",
      "range": {
        "startLine": 183,
        "startChar": 2,
        "endLine": 183,
        "endChar": 30
      },
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "65a816ca_8ae8f56c",
        "filename": "services/spd/opteed/opteed_pm.c",
        "patchSetId": 2
      },
      "lineNbr": 183,
      "author": {
        "id": 1000962
      },
      "writtenOn": "2023-01-11T20:04:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "970d69ff_cf1e54fb",
      "range": {
        "startLine": 183,
        "startChar": 2,
        "endLine": 183,
        "endChar": 30
      },
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a6fb2e09_85e3947d",
        "filename": "services/spd/opteed/opteed_private.h",
        "patchSetId": 2
      },
      "lineNbr": 178,
      "author": {
        "id": 1000120
      },
      "writtenOn": "2023-01-09T11:51:43Z",
      "side": 1,
      "message": "Do we need another image format? Can\u0027t the one in lib/optee/optee_utils.c be used instead?",
      "range": {
        "startLine": 139,
        "startChar": 0,
        "endLine": 178,
        "endChar": 21
      },
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5f4cd76c_e2c1c308",
        "filename": "services/spd/opteed/opteed_private.h",
        "patchSetId": 2
      },
      "lineNbr": 178,
      "author": {
        "id": 1000962
      },
      "writtenOn": "2023-01-09T19:57:22Z",
      "side": 1,
      "message": "The one in optee_utils.c is missing a couple things to make it clean. Specifically it doesn\u0027t have a field for the \u0027entry_point\u0027 address, and also doesn\u0027t have 2 separate size fields for each image.\n\nIf you really want me to re-use that image format, I could...but it\u0027d be somewhat hacky. I could make the first optee_image_t have a zero size, and then use the addr in there to indicate the entry point. And then I could reuse the \u0027image_id\u0027 field in there as the \u0027segment_mem_size\u0027.  But I\u0027d prefer to keep things cleaner and define a new format like I\u0027ve done.",
      "parentUuid": "a6fb2e09_85e3947d",
      "range": {
        "startLine": 139,
        "startChar": 0,
        "endLine": 178,
        "endChar": 21
      },
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e0b46ee1_509cf3b1",
        "filename": "services/spd/opteed/opteed_private.h",
        "patchSetId": 2
      },
      "lineNbr": 178,
      "author": {
        "id": 1000120
      },
      "writtenOn": "2023-01-10T12:15:16Z",
      "side": 1,
      "message": "Upstream OP-TEE has the entry point at the load address and is able to zero all memory that should be zeroed itself. Why do you need to do it differently here?",
      "parentUuid": "5f4cd76c_e2c1c308",
      "range": {
        "startLine": 139,
        "startChar": 0,
        "endLine": 178,
        "endChar": 21
      },
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7ae8c866_57c2f3f6",
        "filename": "services/spd/opteed/opteed_private.h",
        "patchSetId": 2
      },
      "lineNbr": 178,
      "author": {
        "id": 1000962
      },
      "writtenOn": "2023-01-10T22:48:32Z",
      "side": 1,
      "message": "OK, I didn\u0027t realize that was the case for either of those...so then yes, I can use the same image format. I\u0027ll move the declarations for those structs into optee_utils.h so they can be shared by both.",
      "parentUuid": "e0b46ee1_509cf3b1",
      "range": {
        "startLine": 139,
        "startChar": 0,
        "endLine": 178,
        "endChar": 21
      },
      "revId": "a7140ccbb8f5c9bcbe81c78c6c88b70d6b349000",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}