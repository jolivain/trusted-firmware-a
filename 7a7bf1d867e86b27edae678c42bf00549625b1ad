{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "0cf7b7f7_749946a3",
        "filename": "lib/gpt_rme/gpt_rme.c",
        "patchSetId": 1
      },
      "lineNbr": 702,
      "author": {
        "id": 1000099
      },
      "writtenOn": "2022-08-24T00:45:44Z",
      "side": 1,
      "message": "Just curious what this change is supposed to achieve from prior implementation? Don\u0027t see any field affected by moving tlbi+dsb after write_gptbr_el3. Don\u0027t remember the spec mentioning possibility of gptbr being part of TLB.",
      "range": {
        "startLine": 700,
        "startChar": 1,
        "endLine": 702,
        "endChar": 7
      },
      "revId": "7a7bf1d867e86b27edae678c42bf00549625b1ad",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3abf72c9_67c3e504",
        "filename": "lib/gpt_rme/gpt_rme.c",
        "patchSetId": 1
      },
      "lineNbr": 702,
      "author": {
        "id": 1000619
      },
      "writtenOn": "2022-08-25T04:37:13Z",
      "side": 1,
      "message": "You are correct, GPTBR was not the register that needed the cache invalidate. This has been updated according to Soby\u0027s comments.",
      "parentUuid": "0cf7b7f7_749946a3",
      "range": {
        "startLine": 700,
        "startChar": 1,
        "endLine": 702,
        "endChar": 7
      },
      "revId": "7a7bf1d867e86b27edae678c42bf00549625b1ad",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "161620ca_c009ecfe",
        "filename": "lib/gpt_rme/gpt_rme.c",
        "patchSetId": 1
      },
      "lineNbr": 720,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2022-08-24T14:03:05Z",
      "side": 1,
      "message": "Need an intermediate gpc write here with all the barriers prior to GPC enable is set:\nwrite_gpccr_el3(gpccr_el3);\nisb();\ntlbipaallos();\ndsb();\nisb();",
      "revId": "7a7bf1d867e86b27edae678c42bf00549625b1ad",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "48f0febf_8483d13e",
        "filename": "lib/gpt_rme/gpt_rme.c",
        "patchSetId": 1
      },
      "lineNbr": 720,
      "author": {
        "id": 1000619
      },
      "writtenOn": "2022-08-25T04:37:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "161620ca_c009ecfe",
      "revId": "7a7bf1d867e86b27edae678c42bf00549625b1ad",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1487c6d5_bf788e76",
        "filename": "lib/gpt_rme/gpt_rme.c",
        "patchSetId": 1
      },
      "lineNbr": 720,
      "author": {
        "id": 1000099
      },
      "writtenOn": "2022-08-25T18:50:25Z",
      "side": 1,
      "message": "Do we really need to double this sequence? All fields including the GPC enable are updated to the same physical register and write to the register won\u0027t happen until we call \"write_gpccr_el3(gpccr_el3)\". isb fence for any speculation past the write_gpccr. This will set the GPC as well as other fields within the register all in the same cycle. So when GP check happens for subsequent instructions after ISB(as early as the tlbipaallos(), all attributes(irgn, orgn, pps, pgs and maybe even fault control) are set as per the new context.\nLet me know if I am missing something here.",
      "parentUuid": "48f0febf_8483d13e",
      "revId": "7a7bf1d867e86b27edae678c42bf00549625b1ad",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6aa670a6_1e24954c",
        "filename": "lib/gpt_rme/gpt_rme.c",
        "patchSetId": 1
      },
      "lineNbr": 720,
      "author": {
        "id": 1000619
      },
      "writtenOn": "2022-08-30T01:51:46Z",
      "side": 1,
      "message": "This is a good question - I am also a bit unclear on why the duplication is necessary (two sets of writes and barriers). Soby - can you answer Bipin\u0027s question? Also if anything needs to be adjusted since the most recent change? Thanks.",
      "parentUuid": "1487c6d5_bf788e76",
      "revId": "7a7bf1d867e86b27edae678c42bf00549625b1ad",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}