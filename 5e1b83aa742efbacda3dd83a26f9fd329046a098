{
  "comments": [
    {
      "key": {
        "uuid": "12af3f76_b20bf9d3",
        "filename": "plat/nvidia/tegra/common/tegra_gicv3.c",
        "patchSetId": 5
      },
      "lineNbr": 46,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2020-06-19T06:48:14Z",
      "side": 1,
      "message": "Sorry to come back on earlier\u0027s comment from Madhu.\nI think a better pattern would be to have a static const declaration at top of the file like this:\n\nstatic const gicv3_driver_data_t tegra_gic_data \u003d {\n\t.gicd_base \u003d TEGRA_GICD_BASE,\t\n\t.gicr_base \u003d TEGRA_GICR_BASE,\n\t.rdistif_num \u003d PLATFORM_CORE_COUNT,\n\t.rdistif_base_addrs \u003d rdistif_base_addrs,\n\t.mpidr_to_core_pos \u003d plat_tegra_mpidr_to_core_pos,\n[...]\n};\n\n\nand remove lines 40-46?",
      "range": {
        "startLine": 35,
        "startChar": 1,
        "endLine": 46,
        "endChar": 58
      },
      "revId": "5e1b83aa742efbacda3dd83a26f9fd329046a098",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c670cabf_e7d86a32",
        "filename": "plat/nvidia/tegra/common/tegra_gicv3.c",
        "patchSetId": 5
      },
      "lineNbr": 46,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2020-06-19T07:00:04Z",
      "side": 1,
      "message": "Hum, eventually, that may not be possible provided interrupt_props/props_num are passed as function parameters.... Never mind.",
      "parentUuid": "12af3f76_b20bf9d3",
      "range": {
        "startLine": 35,
        "startChar": 1,
        "endLine": 46,
        "endChar": 58
      },
      "revId": "5e1b83aa742efbacda3dd83a26f9fd329046a098",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a6643c5d_c7265d0d",
        "filename": "plat/nvidia/tegra/common/tegra_gicv3.c",
        "patchSetId": 5
      },
      "lineNbr": 58,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2020-06-19T07:13:36Z",
      "side": 1,
      "message": "I may be confused with the various platform function calls. But does it miss probing of re-distributor base addresses (gicv3_rdistif_probe) prior to calling gicv3_rdistif_init?",
      "revId": "5e1b83aa742efbacda3dd83a26f9fd329046a098",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "699d27b5_dd6d146b",
        "filename": "plat/nvidia/tegra/common/tegra_gicv3.c",
        "patchSetId": 5
      },
      "lineNbr": 58,
      "author": {
        "id": 1000162
      },
      "writtenOn": "2020-06-19T15:56:24Z",
      "side": 1,
      "message": "The general idea is to funnel all calls through this driver. I dont think we have a call to gicv3_rdistif_probe() outside of this driver. So I will add it here.\n\nI think I used some platform code as reference while developing this patch. Maybe that platform calls it from somewhere else.",
      "parentUuid": "a6643c5d_c7265d0d",
      "revId": "5e1b83aa742efbacda3dd83a26f9fd329046a098",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "56485dec_8bd453a3",
        "filename": "plat/nvidia/tegra/common/tegra_gicv3.c",
        "patchSetId": 5
      },
      "lineNbr": 58,
      "author": {
        "id": 1000098
      },
      "writtenOn": "2020-06-19T16:07:22Z",
      "side": 1,
      "message": "Hi Olivier, \nI think gicv3_driver_init() takes care of probing re-distributor base addresses.",
      "parentUuid": "a6643c5d_c7265d0d",
      "revId": "5e1b83aa742efbacda3dd83a26f9fd329046a098",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "04a14a69_33de52ef",
        "filename": "plat/nvidia/tegra/common/tegra_gicv3.c",
        "patchSetId": 5
      },
      "lineNbr": 58,
      "author": {
        "id": 1000098
      },
      "writtenOn": "2020-06-19T16:10:36Z",
      "side": 1,
      "message": "Hi Varun,\nWere you able to run tftf tests or boot linux on TF-A with GICv3 support on any tegra platforms?",
      "parentUuid": "56485dec_8bd453a3",
      "revId": "5e1b83aa742efbacda3dd83a26f9fd329046a098",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f13fa85e_02307ebb",
        "filename": "plat/nvidia/tegra/common/tegra_gicv3.c",
        "patchSetId": 5
      },
      "lineNbr": 58,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2020-06-19T16:28:32Z",
      "side": 1,
      "message": "@Madhu, I didn\u0027t see that in FVP (see plat/arm/common/arm_gicv3.c: plat_arm_gic_driver_init) but maybe the order of the function calls is different on other platforms?",
      "parentUuid": "04a14a69_33de52ef",
      "revId": "5e1b83aa742efbacda3dd83a26f9fd329046a098",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d05c16a4_50e30bc4",
        "filename": "plat/nvidia/tegra/common/tegra_gicv3.c",
        "patchSetId": 5
      },
      "lineNbr": 58,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2020-06-19T16:30:01Z",
      "side": 1,
      "message": "I see this pattern as well in plat/arm/board/fvp/fvp_gicv3.c: plat_arm_gic_driver_init",
      "parentUuid": "f13fa85e_02307ebb",
      "revId": "5e1b83aa742efbacda3dd83a26f9fd329046a098",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "99b6009a_c1e9df5f",
        "filename": "plat/nvidia/tegra/common/tegra_gicv3.c",
        "patchSetId": 5
      },
      "lineNbr": 58,
      "author": {
        "id": 1000098
      },
      "writtenOn": "2020-06-19T16:40:02Z",
      "side": 1,
      "message": "Hi Olivier,\nSome background information about this. Originally, platforms specified GICR_BASE address statically using a define macro such as PLAT_GICR_BASE. Even fvp did the same. Primary cpu populated the gicr_base address of every cpu in the SoC. Please see gicv3_rdistif_base_addrs_probe(). However, I introduced support for dynamic probe of re-distributor address in a distributed way. What this means is each cpu is now responsible to find its own re-distributor base address. This done using the gicv3_rdistif_probe() helper API. \n\nThis dynamic approach currently is only taken by FVP. So I believe, this patch should work as it is, except my original concern that tegra_gic_init() is being called twice.",
      "parentUuid": "d05c16a4_50e30bc4",
      "revId": "5e1b83aa742efbacda3dd83a26f9fd329046a098",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a96b47c0_3ed6fc27",
        "filename": "plat/nvidia/tegra/common/tegra_gicv3.c",
        "patchSetId": 5
      },
      "lineNbr": 58,
      "author": {
        "id": 1000162
      },
      "writtenOn": "2020-06-19T17:13:21Z",
      "side": 1,
      "message": "Hi @Madhukar,\n\nWe verified internally that this GICv3 driver is able to complete the TF-A boot part and then continue with the linux bootup. There are some issues with linux that are being debugged, but not related to the GIC AFAIK.\n\nWe have tested tftf on the same platform and were able to complete the tftf-validation test suite. JFYI, we have tried this in a single CPU environment only. Multi-CPU would be next.\n\nFrom your comment, looks like the tegra driver does not have to call the probe function as the base gicv3 driver takes care of it.\n\n-Varun",
      "parentUuid": "99b6009a_c1e9df5f",
      "revId": "5e1b83aa742efbacda3dd83a26f9fd329046a098",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    }
  ]
}