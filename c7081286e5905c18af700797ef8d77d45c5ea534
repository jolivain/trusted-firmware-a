{
  "comments": [
    {
      "key": {
        "uuid": "dedc7d52_0d8b28ec",
        "filename": "lib/fconf/fconf.c",
        "patchSetId": 10
      },
      "lineNbr": 18,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2020-06-18T12:00:58Z",
      "side": 1,
      "message": "I don\u0027t like the fact that this function is only meant to be called by BL1, despite being in lib/fconf, which makes it sound like it should be generic.\n\nI suggest we restrict the responsibility of fconf_load_config to just loading the specified config file, i.e. until line 42. The rest of the code, which is specific to BL1, could be moved to the call site in arm_bl1_platform_setup(). This would also have the benefit of eliminating the \"if (image_id \u003d\u003d FW_CONFIG_ID)\" condition because we would already know which config file we\u0027ve just loaded. For this to work, arm_bl1_platform_setup() needs to know the address where the config file has been loaded, for that we could make fconf_load_config() return image_info.image_base.\n\nHow does that sound?",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 18,
        "endChar": 45
      },
      "revId": "c7081286e5905c18af700797ef8d77d45c5ea534",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "001b7062_06f94c35",
        "filename": "lib/fconf/fconf.c",
        "patchSetId": 10
      },
      "lineNbr": 18,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2020-06-18T12:41:51Z",
      "side": 1,
      "message": "Yes, I too not in favour of defines use in lib (though some instance already exist in the lib directory hence taken this approach). \n\nIMO, there are 2 ways to have this as generic function:\n1. Remove #ifdef IMAGE_BL1 from this function assuming function to be called only from BL1 and make it generic. (as per fconf design perspective)\n2. As you suggested, we can retain the code till line 42 and then move rest of the code to arm_bl1_platform_setup. We can use GETTER function in arm_bl1_platform_setup to retrieve \naddress of fw_config.(so no need to return address from this function).\n\nIMO, option 2 is better. Again, can it be done as part of later on patches as this function currently really meant for ARM platform and did not break any other platform.",
      "parentUuid": "dedc7d52_0d8b28ec",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 18,
        "endChar": 45
      },
      "revId": "c7081286e5905c18af700797ef8d77d45c5ea534",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ea4c2e35_4e75c021",
        "filename": "lib/fconf/fconf.c",
        "patchSetId": 10
      },
      "lineNbr": 18,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2020-06-18T13:46:37Z",
      "side": 1,
      "message": "Updated the code to take approach 2.",
      "parentUuid": "001b7062_06f94c35",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 18,
        "endChar": 45
      },
      "revId": "c7081286e5905c18af700797ef8d77d45c5ea534",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c232c272_35d37a56",
        "filename": "lib/fconf/fconf.c",
        "patchSetId": 10
      },
      "lineNbr": 52,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2020-06-22T12:40:27Z",
      "side": 1,
      "message": "I am confused... I see this code being deleted from this function between patch sets #10 and #12 (as discussed) but I don\u0027t see where it\u0027s being moved. I expected this code to move to arm_bl1_platform_setup(). Did I miss/misunderstand anything? Perhaps it\u0027s reintroduced in a subsequent patch (I haven\u0027t looked at them again yet)?",
      "range": {
        "startLine": 44,
        "startChar": 0,
        "endLine": 52,
        "endChar": 1
      },
      "revId": "c7081286e5905c18af700797ef8d77d45c5ea534",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4ff2b46c_2d19feda",
        "filename": "lib/fconf/fconf.c",
        "patchSetId": 10
      },
      "lineNbr": 52,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2020-06-22T12:57:55Z",
      "side": 1,
      "message": "Hi Sandrine,\n\nCode is added in \"arm_bl1_platform_setup\" as part of below patch:\nhttps://review.trustedfirmware.org/c/TF-A/trusted-firmware-a/+/4530/13",
      "parentUuid": "c232c272_35d37a56",
      "range": {
        "startLine": 44,
        "startChar": 0,
        "endLine": 52,
        "endChar": 1
      },
      "revId": "c7081286e5905c18af700797ef8d77d45c5ea534",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    }
  ]
}