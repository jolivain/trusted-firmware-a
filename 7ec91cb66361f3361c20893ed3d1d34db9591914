{
  "comments": [
    {
      "key": {
        "uuid": "8cc78d5f_655f5b8a",
        "filename": "plat/arm/board/rdn1edge/rdn1edge_plat.c",
        "patchSetId": 15
      },
      "lineNbr": 61,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2020-02-03T10:13:04Z",
      "side": 1,
      "message": "Please paste the build error you get when removing the IMAGE_BL31 build macro in this file.",
      "range": {
        "startLine": 61,
        "startChar": 12,
        "endLine": 61,
        "endChar": 22
      },
      "revId": "7ec91cb66361f3361c20893ed3d1d34db9591914",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c610f6a5_27525a18",
        "filename": "plat/arm/board/rdn1edge/rdn1edge_plat.c",
        "patchSetId": 15
      },
      "lineNbr": 61,
      "author": {
        "id": 1000263
      },
      "writtenOn": "2020-02-03T11:33:30Z",
      "side": 1,
      "message": "With the define removed:\n\n \u003e diff --git a/plat/arm/board/rdn1edge/rdn1edge_plat.c b/plat/arm/board/rdn1edge/rdn1edge_plat.c\n \u003e index 11453ac..f0e5906 100644\n \u003e --- a/plat/arm/board/rdn1edge/rdn1edge_plat.c\n \u003e +++ b/plat/arm/board/rdn1edge/rdn1edge_plat.c\n \u003e @@ -11,7 +11,6 @@\n \u003e  #include \u003csgi_base_platform_def.h\u003e\n \u003e  #include \u003csgi_plat.h\u003e\n \u003e\n \u003e -#if defined(IMAGE_BL31)\n \u003e  static const mmap_region_t rdn1edge_dynamic_mmap[] \u003d {\n \u003e         ARM_MAP_SHARED_RAM_REMOTE_CHIP(1),\n \u003e         CSS_SGI_MAP_DEVICE_REMOTE_CHIP(1),\n \u003e @@ -39,7 +38,6 @@ static uintptr_t rdn1e1_multichip_gicr_frames[] \u003d {\n \u003e                 CSS_SGI_REMOTE_CHIP_MEM_OFFSET(1),      /* Chip 1\u0027s GICR BASE */\n \u003e         0U                                              /* Zero Termination */\n \u003e  };\n \u003e -#endif\n \u003e\n \u003e  unsigned int plat_arm_sgi_get_platform_id(void)\n \u003e  {\n \u003e @@ -58,7 +56,6 @@ unsigned int plat_arm_sgi_get_multi_chip_mode(void)\n \u003e                         SID_MULTI_CHIP_MODE_MASK) \u003e\u003e SID_MULTI_CHIP_MODE_SHIFT;\n \u003e  }\n \u003e\n \u003e -#if defined(IMAGE_BL31)\n \u003e  void bl31_platform_setup(void)\n \u003e  {\n \u003e         int i, ret;\n \u003e @@ -86,4 +83,3 @@ void bl31_platform_setup(void)\n \u003e\n \u003e         sgi_bl31_common_platform_setup();\n \u003e  }\n \u003e -#endif\n\n\nGetting this build error:\n\n  CC      plat/arm/board/rdn1edge/rdn1edge_err.c\nplat/arm/board/rdn1edge/rdn1edge_plat.c: In function \u0027bl31_platform_setup\u0027:\nplat/arm/board/rdn1edge/rdn1edge_plat.c:68:10: error: implicit declaration of function \u0027mmap_add_dynamic_region\u0027 [-Werror\u003dimplicit-function-declaration]\n    ret \u003d mmap_add_dynamic_region(\n          ^~~~~~~~~~~~~~~~~~~~~~~\n  CC      drivers/arm/tzc/tzc_dmc620.c\n  CC      lib/utils/mem_region.c\n  CC      plat/arm/common/arm_nor_psci_mem_protect.c\ncc1: all warnings being treated as errors\nMakefile:922: recipe for target \u0027build/rdn1edge/debug/bl2/rdn1edge_plat.o\u0027 failed\nmake: *** [build/rdn1edge/debug/bl2/rdn1edge_plat.o] Error 1\nmake: *** Waiting for unfinished jobs....\n\n\nThis could be resolved by making PLAT_XLAT_TABLES_DYNAMIC to all staged (at the cost of more memory), but wanted to be conservative.",
      "parentUuid": "8cc78d5f_655f5b8a",
      "range": {
        "startLine": 61,
        "startChar": 12,
        "endLine": 61,
        "endChar": 22
      },
      "revId": "7ec91cb66361f3361c20893ed3d1d34db9591914",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "53f7287e_b3acdac6",
        "filename": "plat/arm/board/rdn1edge/rdn1edge_plat.c",
        "patchSetId": 15
      },
      "lineNbr": 61,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2020-02-03T11:54:57Z",
      "side": 1,
      "message": "Hmm, I see. Can we just just add #if PLAT_XLAT_TABLES_DYNAMIC as the check condition in line 65 (endif in line 86) and also line 14 (endif in 42) ?\n\nAlso add a comment that IMAGE_BL31 sets PLAT_XLAT_TABLES_DYNAMIC as it uses the the dynamic mapping capability for multi-chip mode above the #if",
      "parentUuid": "c610f6a5_27525a18",
      "range": {
        "startLine": 61,
        "startChar": 12,
        "endLine": 61,
        "endChar": 22
      },
      "revId": "7ec91cb66361f3361c20893ed3d1d34db9591914",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8bd6bef0_561cbd84",
        "filename": "plat/arm/board/rdn1edge/rdn1edge_plat.c",
        "patchSetId": 15
      },
      "lineNbr": 61,
      "author": {
        "id": 1000263
      },
      "writtenOn": "2020-02-03T12:10:47Z",
      "side": 1,
      "message": "We chose to have IMAGE_BL31 macro instead of PLAT_XLAT_TABLES_DYNAMIC macro, since it is more readable to have a #if IMAGE_BL31 block for bl31_platform_setup function.\n\nHaving #if PLAT_XLAT_TABLES_DYNAMIC and letting the linker to decide whether function should be linked or not will be implicit.",
      "parentUuid": "53f7287e_b3acdac6",
      "range": {
        "startLine": 61,
        "startChar": 12,
        "endLine": 61,
        "endChar": 22
      },
      "revId": "7ec91cb66361f3361c20893ed3d1d34db9591914",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "01122a59_f78c7e24",
        "filename": "plat/arm/board/rdn1edge/rdn1edge_plat.c",
        "patchSetId": 15
      },
      "lineNbr": 61,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2020-02-04T14:50:34Z",
      "side": 1,
      "message": "OK, in that case add a comment as to why the IMAGE_BL31 macro is required. i.e you need to explain that this is required because \"...PLAT_XLAT_DYNAMIC need to be set but only for BL31.\"",
      "parentUuid": "8bd6bef0_561cbd84",
      "range": {
        "startLine": 61,
        "startChar": 12,
        "endLine": 61,
        "endChar": 22
      },
      "revId": "7ec91cb66361f3361c20893ed3d1d34db9591914",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c65b811b_7711d5a7",
        "filename": "plat/arm/board/rdn1edge/rdn1edge_plat.c",
        "patchSetId": 15
      },
      "lineNbr": 68,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2020-02-03T10:13:04Z",
      "side": 1,
      "message": "nit: I should have been more clear in my previous comment. Remove BL31 from this print.",
      "range": {
        "startLine": 68,
        "startChar": 8,
        "endLine": 68,
        "endChar": 13
      },
      "revId": "7ec91cb66361f3361c20893ed3d1d34db9591914",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5caf6378_8986c146",
        "filename": "plat/arm/board/rdn1edge/rdn1edge_plat.c",
        "patchSetId": 15
      },
      "lineNbr": 68,
      "author": {
        "id": 1000263
      },
      "writtenOn": "2020-02-03T12:10:47Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "c65b811b_7711d5a7",
      "range": {
        "startLine": 68,
        "startChar": 8,
        "endLine": 68,
        "endChar": 13
      },
      "revId": "7ec91cb66361f3361c20893ed3d1d34db9591914",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    }
  ]
}