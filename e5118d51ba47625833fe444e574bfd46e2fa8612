{
  "comments": [
    {
      "key": {
        "uuid": "2e2d8ff5_cd105f80",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2019-02-27T16:29:33Z",
      "side": 1,
      "message": "I think we could come up with a better commit message, something that explains the rationale more clearly. Here\u0027s my attempt at it, assuming I got this right:\n\n Reduce memory needed for CoT description\n\n When Trusted Board Boot is enabled, we need to specify the Chain of\n Trust (CoT) of the BL1 and BL2 images. A CoT consists of an array\n of image descriptors. The authentication module assumes that each\n image descriptor in this array is indexed by its unique image identifier.\n For example, the Trusted Boot Firmware Certificate has to be at index \n [TRUSTED_BOOT_FW_CERT_ID].\n\n Unique image identifiers may not necessarily be consecutive. Also, a given\n BL image might not use all image descriptors. For example, BL1 does not\n need any of the descriptors related to BL31. As a result, the CoT array\n might contain holes, which unnecessarily takes up space in the BL binary.\n\n Using pointers to auth_img_desc_t structures (rather than structures\n themselves) in the CoT description significantly softens this issue.\n\n This patch also compiles out unnecessary structures for images that BL1\n or BL2 doesn\u0027t need to verify. For example, verifying the BL31 image is\n the responsibility of BL2 so BL1 does not need any of the data structures\n describing BL31.",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 10,
        "endChar": 27
      },
      "revId": "e5118d51ba47625833fe444e574bfd46e2fa8612",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4f7a47cc_0a665029",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1000054
      },
      "writtenOn": "2019-03-11T13:05:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2e2d8ff5_cd105f80",
      "range": {
        "startLine": 7,
        "startChar": 0,
        "endLine": 10,
        "endChar": 27
      },
      "revId": "e5118d51ba47625833fe444e574bfd46e2fa8612",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ff848acd_c5a6f6b9",
        "filename": "drivers/auth/tbbr/tbbr_cot.c",
        "patchSetId": 1
      },
      "lineNbr": 122,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2019-02-27T16:29:33Z",
      "side": 1,
      "message": "nit: You could remove 1 level of indentation.",
      "range": {
        "startLine": 122,
        "startChar": 0,
        "endLine": 122,
        "endChar": 2
      },
      "revId": "e5118d51ba47625833fe444e574bfd46e2fa8612",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2682b07f_ddb8b6c0",
        "filename": "drivers/auth/tbbr/tbbr_cot.c",
        "patchSetId": 1
      },
      "lineNbr": 784,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2019-02-27T16:29:33Z",
      "side": 1,
      "message": "nit: remove",
      "range": {
        "startLine": 784,
        "startChar": 10,
        "endLine": 784,
        "endChar": 14
      },
      "revId": "e5118d51ba47625833fe444e574bfd46e2fa8612",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1a630bf7_4cf33ca7",
        "filename": "drivers/auth/tbbr/tbbr_cot.c",
        "patchSetId": 1
      },
      "lineNbr": 790,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2019-02-27T16:29:33Z",
      "side": 1,
      "message": "AFAICS, we\u0027ve lost some \"constness\" in the process.\n* We used to have an array of constant descriptor structures.\n* Now we have an array of *mutable* pointers to (still-)constant descriptor structures.\n\nThis means the compiler would happily let me update the entries of the cot_desc[] array. You can try setting an entry somewhere in the code to convince yourself, like:\n\n cot_desc_ptr[0] \u003d NULL;\n\nIf there is no reason to update these pointers then we should qualify them with const.",
      "range": {
        "startLine": 790,
        "startChar": 0,
        "endLine": 790,
        "endChar": 40
      },
      "revId": "e5118d51ba47625833fe444e574bfd46e2fa8612",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3dacf3d3_d92da71d",
        "filename": "drivers/auth/tbbr/tbbr_cot.c",
        "patchSetId": 1
      },
      "lineNbr": 790,
      "author": {
        "id": 1000054
      },
      "writtenOn": "2019-03-11T13:05:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1a630bf7_4cf33ca7",
      "range": {
        "startLine": 790,
        "startChar": 0,
        "endLine": 790,
        "endChar": 40
      },
      "revId": "e5118d51ba47625833fe444e574bfd46e2fa8612",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "62483dd3_19a6f294",
        "filename": "include/drivers/auth/auth_mod.h",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2019-02-27T16:29:33Z",
      "side": 1,
      "message": "nit: This is no longer true, now it is an array of pointers to auth_img_desc structures.",
      "range": {
        "startLine": 41,
        "startChar": 35,
        "endLine": 41,
        "endChar": 65
      },
      "revId": "e5118d51ba47625833fe444e574bfd46e2fa8612",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "710f02da_de0327b0",
        "filename": "include/drivers/auth/auth_mod.h",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1000054
      },
      "writtenOn": "2019-03-11T13:05:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "62483dd3_19a6f294",
      "range": {
        "startLine": 41,
        "startChar": 35,
        "endLine": 41,
        "endChar": 65
      },
      "revId": "e5118d51ba47625833fe444e574bfd46e2fa8612",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    }
  ]
}