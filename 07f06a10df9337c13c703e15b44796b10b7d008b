{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "6ae92f3f_98f9234b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2021-07-01T08:47:14Z",
      "side": 1,
      "message": "Hi guys, \n\nThese 3 patches revisit how we handle errors in the TCG event log driver. We’ve got a number of error cases that panic the firmware today and I think this is not what we want. I reckon that some of these errors should be treated as programming errors (using assert()). Some other errors cannot happen at all, unless I am missing something (in which case I would be glad to find out the concerns). \n\nThere are some more errors which I have not revisited yet, namely how we deal with a failure to pass the event log to the secure and non-secure worlds. These look a bit more complicated to assess to me. This is currently handled by platform hooks and so I wonder whether the platform itself should choose the right error management policy, whether it’s panicking the firmware or something else. I am planning to leave this issue open for now and come back to it later. \n\nThis patch stack is currently split in 3 patches to make the review easier. I might squash them into a single patch at the end if people think this is better, but I’d rather do it like this rather than the other way around. ",
      "revId": "07f06a10df9337c13c703e15b44796b10b7d008b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "124b96ee_c4f48f9a",
        "filename": "drivers/measured_boot/event_log.c",
        "patchSetId": 1
      },
      "lineNbr": 197,
      "author": {
        "id": 1000105
      },
      "writtenOn": "2021-07-01T09:59:51Z",
      "side": 1,
      "message": "These \u0027ptr\u0027 checks were useful to find issues with code regarding pointer arithmetic.\nWould it make sense to convert these checks into \u0027assert()\u0027s?",
      "revId": "07f06a10df9337c13c703e15b44796b10b7d008b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c74a05bc_0dff620f",
        "filename": "drivers/measured_boot/event_log.c",
        "patchSetId": 1
      },
      "lineNbr": 197,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2021-07-01T11:28:21Z",
      "side": 1,
      "message": "Considering that ID_EVENT_SIZE is defined as follows:\n\n #define ID_EVENT_SIZE\t(sizeof(id_event_headers_t) + \\\n\t\t\t(sizeof(id_event_algorithm_size_t) * HASH_ALG_COUNT) + \\\n\t\t\tsizeof(id_event_struct_data_t))\n\nand that the code increments ptr by sizeof(id_event_headers_t), then by sizeof(id_event_algorithm_size_t), and so on, I think this would just check what we\u0027ve just done above... Personally I don\u0027t think it\u0027s useful to keep these checks at all, even as assertions.",
      "parentUuid": "124b96ee_c4f48f9a",
      "revId": "07f06a10df9337c13c703e15b44796b10b7d008b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}