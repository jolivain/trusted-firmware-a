{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "3ff770a4_65316f0a",
        "filename": "plat/st/stm32mp1/bl2_plat_setup.c",
        "patchSetId": 3
      },
      "lineNbr": 474,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2021-11-29T18:42:15Z",
      "side": 1,
      "message": "Just curious to know, is this explicit clock enablement required to access this \u0027bkpr_fwu_boot_idx_addr\u0027 address?",
      "range": {
        "startLine": 473,
        "startChar": 0,
        "endLine": 474,
        "endChar": 50
      },
      "revId": "ece2477e99a827f770f5c80499a315c876dd4b62",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a27181aa_6070e601",
        "filename": "plat/st/stm32mp1/bl2_plat_setup.c",
        "patchSetId": 3
      },
      "lineNbr": 474,
      "author": {
        "id": 1000661
      },
      "writtenOn": "2021-11-30T05:55:20Z",
      "side": 1,
      "message": "\u003e Just curious to know, is this explicit clock enablement required to access this \u0027bkpr_fwu_boot_idx_addr\u0027 address?\n\nI was given this sequence by an engineer from ST. I guess Yann can comment on whether this is really needed here.",
      "parentUuid": "3ff770a4_65316f0a",
      "range": {
        "startLine": 473,
        "startChar": 0,
        "endLine": 474,
        "endChar": 50
      },
      "revId": "ece2477e99a827f770f5c80499a315c876dd4b62",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0ab4e129_1dd986af",
        "filename": "plat/st/stm32mp1/bl2_plat_setup.c",
        "patchSetId": 3
      },
      "lineNbr": 474,
      "author": {
        "id": 1000103
      },
      "writtenOn": "2021-11-30T08:50:17Z",
      "side": 1,
      "message": "Yes, the backup registers where we put the information are in the RTCTAMP peripheral, which requires the clock to be explicitly enabled.\nThe clock should be disabled if you don\u0027t need to copy something else in the backup registers after that.",
      "parentUuid": "a27181aa_6070e601",
      "range": {
        "startLine": 473,
        "startChar": 0,
        "endLine": 474,
        "endChar": 50
      },
      "revId": "ece2477e99a827f770f5c80499a315c876dd4b62",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6a2f62a3_043034c3",
        "filename": "plat/st/stm32mp1/bl2_plat_setup.c",
        "patchSetId": 3
      },
      "lineNbr": 474,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2021-11-30T09:31:22Z",
      "side": 1,
      "message": "Thanks for the explanation!\n\nCan we add \u0027disable clock\u0027 step as below? \n\nstm32mp_clk_enable(RTCAPB);\nmmio_write_32(bkpr_fwu_boot_idx_addr, boot_idx);\nstm32mp_clk_disable(RTCAPB);\n\nI don\u0027t think we need to copy anything else in the backup register after these steps. Even if it is needed clock can be explicitly for that purpose.",
      "parentUuid": "0ab4e129_1dd986af",
      "range": {
        "startLine": 473,
        "startChar": 0,
        "endLine": 474,
        "endChar": 50
      },
      "revId": "ece2477e99a827f770f5c80499a315c876dd4b62",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "74a059b0_fa8b8726",
        "filename": "plat/st/stm32mp1/include/boot_api.h",
        "patchSetId": 3
      },
      "lineNbr": 120,
      "author": {
        "id": 1000103
      },
      "writtenOn": "2021-11-30T08:50:17Z",
      "side": 1,
      "message": "I don\u0027t think you should use this register, but I\u0027ll check with Lionel. And this file comes from ROM code, so any backup register we may use in TF-A shouldn\u0027t be described here. Check what is currently done in plat/st/stm32mp1/stm32mp1_context.c.",
      "revId": "ece2477e99a827f770f5c80499a315c876dd4b62",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "52e8a607_cc546417",
        "filename": "plat/st/stm32mp1/include/boot_api.h",
        "patchSetId": 3
      },
      "lineNbr": 120,
      "author": {
        "id": 1000103
      },
      "writtenOn": "2021-11-30T09:01:54Z",
      "side": 1,
      "message": "FYI the code in stm32mp1_context.c will move, as soon as Patrick\u0027s patches are merged.",
      "parentUuid": "74a059b0_fa8b8726",
      "revId": "ece2477e99a827f770f5c80499a315c876dd4b62",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}