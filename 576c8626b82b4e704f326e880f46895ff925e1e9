{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "2a08fe4d_5284a622",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 7,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-01-27T10:10:26Z",
      "side": 1,
      "message": "nit: typo",
      "range": {
        "startLine": 7,
        "startChar": 14,
        "endLine": 7,
        "endChar": 23
      },
      "revId": "576c8626b82b4e704f326e880f46895ff925e1e9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5f050d59_207e28c9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-01-27T10:49:47Z",
      "side": 1,
      "message": "Nice write up!",
      "revId": "576c8626b82b4e704f326e880f46895ff925e1e9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4be6414b_6c22b90b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2022-02-16T11:21:39Z",
      "side": 1,
      "message": "Thanks Olivier for the comments",
      "revId": "576c8626b82b4e704f326e880f46895ff925e1e9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a7b16bab_87f47de6",
        "filename": "docs/design_documents/context_mgmt_rework.rst",
        "patchSetId": 3
      },
      "lineNbr": 50,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-01-27T10:10:26Z",
      "side": 1,
      "message": "nit: which is?",
      "range": {
        "startLine": 50,
        "startChar": 71,
        "endLine": 50,
        "endChar": 76
      },
      "revId": "576c8626b82b4e704f326e880f46895ff925e1e9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "795fab11_238cf9db",
        "filename": "docs/design_documents/context_mgmt_rework.rst",
        "patchSetId": 3
      },
      "lineNbr": 50,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-01-27T10:10:26Z",
      "side": 1,
      "message": "Just an obvious wording detail, pre-Arm CCA, EL3 is also secure world.",
      "range": {
        "startLine": 49,
        "startChar": 33,
        "endLine": 50,
        "endChar": 12
      },
      "revId": "576c8626b82b4e704f326e880f46895ff925e1e9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9891e91d_0e7b6ccd",
        "filename": "docs/design_documents/context_mgmt_rework.rst",
        "patchSetId": 3
      },
      "lineNbr": 50,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2022-02-16T11:21:39Z",
      "side": 1,
      "message": "clarified.",
      "parentUuid": "795fab11_238cf9db",
      "range": {
        "startLine": 49,
        "startChar": 33,
        "endLine": 50,
        "endChar": 12
      },
      "revId": "576c8626b82b4e704f326e880f46895ff925e1e9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "db461634_b70b58a1",
        "filename": "docs/design_documents/context_mgmt_rework.rst",
        "patchSetId": 3
      },
      "lineNbr": 50,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2022-02-16T11:21:39Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a7b16bab_87f47de6",
      "range": {
        "startLine": 50,
        "startChar": 71,
        "endLine": 50,
        "endChar": 76
      },
      "revId": "576c8626b82b4e704f326e880f46895ff925e1e9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5d4df175_46144ef5",
        "filename": "docs/design_documents/context_mgmt_rework.rst",
        "patchSetId": 3
      },
      "lineNbr": 57,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-01-27T10:10:26Z",
      "side": 1,
      "message": "Is the new assumption that NS EL2 is always populated (by some Hypervisor)?",
      "range": {
        "startLine": 56,
        "startChar": 49,
        "endLine": 57,
        "endChar": 70
      },
      "revId": "576c8626b82b4e704f326e880f46895ff925e1e9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "53fd1864_4b522d89",
        "filename": "docs/design_documents/context_mgmt_rework.rst",
        "patchSetId": 3
      },
      "lineNbr": 57,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-01-27T10:10:26Z",
      "side": 1,
      "message": "nit: full stop",
      "range": {
        "startLine": 57,
        "startChar": 66,
        "endLine": 57,
        "endChar": 70
      },
      "revId": "576c8626b82b4e704f326e880f46895ff925e1e9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0407e69c_36248d9e",
        "filename": "docs/design_documents/context_mgmt_rework.rst",
        "patchSetId": 3
      },
      "lineNbr": 57,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2022-02-16T11:21:39Z",
      "side": 1,
      "message": "That seems to be case although we can support the skip NS EL1 if there is still a market need for this.",
      "parentUuid": "5d4df175_46144ef5",
      "range": {
        "startLine": 56,
        "startChar": 49,
        "endLine": 57,
        "endChar": 70
      },
      "revId": "576c8626b82b4e704f326e880f46895ff925e1e9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ce61bdb0_85737cb2",
        "filename": "docs/design_documents/context_mgmt_rework.rst",
        "patchSetId": 3
      },
      "lineNbr": 57,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2022-02-16T11:21:39Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "53fd1864_4b522d89",
      "range": {
        "startLine": 57,
        "startChar": 66,
        "endLine": 57,
        "endChar": 70
      },
      "revId": "576c8626b82b4e704f326e880f46895ff925e1e9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "55384d02_b66da4fc",
        "filename": "docs/design_documents/context_mgmt_rework.rst",
        "patchSetId": 3
      },
      "lineNbr": 81,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-01-27T10:10:26Z",
      "side": 1,
      "message": "I get the intention. Though the current way was designed with in mind that the operation is symmetrical for NS/S save/restore operations. While I admit the method is rigid, there is less \u0027risk\u0027 of missing an arch feature provided the same register set is used for world switch one way and the other.\nI wonder if there can be problems when RMMD and SPMD do not save/restore the exact same set of registers. I\u0027m thinking of data leak or state corruption between worlds. Should there be rules to be enforced?",
      "revId": "576c8626b82b4e704f326e880f46895ff925e1e9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3d510c0a_7c89666a",
        "filename": "docs/design_documents/context_mgmt_rework.rst",
        "patchSetId": 3
      },
      "lineNbr": 81,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2022-02-16T11:21:39Z",
      "side": 1,
      "message": "Hmm, Entry and exit from a world is managed by the dispatcher. You are right that if a set of reg is missed this will be a security issue. Realms and Secure worlds are going to diverge in terms of capability required as Realms probably need all the features on the CPU where as Secure world can restrict itself to a subset of feature of CPUs (eg: trace, Debug, PMU are not capabilities needed for Secure world).\n\nGiven that, I think we can do something here to atleast save the common set in a single function eg : all mandatory ARMv9.0 EL2 regs can be done by a helper. We can maintain a some  documentation within the source tree to list all register set saved and restored for Realm and Secure worlds. I think lets look at how the implementation looks like and share code if we see commonality.",
      "parentUuid": "55384d02_b66da4fc",
      "revId": "576c8626b82b4e704f326e880f46895ff925e1e9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a16a02a4_1862c213",
        "filename": "docs/design_documents/context_mgmt_rework.rst",
        "patchSetId": 3
      },
      "lineNbr": 106,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-01-27T10:10:26Z",
      "side": 1,
      "message": "nit: and performs the initialization for the given world?",
      "range": {
        "startLine": 105,
        "startChar": 49,
        "endLine": 106,
        "endChar": 14
      },
      "revId": "576c8626b82b4e704f326e880f46895ff925e1e9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "79f5ab00_55a681ab",
        "filename": "docs/design_documents/context_mgmt_rework.rst",
        "patchSetId": 3
      },
      "lineNbr": 106,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2022-02-16T11:21:39Z",
      "side": 1,
      "message": "reworded",
      "parentUuid": "a16a02a4_1862c213",
      "range": {
        "startLine": 105,
        "startChar": 49,
        "endLine": 106,
        "endChar": 14
      },
      "revId": "576c8626b82b4e704f326e880f46895ff925e1e9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "89f73033_56152cc9",
        "filename": "docs/design_documents/context_mgmt_rework.rst",
        "patchSetId": 3
      },
      "lineNbr": 109,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-01-27T10:10:26Z",
      "side": 1,
      "message": "typo",
      "range": {
        "startLine": 109,
        "startChar": 22,
        "endLine": 109,
        "endChar": 31
      },
      "revId": "576c8626b82b4e704f326e880f46895ff925e1e9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "91f96362_dd4a2f87",
        "filename": "docs/design_documents/context_mgmt_rework.rst",
        "patchSetId": 3
      },
      "lineNbr": 109,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2022-02-16T11:21:39Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "89f73033_56152cc9",
      "range": {
        "startLine": 109,
        "startChar": 22,
        "endLine": 109,
        "endChar": 31
      },
      "revId": "576c8626b82b4e704f326e880f46895ff925e1e9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8a171ef2_895dc0d4",
        "filename": "docs/design_documents/context_mgmt_rework.rst",
        "patchSetId": 3
      },
      "lineNbr": 125,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-01-27T10:10:26Z",
      "side": 1,
      "message": "rephrase?",
      "range": {
        "startLine": 125,
        "startChar": 10,
        "endLine": 125,
        "endChar": 39
      },
      "revId": "576c8626b82b4e704f326e880f46895ff925e1e9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "427ccfe2_a00d3e77",
        "filename": "docs/design_documents/context_mgmt_rework.rst",
        "patchSetId": 3
      },
      "lineNbr": 125,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2022-02-16T11:21:39Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8a171ef2_895dc0d4",
      "range": {
        "startLine": 125,
        "startChar": 10,
        "endLine": 125,
        "endChar": 39
      },
      "revId": "576c8626b82b4e704f326e880f46895ff925e1e9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2e95e43f_76783580",
        "filename": "docs/design_documents/context_mgmt_rework.rst",
        "patchSetId": 3
      },
      "lineNbr": 128,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-01-27T10:10:26Z",
      "side": 1,
      "message": "When the SPMC resides at SEL2:\nNS to S world switch saves NS EL1 context from the SPMD.\nS to NS world switch restores NS EL1 context from the SPMD.\n\u0027Exit to secure\u0027 should be rephrased \u0027Exit to SEL2\u0027 because EL3 is already secure (similarly for \u0027Entry from secure\u0027)",
      "range": {
        "startLine": 128,
        "startChar": 0,
        "endLine": 128,
        "endChar": 23
      },
      "revId": "576c8626b82b4e704f326e880f46895ff925e1e9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ec30ebb1_13e131c9",
        "filename": "docs/design_documents/context_mgmt_rework.rst",
        "patchSetId": 3
      },
      "lineNbr": 128,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2022-02-16T11:21:39Z",
      "side": 1,
      "message": "Hmm, yes, but eventually we should try to avoid saving and restoring EL1 regs if SPM can do the necessary to save and restore. I will add this to the diagram and add a note on these lines.",
      "parentUuid": "2e95e43f_76783580",
      "range": {
        "startLine": 128,
        "startChar": 0,
        "endLine": 128,
        "endChar": 23
      },
      "revId": "576c8626b82b4e704f326e880f46895ff925e1e9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "830dce2c_ab766f19",
        "filename": "docs/design_documents/context_mgmt_rework.rst",
        "patchSetId": 3
      },
      "lineNbr": 166,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-01-27T10:49:47Z",
      "side": 1,
      "message": "typo",
      "range": {
        "startLine": 166,
        "startChar": 3,
        "endLine": 166,
        "endChar": 11
      },
      "revId": "576c8626b82b4e704f326e880f46895ff925e1e9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f67676df_0a2bda87",
        "filename": "docs/design_documents/context_mgmt_rework.rst",
        "patchSetId": 3
      },
      "lineNbr": 166,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2022-02-16T11:21:39Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "830dce2c_ab766f19",
      "range": {
        "startLine": 166,
        "startChar": 3,
        "endLine": 166,
        "endChar": 11
      },
      "revId": "576c8626b82b4e704f326e880f46895ff925e1e9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f374c9da_76a6d184",
        "filename": "docs/design_documents/context_mgmt_rework.rst",
        "patchSetId": 3
      },
      "lineNbr": 167,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-01-27T10:49:47Z",
      "side": 1,
      "message": "remove?",
      "range": {
        "startLine": 167,
        "startChar": 7,
        "endLine": 167,
        "endChar": 12
      },
      "revId": "576c8626b82b4e704f326e880f46895ff925e1e9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f676f88b_3d6b41ab",
        "filename": "docs/design_documents/context_mgmt_rework.rst",
        "patchSetId": 3
      },
      "lineNbr": 167,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2022-02-16T11:21:39Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f374c9da_76a6d184",
      "range": {
        "startLine": 167,
        "startChar": 7,
        "endLine": 167,
        "endChar": 12
      },
      "revId": "576c8626b82b4e704f326e880f46895ff925e1e9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fea3c5d3_96165200",
        "filename": "docs/design_documents/context_mgmt_rework.rst",
        "patchSetId": 3
      },
      "lineNbr": 171,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-01-27T10:49:47Z",
      "side": 1,
      "message": "typo",
      "range": {
        "startLine": 171,
        "startChar": 34,
        "endLine": 171,
        "endChar": 42
      },
      "revId": "576c8626b82b4e704f326e880f46895ff925e1e9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "33438fb5_18dfdcd9",
        "filename": "docs/design_documents/context_mgmt_rework.rst",
        "patchSetId": 3
      },
      "lineNbr": 171,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2022-02-16T11:21:39Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fea3c5d3_96165200",
      "range": {
        "startLine": 171,
        "startChar": 34,
        "endLine": 171,
        "endChar": 42
      },
      "revId": "576c8626b82b4e704f326e880f46895ff925e1e9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dc2153eb_75543240",
        "filename": "docs/design_documents/context_mgmt_rework.rst",
        "patchSetId": 3
      },
      "lineNbr": 174,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-01-27T10:49:47Z",
      "side": 1,
      "message": "Similar comments for NS-EL1 context save/restore in SPMD.",
      "range": {
        "startLine": 174,
        "startChar": 0,
        "endLine": 174,
        "endChar": 23
      },
      "revId": "576c8626b82b4e704f326e880f46895ff925e1e9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "29750ce1_f0d5c596",
        "filename": "docs/design_documents/context_mgmt_rework.rst",
        "patchSetId": 3
      },
      "lineNbr": 174,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2022-02-16T11:21:39Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "dc2153eb_75543240",
      "range": {
        "startLine": 174,
        "startChar": 0,
        "endLine": 174,
        "endChar": 23
      },
      "revId": "576c8626b82b4e704f326e880f46895ff925e1e9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b81bd8f5_d692bdd4",
        "filename": "docs/design_documents/context_mgmt_rework.rst",
        "patchSetId": 3
      },
      "lineNbr": 182,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-01-27T10:49:47Z",
      "side": 1,
      "message": "typo",
      "range": {
        "startLine": 182,
        "startChar": 11,
        "endLine": 182,
        "endChar": 19
      },
      "revId": "576c8626b82b4e704f326e880f46895ff925e1e9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "60a030a4_32c9151f",
        "filename": "docs/design_documents/context_mgmt_rework.rst",
        "patchSetId": 3
      },
      "lineNbr": 182,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2022-02-16T11:21:39Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b81bd8f5_d692bdd4",
      "range": {
        "startLine": 182,
        "startChar": 11,
        "endLine": 182,
        "endChar": 19
      },
      "revId": "576c8626b82b4e704f326e880f46895ff925e1e9",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}