{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "079455b4_dd8517dd",
        "filename": "plat/arm/board/tc/nv_counter_test.c",
        "patchSetId": 1
      },
      "lineNbr": 57,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2023-07-03T14:51:29Z",
      "side": 1,
      "message": "JFYI there is already a generic print in the caller function (tc_run_platform_tests), which these expect scripts capture: https://git.trustedfirmware.org/ci/tf-a-ci-scripts.git/tree/expect/crash_passed_test.exp\n\nSo we don\u0027t need to rely on this one from an expect script point of view (as in, this print does not need to gate the success/failure of these tests), although we can keep it for giving useful feedback to the user.\n\nI\u0027ll leave it to you whether you want to update this message anyway but I thought I should mention it for your awareness.",
      "range": {
        "startLine": 57,
        "startChar": 0,
        "endLine": 57,
        "endChar": 51
      },
      "revId": "6a31aac00f12d841aeba0564b2573e6f74125dfb",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7c58643a_095595fe",
        "filename": "plat/arm/board/tc/nv_counter_test.c",
        "patchSetId": 1
      },
      "lineNbr": 57,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2023-07-03T15:21:12Z",
      "side": 1,
      "message": "Actually I\u0027ve now realized that what I wrote above is not quite correct and things are a little more complex than that. Please refer to my other comment here for more details:\n\nhttps://review.trustedfirmware.org/c/ci/tf-a-ci-scripts/+/21774/1/expect-lava/crash_passed_test.exp",
      "parentUuid": "079455b4_dd8517dd",
      "range": {
        "startLine": 57,
        "startChar": 0,
        "endLine": 57,
        "endChar": 51
      },
      "revId": "6a31aac00f12d841aeba0564b2573e6f74125dfb",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "485d2547_364d762c",
        "filename": "plat/arm/board/tc/platform.mk",
        "patchSetId": 1
      },
      "lineNbr": 221,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2023-07-03T15:26:00Z",
      "side": 1,
      "message": "Feel free to ignore-\nSince many tests are coming under PLATFORM_TEST, will it make sense to create a separate makefile?  \nRather it seems more appropriate to place these NV counter and ROTPK tests files inside the plat/arm/board/tc/platform_test.mk. What do you think?",
      "range": {
        "startLine": 208,
        "startChar": 0,
        "endLine": 221,
        "endChar": 54
      },
      "revId": "6a31aac00f12d841aeba0564b2573e6f74125dfb",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "18251022_bfd115bb",
        "filename": "plat/arm/board/tc/platform.mk",
        "patchSetId": 1
      },
      "lineNbr": 221,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2023-07-04T06:59:45Z",
      "side": 1,
      "message": "I think that\u0027s a good idea too.",
      "parentUuid": "485d2547_364d762c",
      "range": {
        "startLine": 208,
        "startChar": 0,
        "endLine": 221,
        "endChar": 54
      },
      "revId": "6a31aac00f12d841aeba0564b2573e6f74125dfb",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "811c6491_c3bd16d9",
        "filename": "plat/arm/board/tc/rotpk_test.c",
        "patchSetId": 1
      },
      "lineNbr": 2,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2023-07-03T15:12:10Z",
      "side": 1,
      "message": "Should be \"Arm Limited\" (no \"And Contributors\").",
      "range": {
        "startLine": 2,
        "startChar": 23,
        "endLine": 2,
        "endChar": 51
      },
      "revId": "6a31aac00f12d841aeba0564b2573e6f74125dfb",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c8bd45b0_f56154e0",
        "filename": "plat/arm/board/tc/rotpk_test.c",
        "patchSetId": 1
      },
      "lineNbr": 24,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2023-07-03T15:26:00Z",
      "side": 1,
      "message": "return \u0027status\u0027 and similarly for all others below (to understand the exact error via error code).",
      "range": {
        "startLine": 24,
        "startChar": 9,
        "endLine": 24,
        "endChar": 11
      },
      "revId": "6a31aac00f12d841aeba0564b2573e6f74125dfb",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8f989c16_3350f855",
        "filename": "plat/arm/board/tc/rotpk_test.c",
        "patchSetId": 1
      },
      "lineNbr": 30,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2023-07-03T15:12:10Z",
      "side": 1,
      "message": "\"export\" sounds misleading to me. How about \"Failed to retrieve Secure ROTPK\"?",
      "range": {
        "startLine": 30,
        "startChar": 20,
        "endLine": 30,
        "endChar": 26
      },
      "revId": "6a31aac00f12d841aeba0564b2573e6f74125dfb",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "539a7814_bb3011a0",
        "filename": "plat/arm/board/tc/rotpk_test.c",
        "patchSetId": 1
      },
      "lineNbr": 35,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2023-07-03T15:26:00Z",
      "side": 1,
      "message": "nit: better use small \u0027i\u0027 as same is followed in other TF-A code.",
      "range": {
        "startLine": 35,
        "startChar": 10,
        "endLine": 35,
        "endChar": 12
      },
      "revId": "6a31aac00f12d841aeba0564b2573e6f74125dfb",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a8b3b56d_10593b4f",
        "filename": "plat/arm/board/tc/rotpk_test.c",
        "patchSetId": 1
      },
      "lineNbr": 38,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2023-07-03T15:12:10Z",
      "side": 1,
      "message": "Perhaps we should move this code to a helper function, something like print_hex(), and reuse it across all 3 ROTPKs?\n\nAlso, I would get rid of the \u0027\\r\u0027 line ending, this is very unusual in TF-A code. And let\u0027s also downcase the loop variable name (I -\u003e i), this would be more customary for TF-A as well.",
      "range": {
        "startLine": 35,
        "startChar": 0,
        "endLine": 38,
        "endChar": 18
      },
      "revId": "6a31aac00f12d841aeba0564b2573e6f74125dfb",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "386be5e0_d1c5b048",
        "filename": "plat/arm/board/tc/rotpk_test.c",
        "patchSetId": 1
      },
      "lineNbr": 64,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2023-07-03T15:26:00Z",
      "side": 1,
      "message": "nit: these looks like repeated things and can be handled via \u0027for\u0027 loop instead?",
      "range": {
        "startLine": 27,
        "startChar": 1,
        "endLine": 64,
        "endChar": 18
      },
      "revId": "6a31aac00f12d841aeba0564b2573e6f74125dfb",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "eeb0ed9f_a3f316af",
        "filename": "plat/arm/board/tc/rotpk_test.c",
        "patchSetId": 1
      },
      "lineNbr": 64,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2023-07-04T06:59:45Z",
      "side": 1,
      "message": "If we want to handle this via a \u0027for\u0027 loop then either we need to make an assumption that key ids are consecutive numbers (and that\u0027s a bad practice when we use macros) or build a local array of key ids and iterate over this one in this fashion:\n\n enum rss_key_id_builtin_t key_ids[] \u003d {\n   RSS_BUILTIN_KEY_ID_HOST_S_ROTPK\n   RSS_BUILTIN_KEY_ID_HOST_NS_ROTPK,\n   RSS_BUILTIN_KEY_ID_HOST_CCA_ROTPK,\n }\n\n for (int i \u003d 0; i \u003c ARRAY_SIZE(key_ids); i++) {\n   // rss_platform_key_read(key_ids[i])\n }\n\nAnd then you still have to handle the different key names for printf() calls. These can be added to the local array too but overall I think this adds unnecessary complexity....",
      "parentUuid": "386be5e0_d1c5b048",
      "range": {
        "startLine": 27,
        "startChar": 1,
        "endLine": 64,
        "endChar": 18
      },
      "revId": "6a31aac00f12d841aeba0564b2573e6f74125dfb",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "45c505f0_b4405dc8",
        "filename": "plat/arm/board/tc/rotpk_test.c",
        "patchSetId": 1
      },
      "lineNbr": 64,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2023-07-04T08:22:48Z",
      "side": 1,
      "message": "Is it possible to print the \u0027Key-IDs\u0027 instead? If these prints are really needed, then array of structs can still make it possible, right? I don\u0027t see any complexity here IMHO, this looks easier to read (also, futuristic additions are easily possible without replicating the code, this may not be true for the current implementation).\n\n struct key_id_info key_ids[] \u003d { \n    {.key_id \u003d RSS_BUILTIN_KEY_ID_HOST_S_ROTPK,  .key_id_name \u003d \"Secure-ROTPK\"},\n    {.key_id \u003d RSS_BUILTIN_KEY_ID_HOST_NS_ROTPK,  .key_id_name \u003d \"NS-ROTPK\"},\n    {.key_id \u003d RSS_BUILTIN_KEY_ID_HOST_CCA_ROTPK,  .key_id_name \u003d \"CCA-ROTPK\"}\n }\n\nIt is the developer\u0027s choice ðŸ˜Š.  I am not strongly against the existing approach",
      "parentUuid": "eeb0ed9f_a3f316af",
      "range": {
        "startLine": 27,
        "startChar": 1,
        "endLine": 64,
        "endChar": 18
      },
      "revId": "6a31aac00f12d841aeba0564b2573e6f74125dfb",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}