{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "d48e7f77_8af94107",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000103
      },
      "writtenOn": "2023-09-27T07:26:15Z",
      "side": 1,
      "message": "See comment about WARN messages in previous patch",
      "revId": "1ae501e422bf46bc700aba51c4b1097bebc773fc",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "94145bf2_2b77e7ce",
        "filename": "drivers/partition/partition.c",
        "patchSetId": 3
      },
      "lineNbr": 205,
      "author": {
        "id": 1000103
      },
      "writtenOn": "2023-09-27T07:26:15Z",
      "side": 1,
      "message": "this change was not necessary (and it is asked by checkpatch with --strict option, to align on opening parenthesis)",
      "revId": "1ae501e422bf46bc700aba51c4b1097bebc773fc",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b14d648a_222c19c8",
        "filename": "drivers/partition/partition.c",
        "patchSetId": 3
      },
      "lineNbr": 205,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2023-09-29T12:38:50Z",
      "side": 1,
      "message": "Adding a check on the \u0027result\u0027 value looked like a good thing to me. In fact, this even sounds like a bug fix to me, given that bytes_read is not initialized at line 200. Why would this change not be necessary (letting aside the WARN() addition)?",
      "parentUuid": "94145bf2_2b77e7ce",
      "revId": "1ae501e422bf46bc700aba51c4b1097bebc773fc",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "de08eff3_bee9e8fb",
        "filename": "drivers/partition/partition.c",
        "patchSetId": 3
      },
      "lineNbr": 205,
      "author": {
        "id": 1000923
      },
      "writtenOn": "2023-10-03T22:35:55Z",
      "side": 1,
      "message": "yes initialized it to zero now.",
      "parentUuid": "b14d648a_222c19c8",
      "revId": "1ae501e422bf46bc700aba51c4b1097bebc773fc",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0a148d11_d2d5eb16",
        "filename": "drivers/partition/partition.c",
        "patchSetId": 3
      },
      "lineNbr": 253,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2023-09-29T12:38:50Z",
      "side": 1,
      "message": "it\u0027s",
      "range": {
        "startLine": 253,
        "startChar": 6,
        "endLine": 253,
        "endChar": 9
      },
      "revId": "1ae501e422bf46bc700aba51c4b1097bebc773fc",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7d83b4a2_7c8e617f",
        "filename": "drivers/partition/partition.c",
        "patchSetId": 3
      },
      "lineNbr": 253,
      "author": {
        "id": 1000923
      },
      "writtenOn": "2023-10-03T22:33:13Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0a148d11_d2d5eb16",
      "range": {
        "startLine": 253,
        "startChar": 6,
        "endLine": 253,
        "endChar": 9
      },
      "revId": "1ae501e422bf46bc700aba51c4b1097bebc773fc",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "252c0786_16d7072d",
        "filename": "drivers/partition/partition.c",
        "patchSetId": 3
      },
      "lineNbr": 260,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2023-09-29T12:38:50Z",
      "side": 1,
      "message": "Why are these signed quantities? Why note size_t?",
      "range": {
        "startLine": 260,
        "startChar": 1,
        "endLine": 260,
        "endChar": 8
      },
      "revId": "1ae501e422bf46bc700aba51c4b1097bebc773fc",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "09ed379f_adc07e56",
        "filename": "drivers/partition/partition.c",
        "patchSetId": 3
      },
      "lineNbr": 260,
      "author": {
        "id": 1000923
      },
      "writtenOn": "2023-10-03T22:26:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "252c0786_16d7072d",
      "range": {
        "startLine": 260,
        "startChar": 1,
        "endLine": 260,
        "endChar": 8
      },
      "revId": "1ae501e422bf46bc700aba51c4b1097bebc773fc",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3e4d3258_6df765c5",
        "filename": "drivers/partition/partition.c",
        "patchSetId": 3
      },
      "lineNbr": 261,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2023-09-29T12:38:50Z",
      "side": 1,
      "message": "Again, there might be a type conflict involving a truncation here. This could be a worry.",
      "range": {
        "startLine": 261,
        "startChar": 1,
        "endLine": 261,
        "endChar": 21
      },
      "revId": "1ae501e422bf46bc700aba51c4b1097bebc773fc",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "87e837f1_eb943027",
        "filename": "drivers/partition/partition.c",
        "patchSetId": 3
      },
      "lineNbr": 261,
      "author": {
        "id": 1000923
      },
      "writtenOn": "2023-10-03T22:26:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3e4d3258_6df765c5",
      "range": {
        "startLine": 261,
        "startChar": 1,
        "endLine": 261,
        "endChar": 21
      },
      "revId": "1ae501e422bf46bc700aba51c4b1097bebc773fc",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "676cc3dc_e90506f6",
        "filename": "drivers/partition/partition.c",
        "patchSetId": 3
      },
      "lineNbr": 269,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2023-09-29T12:38:50Z",
      "side": 1,
      "message": "may be",
      "range": {
        "startLine": 269,
        "startChar": 24,
        "endLine": 269,
        "endChar": 29
      },
      "revId": "1ae501e422bf46bc700aba51c4b1097bebc773fc",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f1675b55_ef32701d",
        "filename": "drivers/partition/partition.c",
        "patchSetId": 3
      },
      "lineNbr": 269,
      "author": {
        "id": 1000923
      },
      "writtenOn": "2023-10-03T22:26:04Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "676cc3dc_e90506f6",
      "range": {
        "startLine": 269,
        "startChar": 24,
        "endLine": 269,
        "endChar": 29
      },
      "revId": "1ae501e422bf46bc700aba51c4b1097bebc773fc",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "03bb56dd_72180f50",
        "filename": "drivers/partition/partition.c",
        "patchSetId": 3
      },
      "lineNbr": 272,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2023-09-28T10:25:04Z",
      "side": 1,
      "message": "In accordance with the UEFI specification [1], backup GPT header information can be retrieved in two ways:\n 1. Retrieve the Alternate LBA from the header of the GPT \n 2. Using the SizeInLBA from the protected MBR (the protected way, as you implemented).  \n\nI\u0027m wondering if we can put some checks, such as (SizeInLBA \u003d\u003d 0 || SizeInLBA \u003d\u003d 0xFFFFFFFF) to check if it contains invalid value and if it is invalid then go with AlternateLBA from GPT header to get BackGPT header?  \nAlternatively, you can check the sanity of both SizeInLBA and AlternateLBA and choose whichever is valid to grab the backup GPT header.\n\nNote: It is possible that AlternateLBA may contain the legit information, even if the primary GPT header is corrupted.\n\n[1]: https://uefi.org/sites/default/files/resources/UEFI_Spec_2_10_Aug29.pdf",
      "range": {
        "startLine": 272,
        "startChar": 22,
        "endLine": 272,
        "endChar": 33
      },
      "revId": "1ae501e422bf46bc700aba51c4b1097bebc773fc",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5c9c8090_e0523640",
        "filename": "drivers/partition/partition.c",
        "patchSetId": 3
      },
      "lineNbr": 272,
      "author": {
        "id": 1000923
      },
      "writtenOn": "2023-10-03T22:35:55Z",
      "side": 1,
      "message": "We are doing a CRC check why is additional sizeLBA check needed?",
      "parentUuid": "03bb56dd_72180f50",
      "range": {
        "startLine": 272,
        "startChar": 22,
        "endLine": 272,
        "endChar": 33
      },
      "revId": "1ae501e422bf46bc700aba51c4b1097bebc773fc",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4b568b50_3cde53cf",
        "filename": "drivers/partition/partition.c",
        "patchSetId": 3
      },
      "lineNbr": 274,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2023-09-29T12:38:50Z",
      "side": 1,
      "message": "Do we need to reset part_lba to 0 prior to calling load_gpt_header() to be on the safe side? Right now, load_gpt_header() doesn\u0027t update *part_lba on error but if we ever change this in the implementation, the test at line 275 won\u0027t behave correctly.",
      "range": {
        "startLine": 273,
        "startChar": 2,
        "endLine": 274,
        "endChar": 17
      },
      "revId": "1ae501e422bf46bc700aba51c4b1097bebc773fc",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "00bb0fbe_8ea398e6",
        "filename": "drivers/partition/partition.c",
        "patchSetId": 3
      },
      "lineNbr": 274,
      "author": {
        "id": 1000923
      },
      "writtenOn": "2023-10-03T22:33:13Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "4b568b50_3cde53cf",
      "range": {
        "startLine": 273,
        "startChar": 2,
        "endLine": 274,
        "endChar": 17
      },
      "revId": "1ae501e422bf46bc700aba51c4b1097bebc773fc",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "19cfa2e3_9018257f",
        "filename": "drivers/partition/partition.c",
        "patchSetId": 3
      },
      "lineNbr": 276,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2023-09-28T10:25:04Z",
      "side": 1,
      "message": "This should be ERROR rather WARN as there is no other way to load GPT header and system bails out here.",
      "range": {
        "startLine": 276,
        "startChar": 3,
        "endLine": 276,
        "endChar": 77
      },
      "revId": "1ae501e422bf46bc700aba51c4b1097bebc773fc",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "af000982_d7ef9908",
        "filename": "drivers/partition/partition.c",
        "patchSetId": 3
      },
      "lineNbr": 276,
      "author": {
        "id": 1000923
      },
      "writtenOn": "2023-10-03T22:26:04Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "19cfa2e3_9018257f",
      "range": {
        "startLine": 276,
        "startChar": 3,
        "endLine": 276,
        "endChar": 77
      },
      "revId": "1ae501e422bf46bc700aba51c4b1097bebc773fc",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "da4cd9fa_f3d7a127",
        "filename": "drivers/partition/partition.c",
        "patchSetId": 3
      },
      "lineNbr": 281,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2023-09-28T10:29:58Z",
      "side": 1,
      "message": "(minor): I feel gpt_part_entry_offset should be more suitable name here.",
      "range": {
        "startLine": 281,
        "startChar": 1,
        "endLine": 281,
        "endChar": 17
      },
      "revId": "1ae501e422bf46bc700aba51c4b1097bebc773fc",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0c9011e5_eda5c7a2",
        "filename": "drivers/partition/partition.c",
        "patchSetId": 3
      },
      "lineNbr": 281,
      "author": {
        "id": 1000923
      },
      "writtenOn": "2023-10-03T22:26:04Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "da4cd9fa_f3d7a127",
      "range": {
        "startLine": 281,
        "startChar": 1,
        "endLine": 281,
        "endChar": 17
      },
      "revId": "1ae501e422bf46bc700aba51c4b1097bebc773fc",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "12c49315_034f5073",
        "filename": "drivers/partition/partition.c",
        "patchSetId": 3
      },
      "lineNbr": 321,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2023-09-28T10:25:04Z",
      "side": 1,
      "message": "The mbr_entry variable seems to be a global variable that can be accessed without really being passed via function. It would be better to remove passing the mbr* parameters to the function and access those directly inside the \u0027load_gpt\u0027 function.",
      "range": {
        "startLine": 321,
        "startChar": 34,
        "endLine": 321,
        "endChar": 43
      },
      "revId": "1ae501e422bf46bc700aba51c4b1097bebc773fc",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7b77cb38_dc416e94",
        "filename": "drivers/partition/partition.c",
        "patchSetId": 3
      },
      "lineNbr": 321,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2023-09-29T06:41:42Z",
      "side": 1,
      "message": "Ignore this comment, I overlooked this variable.",
      "parentUuid": "12c49315_034f5073",
      "range": {
        "startLine": 321,
        "startChar": 34,
        "endLine": 321,
        "endChar": 43
      },
      "revId": "1ae501e422bf46bc700aba51c4b1097bebc773fc",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e6d5ed9f_49dcba9b",
        "filename": "drivers/partition/partition.c",
        "patchSetId": 3
      },
      "lineNbr": 321,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2023-09-29T12:38:50Z",
      "side": 1,
      "message": "mbr_entry.first_lba is an unsigned long long (64-bit integer) and we\u0027re passing it to load_gpt(), which expects a size_t (32/64-bit integer, depending on whether we\u0027re running in AArch32 or AArch64 mode). So this raises the same types/truncation concerns as in the previous patch.",
      "range": {
        "startLine": 321,
        "startChar": 34,
        "endLine": 321,
        "endChar": 53
      },
      "revId": "1ae501e422bf46bc700aba51c4b1097bebc773fc",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5e5232e2_3873bcca",
        "filename": "drivers/partition/partition.c",
        "patchSetId": 3
      },
      "lineNbr": 321,
      "author": {
        "id": 1000923
      },
      "writtenOn": "2023-10-03T22:33:13Z",
      "side": 1,
      "message": "Luckily sector_nums and first_lba are int\u0027s\n\nhttps://git.trustedfirmware.org/TF-A/trusted-firmware-a.git/tree/include/drivers/partition/mbr.h?id\u003d374f1ac12910f0e53b4b5207a76f29d199571b5a#n25\n\n\n[...]\n\ntypedef struct mbr_entry {\n\tunsigned char\t\tstatus;\n\tunsigned char\t\tfirst_sector[MBR_CHS_ADDRESS_LEN];\n\tunsigned char\t\ttype;\n\tunsigned char\t\tlast_sector[MBR_CHS_ADDRESS_LEN];\n\tunsigned int\t\tfirst_lba;\n\tunsigned int\t\tsector_nums;\n} mbr_entry_t;\n\n[...]",
      "parentUuid": "e6d5ed9f_49dcba9b",
      "range": {
        "startLine": 321,
        "startChar": 34,
        "endLine": 321,
        "endChar": 53
      },
      "revId": "1ae501e422bf46bc700aba51c4b1097bebc773fc",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c5a7cb1e_3821a055",
        "filename": "drivers/partition/partition.c",
        "patchSetId": 3
      },
      "lineNbr": 321,
      "author": {
        "id": 1000923
      },
      "writtenOn": "2023-10-03T22:33:54Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "5e5232e2_3873bcca",
      "range": {
        "startLine": 321,
        "startChar": 34,
        "endLine": 321,
        "endChar": 53
      },
      "revId": "1ae501e422bf46bc700aba51c4b1097bebc773fc",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}