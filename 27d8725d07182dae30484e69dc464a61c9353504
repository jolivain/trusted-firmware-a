{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "bcab79b0_152c2e60",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000181
      },
      "writtenOn": "2021-07-13T17:30:50Z",
      "side": 1,
      "message": "The msr for hcr_el2 is only guaranteed to take affect on a CSE (context synchronization event). For a core executing out of order, this patch is needed to make sure that the write to hcr_el2 happens before ttbr1_el2.",
      "revId": "27d8725d07182dae30484e69dc464a61c9353504",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "55d33382_03009d3d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2021-07-13T18:33:49Z",
      "side": 1,
      "message": "so this happens in EL3. An ERET to EL2 will be a context synchronization event no? and it should take effect. SO still nto clear why we need the ISB here.",
      "parentUuid": "bcab79b0_152c2e60",
      "revId": "27d8725d07182dae30484e69dc464a61c9353504",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1c99ca26_274e1c23",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000181
      },
      "writtenOn": "2021-07-13T19:12:59Z",
      "side": 1,
      "message": "Yes, ERET to EL2 is a CSE, but in out of order execution, the CSE does not guarantee that\nmsr\thcr_el2, x17\nhappens before \nmsr\tttbr1_el2, x12",
      "parentUuid": "55d33382_03009d3d",
      "revId": "27d8725d07182dae30484e69dc464a61c9353504",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "67af383e_71f2c308",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2021-07-13T19:29:21Z",
      "side": 1,
      "message": "true. but why does the hcr_el2 need to happen before ttbr1_el2 in EL3? I know we have to do this in EL2, i just dont know that it matters in EL3. Those registers should have no effect or use in EL3 whatsoever. When we go back to EL2, the CSE should ensure that it both operations complete and any execution in EL2 happens after the CSE, at which point both registers should have the correct value no?",
      "parentUuid": "1c99ca26_274e1c23",
      "revId": "27d8725d07182dae30484e69dc464a61c9353504",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b2f57f37_d6cdf206",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2021-07-13T19:39:23Z",
      "side": 1,
      "message": "Going by that logic, why dont we execute ISB\u0027s after writing SCTLR_EL1 for example? why does the same issue not apply there? Or when PAUTH registers are swapped?",
      "parentUuid": "67af383e_71f2c308",
      "revId": "27d8725d07182dae30484e69dc464a61c9353504",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}