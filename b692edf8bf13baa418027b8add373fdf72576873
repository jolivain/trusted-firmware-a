{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "3fdac286_5af48e98",
        "filename": "include/arch/aarch64/el3_common_macros.S",
        "patchSetId": 57
      },
      "lineNbr": 153,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2023-09-05T13:21:30Z",
      "side": 0,
      "message": "This bit should be set of EL3 execution and should be unset only on exit to NS/S/Realm.\n\nCurrently there is an issue that this bit is never restored to its EL3 value because Root itself does not have a context, but that will be solved later on.",
      "range": {
        "startLine": 153,
        "startChar": 49,
        "endLine": 153,
        "endChar": 56
      },
      "revId": "b692edf8bf13baa418027b8add373fdf72576873",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b221e1e7_21c9115c",
        "filename": "include/arch/aarch64/el3_common_macros.S",
        "patchSetId": 57
      },
      "lineNbr": 153,
      "author": {
        "id": 1000883
      },
      "writtenOn": "2023-09-05T15:25:27Z",
      "side": 0,
      "message": "As you say, this will be solved by root context. This patch can\u0027t do much to address the issue. Once again, it preserves the status quo. It does not remove the issue, but builds the ground work for root context to do that. Setting this bit to any value here will do nothing to address your general point, so I don\u0027t think there\u0027s an issue.",
      "parentUuid": "3fdac286_5af48e98",
      "range": {
        "startLine": 153,
        "startChar": 49,
        "endLine": 153,
        "endChar": 56
      },
      "revId": "b692edf8bf13baa418027b8add373fdf72576873",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6e4ba394_daade223",
        "filename": "include/arch/aarch64/el3_common_macros.S",
        "patchSetId": 57
      },
      "lineNbr": 153,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2023-09-05T15:30:09Z",
      "side": 0,
      "message": "Not sure about the status quo. Isn\u0027t this setting being removed from the boot path now (unless it is being set elsewhere in boot) ?",
      "parentUuid": "b221e1e7_21c9115c",
      "range": {
        "startLine": 153,
        "startChar": 49,
        "endLine": 153,
        "endChar": 56
      },
      "revId": "b692edf8bf13baa418027b8add373fdf72576873",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "96de433f_a30dfc31",
        "filename": "include/arch/aarch64/el3_common_macros.S",
        "patchSetId": 57
      },
      "lineNbr": 153,
      "author": {
        "id": 1000883
      },
      "writtenOn": "2023-09-05T15:40:03Z",
      "side": 0,
      "message": "it does get set elsewhere in boot. The SVE and SME enables do that. If EL3 requires a specific value, this is not the place to do it, that\u0027s root context. That\u0027s why I say that\u0027s the status quo - whatever we set here will be overwritten on each world exit, making EL3 execute with an inconsistent environemnt",
      "parentUuid": "6e4ba394_daade223",
      "range": {
        "startLine": 153,
        "startChar": 49,
        "endLine": 153,
        "endChar": 56
      },
      "revId": "b692edf8bf13baa418027b8add373fdf72576873",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1d674178_b5e4ef66",
        "filename": "include/arch/aarch64/el3_common_macros.S",
        "patchSetId": 57
      },
      "lineNbr": 153,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2023-09-05T16:28:54Z",
      "side": 0,
      "message": "Hmm, I see. It is done much later in the boot path. \n\nActually the needed behavior is that the FP is set up to be trapped during boot sequence of BL31 (thus catching any invalid compiler flag set up early).\n\nAlso the root context work is probably another couple of months away. It is a bit unreliable to leave this reg uninitialized as it affects EL3 execution. We need some initialization of this critical register until the lower EL context init at runtime. \n\nSo we could leave this duplication here for a while and add a TODO comment to remove this when Root context is introduced.",
      "parentUuid": "96de433f_a30dfc31",
      "range": {
        "startLine": 153,
        "startChar": 49,
        "endLine": 153,
        "endChar": 56
      },
      "revId": "b692edf8bf13baa418027b8add373fdf72576873",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ad08cdc7_27cbed02",
        "filename": "include/arch/aarch64/el3_common_macros.S",
        "patchSetId": 57
      },
      "lineNbr": 153,
      "author": {
        "id": 1000660
      },
      "writtenOn": "2023-09-05T16:55:29Z",
      "side": 0,
      "message": "@Soby, reconfirming again, this patch originally intended to move the code from reset to set_up_context common path. Bits are not modified. https://review.trustedfirmware.org/c/TF-A/trusted-firmware-a/+/20623/57/lib/el3_runtime/aarch64/context_mgmt.c#437\n\nHowever, you mention that we need to set this TFP bit at reset to 1, instead of zero.\n\nShould this has to be part of the same patch ?\nI am planning to squish this and the next patch above this into one.",
      "parentUuid": "1d674178_b5e4ef66",
      "range": {
        "startLine": 153,
        "startChar": 49,
        "endLine": 153,
        "endChar": 56
      },
      "revId": "b692edf8bf13baa418027b8add373fdf72576873",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}