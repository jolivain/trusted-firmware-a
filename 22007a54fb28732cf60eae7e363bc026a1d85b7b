{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "858a16f2_49204600",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 29,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2021-06-16T00:05:50Z",
      "side": 1,
      "message": "is this true though? why is ehf_entering_normal_world not being called the second time around?",
      "range": {
        "startLine": 28,
        "startChar": 0,
        "endLine": 29,
        "endChar": 48
      },
      "revId": "22007a54fb28732cf60eae7e363bc026a1d85b7b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7256010d_b41c8954",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 29,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2021-06-16T00:29:14Z",
      "side": 1,
      "message": "It sounds like pthe problem is that there is no code path that triggers the ehf_entering_normal_world call and the platform must do something to trigger that, so that the NS priority saved at the beginning when the EL3 sync exception is received is saved. Moving activation to after the SDEI event dispatch means that you are executing the SDEI handler without proper increase in pmr priority..",
      "parentUuid": "858a16f2_49204600",
      "range": {
        "startLine": 28,
        "startChar": 0,
        "endLine": 29,
        "endChar": 48
      },
      "revId": "22007a54fb28732cf60eae7e363bc026a1d85b7b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c8a08e6c_da06d71f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2021-06-17T15:44:23Z",
      "side": 1,
      "message": "Not sure this patch is fixing the issue the right way. Moving priority activation after resuming NS context means the SDEI handler in normal world will run without the appropriate priorities masked.",
      "revId": "22007a54fb28732cf60eae7e363bc026a1d85b7b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a604f4b9_e9d45478",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000464
      },
      "writtenOn": "2021-06-23T07:36:45Z",
      "side": 1,
      "message": "The old code before enter normal world:\nicc_pmr_el1: 0x80 \u003d\u003e 0x60\nThe new code before enter normal world:\nicc_pmr_el1: 0xf8 \u003d\u003e 0x60\n\nSo,Moving priority activation after resuming NS context,the SDEI handler in normal world will run with the same priorities.",
      "parentUuid": "c8a08e6c_da06d71f",
      "revId": "22007a54fb28732cf60eae7e363bc026a1d85b7b",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}