{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "b25e5397_dd89228b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 32
      },
      "lineNbr": 13,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-05-13T06:23:28Z",
      "side": 1,
      "message": "I believe I understand the intent although the description isn\u0027t fully clear to me:\nsupport the usecase where a VM shares/lends memory to two borrowers, one other VM and a single SP.",
      "range": {
        "startLine": 10,
        "startChar": 46,
        "endLine": 13,
        "endChar": 62
      },
      "revId": "36d06904b9429cc720b0ca2b7cb7821cf06f1718",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0a73c2d2_79cbf949",
        "filename": "/COMMIT_MSG",
        "patchSetId": 32
      },
      "lineNbr": 13,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-05-13T08:10:35Z",
      "side": 1,
      "message": "actually it may be \u0027 a VM shares/lends memory to multiples borrowers, one or more VMs and a single SP.\u0027",
      "parentUuid": "b25e5397_dd89228b",
      "range": {
        "startLine": 10,
        "startChar": 46,
        "endLine": 13,
        "endChar": 62
      },
      "revId": "36d06904b9429cc720b0ca2b7cb7821cf06f1718",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7fc1d8f7_2be092fb",
        "filename": "/COMMIT_MSG",
        "patchSetId": 32
      },
      "lineNbr": 13,
      "author": {
        "id": 1000290
      },
      "writtenOn": "2022-05-15T13:30:50Z",
      "side": 1,
      "message": "Yes you\u0027re correct. Updated the commit message, please let me know if this is this is any clearer?",
      "parentUuid": "0a73c2d2_79cbf949",
      "range": {
        "startLine": 10,
        "startChar": 46,
        "endLine": 13,
        "endChar": 62
      },
      "revId": "36d06904b9429cc720b0ca2b7cb7821cf06f1718",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6cb21dfb_01d22d61",
        "filename": "/COMMIT_MSG",
        "patchSetId": 32
      },
      "lineNbr": 13,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-05-16T09:10:19Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "7fc1d8f7_2be092fb",
      "range": {
        "startLine": 10,
        "startChar": 46,
        "endLine": 13,
        "endChar": 62
      },
      "revId": "36d06904b9429cc720b0ca2b7cb7821cf06f1718",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "799121e1_5c6d9709",
        "filename": "services/std_svc/spm/el3_spmc/spmc_shared_mem.c",
        "patchSetId": 32
      },
      "lineNbr": 331,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-05-13T06:23:28Z",
      "side": 1,
      "message": "assumed",
      "range": {
        "startLine": 331,
        "startChar": 43,
        "endLine": 331,
        "endChar": 49
      },
      "revId": "36d06904b9429cc720b0ca2b7cb7821cf06f1718",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bb57c0c5_957fa1b1",
        "filename": "services/std_svc/spm/el3_spmc/spmc_shared_mem.c",
        "patchSetId": 32
      },
      "lineNbr": 331,
      "author": {
        "id": 1000290
      },
      "writtenOn": "2022-05-15T13:30:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "799121e1_5c6d9709",
      "range": {
        "startLine": 331,
        "startChar": 43,
        "endLine": 331,
        "endChar": 49
      },
      "revId": "36d06904b9429cc720b0ca2b7cb7821cf06f1718",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d359eea2_55027765",
        "filename": "services/std_svc/spm/el3_spmc/spmc_shared_mem.c",
        "patchSetId": 32
      },
      "lineNbr": 339,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-05-13T06:23:28Z",
      "side": 1,
      "message": "ERROR",
      "range": {
        "startLine": 339,
        "startChar": 4,
        "endLine": 339,
        "endChar": 10
      },
      "revId": "36d06904b9429cc720b0ca2b7cb7821cf06f1718",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "84bbea90_bc043935",
        "filename": "services/std_svc/spm/el3_spmc/spmc_shared_mem.c",
        "patchSetId": 32
      },
      "lineNbr": 339,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-05-13T08:02:49Z",
      "side": 1,
      "message": "Or WARN to be consistent with other instances in this file.",
      "parentUuid": "d359eea2_55027765",
      "range": {
        "startLine": 339,
        "startChar": 4,
        "endLine": 339,
        "endChar": 10
      },
      "revId": "36d06904b9429cc720b0ca2b7cb7821cf06f1718",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cb39c5a6_3d9677a3",
        "filename": "services/std_svc/spm/el3_spmc/spmc_shared_mem.c",
        "patchSetId": 32
      },
      "lineNbr": 339,
      "author": {
        "id": 1000290
      },
      "writtenOn": "2022-05-15T13:30:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "84bbea90_bc043935",
      "range": {
        "startLine": 339,
        "startChar": 4,
        "endLine": 339,
        "endChar": 10
      },
      "revId": "36d06904b9429cc720b0ca2b7cb7821cf06f1718",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "608288d8_b09ea3b2",
        "filename": "services/std_svc/spm/el3_spmc/spmc_shared_mem.c",
        "patchSetId": 32
      },
      "lineNbr": 628,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-05-13T08:02:49Z",
      "side": 1,
      "message": "Is this check required and lines 614, 621?\nAFAIU emad_count \u003d\u003d 0 isn\u0027t permitted and should be rejected earlier.",
      "range": {
        "startLine": 628,
        "startChar": 5,
        "endLine": 628,
        "endChar": 29
      },
      "revId": "36d06904b9429cc720b0ca2b7cb7821cf06f1718",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a1c29e1f_489b6f70",
        "filename": "services/std_svc/spm/el3_spmc/spmc_shared_mem.c",
        "patchSetId": 32
      },
      "lineNbr": 628,
      "author": {
        "id": 1000290
      },
      "writtenOn": "2022-05-15T13:30:50Z",
      "side": 1,
      "message": "So these checks are a result of the initial implementation supporting retrieve of the memory descriptor from a hypervisor. \nThis means that the in the share request emad_count \u003d\u003d 0 would be rejected however if the Hypervisor was attempting to retrieve the descriptor then it would set the emad_count to 0 (along with the other fields) and therefore the SPMC should not need to check these fields. \n\nThis is not a use case that we were initially targeting for the El3 SPMC, therefore there maybe other gaps to support this use case, but the intention here was to follow the same pattern as the original implementation in case this support needs to be re-enabled.\n\nIf this doesn\u0027t seem reasonable I can remove these additional checks and they can be re-added if required. What do you think?",
      "parentUuid": "608288d8_b09ea3b2",
      "range": {
        "startLine": 628,
        "startChar": 5,
        "endLine": 628,
        "endChar": 29
      },
      "revId": "36d06904b9429cc720b0ca2b7cb7821cf06f1718",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b064df53_706536dd",
        "filename": "services/std_svc/spm/el3_spmc/spmc_shared_mem.c",
        "patchSetId": 32
      },
      "lineNbr": 628,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-05-16T09:10:19Z",
      "side": 1,
      "message": "Thanks for clarifying. I believe that\u0027s ok to keep unless we know the mem retrieve from Hypervisor case is not going to happen any time soon? I remember discussions around this but I can\u0027t recall if this has been integrated in the spec (I can check). In which case it may be the implementation goes a bit beyond what the spec mandates?",
      "parentUuid": "a1c29e1f_489b6f70",
      "range": {
        "startLine": 628,
        "startChar": 5,
        "endLine": 628,
        "endChar": 29
      },
      "revId": "36d06904b9429cc720b0ca2b7cb7821cf06f1718",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6ceb9ae8_d9166040",
        "filename": "services/std_svc/spm/el3_spmc/spmc_shared_mem.c",
        "patchSetId": 32
      },
      "lineNbr": 628,
      "author": {
        "id": 1000290
      },
      "writtenOn": "2022-05-16T11:59:55Z",
      "side": 1,
      "message": "Ok cool, and yes this is a supported use case in the spec (section 16.4.3) however it is an optional feature and therefore wasn\u0027t a priority in this implementation.",
      "parentUuid": "b064df53_706536dd",
      "range": {
        "startLine": 628,
        "startChar": 5,
        "endLine": 628,
        "endChar": 29
      },
      "revId": "36d06904b9429cc720b0ca2b7cb7821cf06f1718",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2274536e_2876c4b6",
        "filename": "services/std_svc/spm/el3_spmc/spmc_shared_mem.c",
        "patchSetId": 32
      },
      "lineNbr": 628,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-05-16T16:50:31Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "6ceb9ae8_d9166040",
      "range": {
        "startLine": 628,
        "startChar": 5,
        "endLine": 628,
        "endChar": 29
      },
      "revId": "36d06904b9429cc720b0ca2b7cb7821cf06f1718",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "384a5aaf_c3f74202",
        "filename": "services/std_svc/spm/el3_spmc/spmc_shared_mem.c",
        "patchSetId": 32
      },
      "lineNbr": 667,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-05-13T08:02:49Z",
      "side": 1,
      "message": "should it be obj-\u003edesc.emad_count ?",
      "range": {
        "startLine": 667,
        "startChar": 25,
        "endLine": 667,
        "endChar": 40
      },
      "revId": "36d06904b9429cc720b0ca2b7cb7821cf06f1718",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8e1428a9_a11b10da",
        "filename": "services/std_svc/spm/el3_spmc/spmc_shared_mem.c",
        "patchSetId": 32
      },
      "lineNbr": 667,
      "author": {
        "id": 1000290
      },
      "writtenOn": "2022-05-15T13:30:50Z",
      "side": 1,
      "message": "Sure can update to make it clearer.",
      "parentUuid": "384a5aaf_c3f74202",
      "range": {
        "startLine": 667,
        "startChar": 25,
        "endLine": 667,
        "endChar": 40
      },
      "revId": "36d06904b9429cc720b0ca2b7cb7821cf06f1718",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f8f816a5_d38ebf9d",
        "filename": "services/std_svc/spm/el3_spmc/spmc_shared_mem.c",
        "patchSetId": 32
      },
      "lineNbr": 668,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-05-13T08:02:49Z",
      "side": 1,
      "message": "req-\u003eemad_count should be checked earlier to be non-zero?",
      "range": {
        "startLine": 668,
        "startChar": 7,
        "endLine": 668,
        "endChar": 25
      },
      "revId": "36d06904b9429cc720b0ca2b7cb7821cf06f1718",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "94b482f4_6bb50504",
        "filename": "services/std_svc/spm/el3_spmc/spmc_shared_mem.c",
        "patchSetId": 32
      },
      "lineNbr": 668,
      "author": {
        "id": 1000290
      },
      "writtenOn": "2022-05-15T13:30:50Z",
      "side": 1,
      "message": "Fair point, this is redundant as if this was not set then we would skip the loop in any case.",
      "parentUuid": "f8f816a5_d38ebf9d",
      "range": {
        "startLine": 668,
        "startChar": 7,
        "endLine": 668,
        "endChar": 25
      },
      "revId": "36d06904b9429cc720b0ca2b7cb7821cf06f1718",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6383f5e2_3efb14b7",
        "filename": "services/std_svc/spm/el3_spmc/spmc_shared_mem.c",
        "patchSetId": 32
      },
      "lineNbr": 864,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-05-13T08:02:49Z",
      "side": 1,
      "message": "check early that req-\u003eendpoint_count is greater than 0?\n\nsection 16.6.1.2 bullet 3.",
      "revId": "36d06904b9429cc720b0ca2b7cb7821cf06f1718",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0ddd6a4d_57c61b2b",
        "filename": "services/std_svc/spm/el3_spmc/spmc_shared_mem.c",
        "patchSetId": 32
      },
      "lineNbr": 864,
      "author": {
        "id": 1000290
      },
      "writtenOn": "2022-05-15T13:30:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6383f5e2_3efb14b7",
      "revId": "36d06904b9429cc720b0ca2b7cb7821cf06f1718",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8672e639_0b2ebe32",
        "filename": "services/std_svc/spm/el3_spmc/spmc_shared_mem.c",
        "patchSetId": 32
      },
      "lineNbr": 866,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2022-05-13T08:02:49Z",
      "side": 1,
      "message": "WARN",
      "range": {
        "startLine": 866,
        "startChar": 2,
        "endLine": 866,
        "endChar": 8
      },
      "revId": "36d06904b9429cc720b0ca2b7cb7821cf06f1718",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "991cbf72_6b42305d",
        "filename": "services/std_svc/spm/el3_spmc/spmc_shared_mem.c",
        "patchSetId": 32
      },
      "lineNbr": 866,
      "author": {
        "id": 1000290
      },
      "writtenOn": "2022-05-15T13:30:50Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8672e639_0b2ebe32",
      "range": {
        "startLine": 866,
        "startChar": 2,
        "endLine": 866,
        "endChar": 8
      },
      "revId": "36d06904b9429cc720b0ca2b7cb7821cf06f1718",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}