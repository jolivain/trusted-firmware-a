{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "184c4e80_992f0f04",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2021-03-29T12:49:15Z",
      "side": 1,
      "message": "Hi Pali,\n\nI see that you\u0027ve commented on the patch that recently introduced this behaviour:\nhttps://review.trustedfirmware.org/c/TF-A/trusted-firmware-a/+/6127\n\nAs you probably know from the review above, the rationale for the original patch was to \"handle\" a dependency on a platform makefile. Pankaj Gupta (author of the above patch) needed the tool to be cleaned and rebuilt every time this platform makefile was changed.\n\nNow, I agree with you that this is by no means the right way to fix the issue. The right way would be through proper dependency tracking (through gcc -MD/-MT type of options). But as discussed in the code review above, this makefile already suffered from multiple problems around dependency handling before so we deemed that this was not making the situation much worse than before. Also, we reckoned that fiptool being such a small tool with few source files, rebuilding it every time would not have a big impact on people\u0027s workflows (Apparently we were wrong?) Hence we went for a quick and dirty fix.\n\nI don\u0027t think we should just revert Pankaj Gupta\u0027s patch because then we\u0027re back to square one for his problem. What would be preferable is a proper fix with proper dependency handling, as discussed above. Would you be willing to contribute such a patch instead?",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 10,
        "endChar": 36
      },
      "revId": "b0261e6f51f1295e76d4cf784ddfc1c2b270d5e7",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3830e72b_6be96aa6",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1000451
      },
      "writtenOn": "2021-03-29T13:01:17Z",
      "side": 1,
      "message": "Hello!\n\n\u003e Hi Pali,\n\u003e \n\u003e I see that you\u0027ve commented on the patch that recently introduced this behaviour:\n\u003e https://review.trustedfirmware.org/c/TF-A/trusted-firmware-a/+/6127\n\u003e \n\u003e As you probably know from the review above, the rationale for the original patch was to \"handle\" a dependency on a platform makefile. Pankaj Gupta (author of the above patch) needed the tool to be cleaned and rebuilt every time this platform makefile was changed.\n\nBut this \"broke\" building of a3k plat (Marvell Armada 3720).\n\n\u003e Now, I agree with you that this is by no means the right way to fix the issue. The right way would be through proper dependency tracking (through gcc -MD/-MT type of options). But as discussed in the code review above, this makefile already suffered from multiple problems around dependency handling before so we deemed that this was not making the situation much worse than before.\n\nIt is really worse :-(\n\n\u003e Also, we reckoned that fiptool being such a small tool with few source files, rebuilding it every time would not have a big impact on people\u0027s workflows (Apparently we were wrong?)\n\nIt is not only number of fiptool source files but also target which depends on fiptool and targets which depeden on output files generated by fiptool.\n\n\u003e Hence we went for a quick and dirty fix.\n\u003e \n\u003e I don\u0027t think we should just revert Pankaj Gupta\u0027s patch because then we\u0027re back to square one for his problem.\n\nWell, that patch caused \"regression\" for a3k. Therefore I send this patch which \"revert\" it so a3k is not affected.\n\nI do not think that change which is causing issues should go into master.\n\n\u003e What would be preferable is a proper fix with proper dependency handling, as discussed above. Would you be willing to contribute such a patch instead?\n\nI can look at it later, but first I would like to have a3k plat working again.",
      "parentUuid": "184c4e80_992f0f04",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 10,
        "endChar": 36
      },
      "revId": "b0261e6f51f1295e76d4cf784ddfc1c2b270d5e7",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "36430826_61621866",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1000451
      },
      "writtenOn": "2021-03-29T13:09:23Z",
      "side": 1,
      "message": "There was similar issue in ${DOIMAGETOOL} target which I have fixed in:\nhttps://review.trustedfirmware.org/c/TF-A/trusted-firmware-a/+/7174\n\nAnd e.g. Manish Pandey has already complaining about it, see:\nhttps://review.trustedfirmware.org/c/TF-A/trusted-firmware-a/+/6279/2#message-9f674f071e80e9929305958defa6d07a1f07db5a\n\nThere were also circular dependences in make caused by these patterns, so it is really bad to introduce them again, after they were removed.",
      "parentUuid": "3830e72b_6be96aa6",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 10,
        "endChar": 36
      },
      "revId": "b0261e6f51f1295e76d4cf784ddfc1c2b270d5e7",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d7dfa313_0869b7e1",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2021-03-30T14:08:57Z",
      "side": 1,
      "message": "\u003e It is not only number of fiptool source files but also target which depends on fiptool and targets which depeden on output files generated by fiptool.\n\nThat\u0027s bad! I had not realized this side effect ðŸ˜’\n\nJust for my understanding, which target currently depends on fiptool? Could you please provide an example of \"make\" command that triggers an undesirable rebuild?",
      "parentUuid": "36430826_61621866",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 10,
        "endChar": 36
      },
      "revId": "b0261e6f51f1295e76d4cf784ddfc1c2b270d5e7",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}