{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "7cf64082_4cc2076b",
        "filename": "lib/gpt_rme/gpt_rme.c",
        "patchSetId": 13
      },
      "lineNbr": 230,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2024-03-09T01:48:16Z",
      "side": 1,
      "message": "can you make this fill_cont_2mb to be consistent with fill_cont_32/512mb?",
      "range": {
        "startLine": 230,
        "startChar": 17,
        "endLine": 230,
        "endChar": 25
      },
      "revId": "f1de406d4a1adc6fa07589e06a7153421cbfde92",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7341d15e_6d586e48",
        "filename": "lib/gpt_rme/gpt_rme.c",
        "patchSetId": 13
      },
      "lineNbr": 230,
      "author": {
        "id": 1000105
      },
      "writtenOn": "2024-03-11T16:19:53Z",
      "side": 1,
      "message": "fill_2mb() function name reflects that it can fill either Contiguous (cont) or Granules descriptors. Functions fill_cont_32/512mb() fill Contiguous only.",
      "parentUuid": "7cf64082_4cc2076b",
      "range": {
        "startLine": 230,
        "startChar": 17,
        "endLine": 230,
        "endChar": 25
      },
      "revId": "f1de406d4a1adc6fa07589e06a7153421cbfde92",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "46cab859_dc4ffe04",
        "filename": "lib/gpt_rme/gpt_rme.c",
        "patchSetId": 13
      },
      "lineNbr": 230,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2024-03-11T22:28:41Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7341d15e_6d586e48",
      "range": {
        "startLine": 230,
        "startChar": 17,
        "endLine": 230,
        "endChar": 25
      },
      "revId": "f1de406d4a1adc6fa07589e06a7153421cbfde92",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0377cc2a_4a7d73d7",
        "filename": "lib/gpt_rme/gpt_rme.c",
        "patchSetId": 13
      },
      "lineNbr": 245,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2024-03-09T01:48:16Z",
      "side": 1,
      "message": "is it worth asserting GPT_L1_INDEX(base) \u003d\u003d GPT_L1_INDEX(ALIGN_2MB(base))?\nDocuments that base has to be 2MB aligned for proper operation.",
      "range": {
        "startLine": 245,
        "startChar": 33,
        "endLine": 245,
        "endChar": 37
      },
      "revId": "f1de406d4a1adc6fa07589e06a7153421cbfde92",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dc2057d7_4ffcd09b",
        "filename": "lib/gpt_rme/gpt_rme.c",
        "patchSetId": 13
      },
      "lineNbr": 245,
      "author": {
        "id": 1000105
      },
      "writtenOn": "2024-03-11T16:19:53Z",
      "side": 1,
      "message": "fuse_2mb() is called from fuse_block(), which is called as:\nfuse_block(ALIGN_2MB(base)...) line #1773\nfuse_block(ALIGN_2MB(base)...) line #1902, so there is no sense in such assertion.",
      "parentUuid": "0377cc2a_4a7d73d7",
      "range": {
        "startLine": 245,
        "startChar": 33,
        "endLine": 245,
        "endChar": 37
      },
      "revId": "f1de406d4a1adc6fa07589e06a7153421cbfde92",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "96d06d8a_f24cfcd5",
        "filename": "lib/gpt_rme/gpt_rme.c",
        "patchSetId": 13
      },
      "lineNbr": 245,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2024-03-11T22:28:41Z",
      "side": 1,
      "message": "as it stands today, those are your two calls. as usual, in the future if somebody is modifying the code, the assert here would document that the function expects that the base be aligned to 2MB.\nhttps://tf-rmm.readthedocs.io/en/latest/process/coding-standard.html#use-of-asserts-and-panic\n\nAsserts are a great way to document your assumptions or caller expectations in static functions.",
      "parentUuid": "dc2057d7_4ffcd09b",
      "range": {
        "startLine": 245,
        "startChar": 33,
        "endLine": 245,
        "endChar": 37
      },
      "revId": "f1de406d4a1adc6fa07589e06a7153421cbfde92",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3ef3858c_33933a42",
        "filename": "lib/gpt_rme/gpt_rme.c",
        "patchSetId": 13
      },
      "lineNbr": 245,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2024-03-13T03:45:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "96d06d8a_f24cfcd5",
      "range": {
        "startLine": 245,
        "startChar": 33,
        "endLine": 245,
        "endChar": 37
      },
      "revId": "f1de406d4a1adc6fa07589e06a7153421cbfde92",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1faef559_8d45f5ad",
        "filename": "lib/gpt_rme/gpt_rme.c",
        "patchSetId": 13
      },
      "lineNbr": 260,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2024-03-09T01:48:16Z",
      "side": 1,
      "message": "worth asserting that contig encoding is not set and is a contig descriptor?",
      "range": {
        "startLine": 260,
        "startChar": 46,
        "endLine": 260,
        "endChar": 53
      },
      "revId": "f1de406d4a1adc6fa07589e06a7153421cbfde92",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "677913e6_217658cc",
        "filename": "lib/gpt_rme/gpt_rme.c",
        "patchSetId": 13
      },
      "lineNbr": 260,
      "author": {
        "id": 1000105
      },
      "writtenOn": "2024-03-11T16:19:53Z",
      "side": 1,
      "message": "shatter_2mb() is called from gpt_shatter_lookup() called from delegate_shatter() or \nundelegate_shatter() after check for Contiguous descriptor on lines #1758 \u0026 #1881, so it is no worth to perform this check again.",
      "parentUuid": "1faef559_8d45f5ad",
      "range": {
        "startLine": 260,
        "startChar": 46,
        "endLine": 260,
        "endChar": 53
      },
      "revId": "f1de406d4a1adc6fa07589e06a7153421cbfde92",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c80dd8cf_9bb84e4d",
        "filename": "lib/gpt_rme/gpt_rme.c",
        "patchSetId": 13
      },
      "lineNbr": 260,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2024-03-11T22:28:41Z",
      "side": 1,
      "message": "as usual, the assertion documents the assumption made by the function. It is simply good defensive programming. GPT is critical to security, and bugs creeping in here, especially given how complex the code is, is worth being defensive.",
      "parentUuid": "677913e6_217658cc",
      "range": {
        "startLine": 260,
        "startChar": 46,
        "endLine": 260,
        "endChar": 53
      },
      "revId": "f1de406d4a1adc6fa07589e06a7153421cbfde92",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "486534d9_a583a9fd",
        "filename": "lib/gpt_rme/gpt_rme.c",
        "patchSetId": 13
      },
      "lineNbr": 271,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2024-03-09T01:48:16Z",
      "side": 1,
      "message": "can we not call fuse_2mb 16 times instead? realize there is a potential for more loo[ping but with branch prediction, I don\u0027t know if it will be significant improvement as opposed to readability for security critical code. \nalso realize this may run on wimpy cores without great branch prediction..\n\nIf we truly want to optimize for loops, it might better to make it a macro that simply unrolls the loop, that is still better for readability since the code has a pattern that can be followed. otherwise this looks like repeated code (which it is) and takes a while to understand why it is repeated.",
      "range": {
        "startLine": 271,
        "startChar": 10,
        "endLine": 271,
        "endChar": 17
      },
      "revId": "f1de406d4a1adc6fa07589e06a7153421cbfde92",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "320df128_b0abbcb1",
        "filename": "lib/gpt_rme/gpt_rme.c",
        "patchSetId": 13
      },
      "lineNbr": 271,
      "author": {
        "id": 1000105
      },
      "writtenOn": "2024-03-11T16:19:53Z",
      "side": 1,
      "message": "we cannot call fuse_2mb 16 times instead, because number of iterations depends on GPCCR_EL3.PGS which is reflected in gpt_l1_cnt_2mb variable.",
      "parentUuid": "486534d9_a583a9fd",
      "range": {
        "startLine": 271,
        "startChar": 10,
        "endLine": 271,
        "endChar": 17
      },
      "revId": "f1de406d4a1adc6fa07589e06a7153421cbfde92",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "30fa1ccf_928c1b04",
        "filename": "lib/gpt_rme/gpt_rme.c",
        "patchSetId": 13
      },
      "lineNbr": 271,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2024-03-11T22:28:41Z",
      "side": 1,
      "message": "obviously. I\u0027m asking if you can make use of fuse_2mb here, instead of repeating the 128 bit write. The code is repetitive.",
      "parentUuid": "320df128_b0abbcb1",
      "range": {
        "startLine": 271,
        "startChar": 10,
        "endLine": 271,
        "endChar": 17
      },
      "revId": "f1de406d4a1adc6fa07589e06a7153421cbfde92",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "aef67870_2a266804",
        "filename": "lib/gpt_rme/gpt_rme.c",
        "patchSetId": 13
      },
      "lineNbr": 271,
      "author": {
        "id": 1000105
      },
      "writtenOn": "2024-03-12T12:55:55Z",
      "side": 1,
      "message": "It would make more sense to implement a new fill_nmb(uint64_t *l1, uint64_t l1_desc, unsigned int cnt) \u0026 call it from fill_2mb(), fill_cont_32mb() \u0026 fill_cont_512mb().",
      "parentUuid": "30fa1ccf_928c1b04",
      "range": {
        "startLine": 271,
        "startChar": 10,
        "endLine": 271,
        "endChar": 17
      },
      "revId": "f1de406d4a1adc6fa07589e06a7153421cbfde92",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e544110f_039f2244",
        "filename": "lib/gpt_rme/gpt_rme.c",
        "patchSetId": 13
      },
      "lineNbr": 271,
      "author": {
        "id": 1000105
      },
      "writtenOn": "2024-03-12T17:03:12Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "aef67870_2a266804",
      "range": {
        "startLine": 271,
        "startChar": 10,
        "endLine": 271,
        "endChar": 17
      },
      "revId": "f1de406d4a1adc6fa07589e06a7153421cbfde92",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7d2ee02c_c0f6e345",
        "filename": "lib/gpt_rme/gpt_rme.c",
        "patchSetId": 13
      },
      "lineNbr": 271,
      "author": {
        "id": 1000105
      },
      "writtenOn": "2024-03-13T11:40:25Z",
      "side": 1,
      "message": "will rename fill_nmb() to fill_desc()",
      "parentUuid": "e544110f_039f2244",
      "range": {
        "startLine": 271,
        "startChar": 10,
        "endLine": 271,
        "endChar": 17
      },
      "revId": "f1de406d4a1adc6fa07589e06a7153421cbfde92",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4bb78cbd_9ccc85c0",
        "filename": "lib/gpt_rme/gpt_rme.c",
        "patchSetId": 13
      },
      "lineNbr": 280,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2024-03-09T01:48:16Z",
      "side": 1,
      "message": "assert base and ALIGN_32MB are equal?",
      "revId": "f1de406d4a1adc6fa07589e06a7153421cbfde92",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1d692654_c4924d98",
        "filename": "lib/gpt_rme/gpt_rme.c",
        "patchSetId": 13
      },
      "lineNbr": 280,
      "author": {
        "id": 1000105
      },
      "writtenOn": "2024-03-11T16:19:53Z",
      "side": 1,
      "message": "Line #1593:\n\tbase \u003d ALIGN_32MB(base);\n\n#if (GPT_MAX_BLOCK \u003d\u003d 32)\n\tfuse_32mb(base, gpi_info, l1_cont_desc);\n...",
      "parentUuid": "4bb78cbd_9ccc85c0",
      "revId": "f1de406d4a1adc6fa07589e06a7153421cbfde92",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "28fd067f_133fa6e7",
        "filename": "lib/gpt_rme/gpt_rme.c",
        "patchSetId": 13
      },
      "lineNbr": 280,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2024-03-11T22:28:41Z",
      "side": 1,
      "message": "same as above. you are looking at the call sites. The assumption needs to be documented in the function being called.",
      "parentUuid": "1d692654_c4924d98",
      "revId": "f1de406d4a1adc6fa07589e06a7153421cbfde92",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "267d9e50_fd9be43a",
        "filename": "lib/gpt_rme/gpt_rme.c",
        "patchSetId": 13
      },
      "lineNbr": 280,
      "author": {
        "id": 1000105
      },
      "writtenOn": "2024-03-12T17:03:12Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "28fd067f_133fa6e7",
      "revId": "f1de406d4a1adc6fa07589e06a7153421cbfde92",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "204165f3_d6f6806e",
        "filename": "lib/gpt_rme/gpt_rme.c",
        "patchSetId": 13
      },
      "lineNbr": 305,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2024-03-09T01:48:16Z",
      "side": 1,
      "message": "can you make this consistent with line 352? either change 352 to use fill_cont_32mb with a ternary operator like here, or make this an if else.\nor is the logic broken if we do that due to some nuance which is not coming through?",
      "range": {
        "startLine": 305,
        "startChar": 7,
        "endLine": 305,
        "endChar": 15
      },
      "revId": "f1de406d4a1adc6fa07589e06a7153421cbfde92",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a264d59c_9b8bbac4",
        "filename": "lib/gpt_rme/gpt_rme.c",
        "patchSetId": 13
      },
      "lineNbr": 305,
      "author": {
        "id": 1000105
      },
      "writtenOn": "2024-03-11T16:19:53Z",
      "side": 1,
      "message": "See my reply for line #230.",
      "parentUuid": "204165f3_d6f6806e",
      "range": {
        "startLine": 305,
        "startChar": 7,
        "endLine": 305,
        "endChar": 15
      },
      "revId": "f1de406d4a1adc6fa07589e06a7153421cbfde92",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5c522aa4_e391d856",
        "filename": "lib/gpt_rme/gpt_rme.c",
        "patchSetId": 13
      },
      "lineNbr": 305,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2024-03-13T03:45:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a264d59c_9b8bbac4",
      "range": {
        "startLine": 305,
        "startChar": 7,
        "endLine": 305,
        "endChar": 15
      },
      "revId": "f1de406d4a1adc6fa07589e06a7153421cbfde92",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}