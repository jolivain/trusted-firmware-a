{
  "comments": [
    {
      "key": {
        "uuid": "3b2a2141_8d8a4f38",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 8,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2019-04-25T09:31:41Z",
      "side": 1,
      "message": "There is lot more going in the patch. Would prefer to split out the refactoring from SMMU bypass disable.",
      "revId": "fba8a7a8103e2713e59decbf3f7a740aac7aece8",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9684d53c_929ea478",
        "filename": "drivers/arm/smmu/smmu_v3.c",
        "patchSetId": 5
      },
      "lineNbr": 16,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2019-04-25T09:17:05Z",
      "side": 1,
      "message": "This type of delay is flaky. Depending on how fast or slow the CPU is, this may or maynot fail. Would prefer time based timeout mechanism.",
      "range": {
        "startLine": 16,
        "startChar": 8,
        "endLine": 16,
        "endChar": 23
      },
      "revId": "fba8a7a8103e2713e59decbf3f7a740aac7aece8",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "14ce2a80_18dc005b",
        "filename": "drivers/arm/smmu/smmu_v3.c",
        "patchSetId": 5
      },
      "lineNbr": 16,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2019-04-25T15:53:58Z",
      "side": 1,
      "message": "OK, based on offline discussion, I think we can add the timer based timeout later. But increment the counter to a much larger value as I think 1000 is very less.",
      "parentUuid": "9684d53c_929ea478",
      "range": {
        "startLine": 16,
        "startChar": 8,
        "endLine": 16,
        "endChar": 23
      },
      "revId": "fba8a7a8103e2713e59decbf3f7a740aac7aece8",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "23b3e29d_7a0e6f31",
        "filename": "drivers/arm/smmu/smmu_v3.c",
        "patchSetId": 5
      },
      "lineNbr": 18,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2019-04-16T11:47:43Z",
      "side": 1,
      "message": "Sorry, I forgot to mention this in the previous version... I think this function could be made static, unless you can foresee the need to export it (in which case, its prototype probably ought to be in smmu_v3.h)",
      "range": {
        "startLine": 18,
        "startChar": 1,
        "endLine": 18,
        "endChar": 74
      },
      "revId": "fba8a7a8103e2713e59decbf3f7a740aac7aece8",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7740fb0b_c1e94e86",
        "filename": "drivers/arm/smmu/smmu_v3.c",
        "patchSetId": 5
      },
      "lineNbr": 36,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2019-04-16T11:47:43Z",
      "side": 1,
      "message": "I think this function should also be compiled if RESET_TO_BL31\u003d\u003d1 (whereby BL31 is the boot ROM, instead of BL1).",
      "range": {
        "startLine": 36,
        "startChar": 0,
        "endLine": 36,
        "endChar": 16
      },
      "revId": "fba8a7a8103e2713e59decbf3f7a740aac7aece8",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "200ee520_6df79a62",
        "filename": "drivers/arm/smmu/smmu_v3.c",
        "patchSetId": 5
      },
      "lineNbr": 69,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2019-04-16T11:47:43Z",
      "side": 1,
      "message": "I don\u0027t think we should restrict the inclusion of this function for any particular BL image. I think it\u0027s appropriate to expect smmuv3_security_init() to be used by the boot ROM image only but I suppose that smmuv3_init() could be done in BL1, in BL2 or BL31, right? It\u0027s up to the platform port I think.",
      "range": {
        "startLine": 69,
        "startChar": 0,
        "endLine": 69,
        "endChar": 25
      },
      "revId": "fba8a7a8103e2713e59decbf3f7a740aac7aece8",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ee086781_6e01fa1c",
        "filename": "drivers/arm/smmu/smmu_v3.c",
        "patchSetId": 5
      },
      "lineNbr": 75,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2019-04-25T09:17:05Z",
      "side": 1,
      "message": "why is the return type changed ?",
      "range": {
        "startLine": 75,
        "startChar": 0,
        "endLine": 75,
        "endChar": 4
      },
      "revId": "fba8a7a8103e2713e59decbf3f7a740aac7aece8",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da4e276e_b8a8d782",
        "filename": "drivers/arm/smmu/smmu_v3.c",
        "patchSetId": 5
      },
      "lineNbr": 75,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2019-04-25T11:12:22Z",
      "side": 1,
      "message": "That\u0027s due to one of my review comments: https://review.trustedfirmware.org/c/TF-A/trusted-firmware-a/+/839/2/drivers/arm/smmu/smmu_v3.c#58\n\nI was suggesting there that I didn\u0027t think the function should fail if SMMU has no secure side. In this case, the function just does not have anything to initialize. With this error case out of the picture, there was no other reason why the function could fail so that\u0027s why Alexei changed the return type to void.\n\nDo you disagree with this approach?",
      "parentUuid": "ee086781_6e01fa1c",
      "range": {
        "startLine": 75,
        "startChar": 0,
        "endLine": 75,
        "endChar": 4
      },
      "revId": "fba8a7a8103e2713e59decbf3f7a740aac7aece8",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6914a5e0_4d0ee548",
        "filename": "drivers/arm/smmu/smmu_v3.c",
        "patchSetId": 5
      },
      "lineNbr": 75,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2019-04-25T15:51:33Z",
      "side": 1,
      "message": "I agree there is no error code to return in secure side is not implemented for SMMU. But for future proofness of API, it is good to leave opportunity to return error code in future without breaking compaitibility and hence I would keep the `int` return  code (unless we are sure that there is not chance of this API returning error in future).",
      "parentUuid": "da4e276e_b8a8d782",
      "range": {
        "startLine": 75,
        "startChar": 0,
        "endLine": 75,
        "endChar": 4
      },
      "revId": "fba8a7a8103e2713e59decbf3f7a740aac7aece8",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d7f80f64_e473e541",
        "filename": "drivers/arm/smmu/smmu_v3.c",
        "patchSetId": 5
      },
      "lineNbr": 75,
      "author": {
        "id": 1000105
      },
      "writtenOn": "2019-04-26T14:02:32Z",
      "side": 1,
      "message": "smmuv3_init() is called from bl31_early_platform_setup2() and the return value is not checked, so there is no point in smmuv3_init() to always return 1.",
      "parentUuid": "da4e276e_b8a8d782",
      "range": {
        "startLine": 75,
        "startChar": 0,
        "endLine": 75,
        "endChar": 4
      },
      "revId": "fba8a7a8103e2713e59decbf3f7a740aac7aece8",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d3326816_d15e0b78",
        "filename": "drivers/arm/smmu/smmu_v3.c",
        "patchSetId": 5
      },
      "lineNbr": 75,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2019-04-29T10:14:25Z",
      "side": 1,
      "message": "Just to update here,  we need to be mindful that there might be downstream platforms which might be using the function.",
      "parentUuid": "d7f80f64_e473e541",
      "range": {
        "startLine": 75,
        "startChar": 0,
        "endLine": 75,
        "endChar": 4
      },
      "revId": "fba8a7a8103e2713e59decbf3f7a740aac7aece8",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0b41bd46_ab8ccd8f",
        "filename": "drivers/arm/smmu/smmu_v3.c",
        "patchSetId": 5
      },
      "lineNbr": 83,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2019-04-25T09:17:05Z",
      "side": 1,
      "message": "nit: 0U",
      "range": {
        "startLine": 83,
        "startChar": 31,
        "endLine": 83,
        "endChar": 32
      },
      "revId": "fba8a7a8103e2713e59decbf3f7a740aac7aece8",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "27292d56_617919c7",
        "filename": "plat/arm/board/fvp/fvp_bl1_setup.c",
        "patchSetId": 5
      },
      "lineNbr": 36,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2019-04-25T09:31:41Z",
      "side": 1,
      "message": "This can be done in bl1_platform_setup(). It is better to avoid driver initilization in early platform setup unless required.\n\nAs long as SMMU bypass is disabled with BL1 it should be alright.",
      "revId": "fba8a7a8103e2713e59decbf3f7a740aac7aece8",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "09749995_980dc4ee",
        "filename": "plat/arm/board/fvp/fvp_bl1_setup.c",
        "patchSetId": 5
      },
      "lineNbr": 36,
      "author": {
        "id": 1000105
      },
      "writtenOn": "2019-04-29T10:25:04Z",
      "side": 1,
      "message": "This will require a new FVP specific function which checks arm_config.flags for SMMUv3 presence because bl1_platform_setup() is common for other platforms.",
      "parentUuid": "27292d56_617919c7",
      "revId": "fba8a7a8103e2713e59decbf3f7a740aac7aece8",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c7bd159d_5aeb86c3",
        "filename": "plat/arm/board/fvp/fvp_bl31_setup.c",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2019-04-16T11:47:43Z",
      "side": 1,
      "message": "I think we also need to call smmuv3_security_init() on the RESET_TO_BL31\u003d\u003d1 code path.",
      "revId": "fba8a7a8103e2713e59decbf3f7a740aac7aece8",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    }
  ]
}