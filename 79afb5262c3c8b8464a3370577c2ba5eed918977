{
  "comments": [
    {
      "key": {
        "uuid": "8427e7ba_664a96f2",
        "filename": "include/lib/fconf/fconf.h",
        "patchSetId": 9
      },
      "lineNbr": 46,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2020-06-18T09:58:29Z",
      "side": 1,
      "message": "(minor) supports",
      "range": {
        "startLine": 46,
        "startChar": 17,
        "endLine": 46,
        "endChar": 24
      },
      "revId": "79afb5262c3c8b8464a3370577c2ba5eed918977",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0a662880_e01abb67",
        "filename": "include/lib/fconf/fconf.h",
        "patchSetId": 9
      },
      "lineNbr": 46,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2020-06-18T10:25:27Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "8427e7ba_664a96f2",
      "range": {
        "startLine": 46,
        "startChar": 17,
        "endLine": 46,
        "endChar": 24
      },
      "revId": "79afb5262c3c8b8464a3370577c2ba5eed918977",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "be2140c4_c9c5b62f",
        "filename": "include/lib/fconf/fconf.h",
        "patchSetId": 9
      },
      "lineNbr": 46,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2020-06-18T11:43:55Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0a662880_e01abb67",
      "range": {
        "startLine": 46,
        "startChar": 17,
        "endLine": 46,
        "endChar": 24
      },
      "revId": "79afb5262c3c8b8464a3370577c2ba5eed918977",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5d59cb61_693a695b",
        "filename": "lib/fconf/fconf.c",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2020-06-18T09:58:29Z",
      "side": 1,
      "message": "I don\u0027t quite understand all changes in this file...\n\nMy understanding is that, before this patch, fconf_load_config() would only handle the FW_CONFIG file. It would load \u0026 authenticate it, keeping the loading information in the arm_tb_fw_info structure allocated on the stack. Then it would extract some information (base address and size) out of arm_tb_fw_info and would copy them across in the global fconf_dtb_info variable for future retrieval.\n\nNow, with fconf_load_config() handling both FW_CONFIG and TB_FW_CONFIG files, the loading information is still kept in a variable on the stack (image_info), that doesn\u0027t change. But AFAICS the step where the loading information would be copied from the stack to global data has been removed. At least for BL1, we pass the base address of the config file to BL2 (through its arguments) so this information is kept alive but it seems to me that the rest of them is lost on return from this function, it is abandoned on the function\u0027s stack.\n\nIn this case, what\u0027s the point of loading the config file image in the first place, if there is no remnant of the loading information? Does that just serve as an early sanity check, to ensure that the image can be properly loaded and authenticated?",
      "revId": "79afb5262c3c8b8464a3370577c2ba5eed918977",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "60a93a18_69a359f7",
        "filename": "lib/fconf/fconf.c",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2020-06-18T10:07:03Z",
      "side": 1,
      "message": "Ah I think I might have figured it out on my own... The TB_FW_CONFIG file is loaded at the address indicated in the tb_fw-config node of the FW_CONFIG file. Thus, BL2 can just retrieve this address from the FW_CONFIG file on its own and that way find the TB_FW_CONFIG file loaded by BL1.\n\nIs that the idea?",
      "parentUuid": "5d59cb61_693a695b",
      "revId": "79afb5262c3c8b8464a3370577c2ba5eed918977",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4e677279_84eeeaa8",
        "filename": "lib/fconf/fconf.c",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2020-06-18T10:25:27Z",
      "side": 1,
      "message": "Yes, that\u0027s correct Sandrine. BL2 just need to know where TB_FW_CONFIG is loaded.\nFW_CONFIG and TB_FW_CONFIG loading is done by BL1 only.",
      "parentUuid": "60a93a18_69a359f7",
      "revId": "79afb5262c3c8b8464a3370577c2ba5eed918977",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d193e024_a1424bf3",
        "filename": "lib/fconf/fconf.c",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2020-06-18T11:49:08Z",
      "side": 1,
      "message": "OK, thanks for confirming. Is that documented somewhere? In the firmware design guide for example?",
      "parentUuid": "4e677279_84eeeaa8",
      "revId": "79afb5262c3c8b8464a3370577c2ba5eed918977",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ddbd4537_8780523f",
        "filename": "lib/fconf/fconf.c",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2020-06-18T11:53:18Z",
      "side": 1,
      "message": "In follow-up patch will update firmware design document. Currently, push only one patch for memory layout changes and details about fw_config as part of this patch:\nhttps://review.trustedfirmware.org/c/TF-A/trusted-firmware-a/+/4580/",
      "parentUuid": "d193e024_a1424bf3",
      "revId": "79afb5262c3c8b8464a3370577c2ba5eed918977",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1f38192c_f9549717",
        "filename": "lib/fconf/fconf.c",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2020-06-18T12:00:58Z",
      "side": 1,
      "message": "OK, fair enough, as long as it doesn\u0027t slip through the cracks, that\u0027s fine with me ðŸ˜Š",
      "parentUuid": "ddbd4537_8780523f",
      "revId": "79afb5262c3c8b8464a3370577c2ba5eed918977",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "288fcc24_ba95c455",
        "filename": "lib/fconf/fconf.c",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2020-06-18T12:41:51Z",
      "side": 1,
      "message": "Sure will take care of this in immediate patches ðŸ˜Š",
      "parentUuid": "1f38192c_f9549717",
      "revId": "79afb5262c3c8b8464a3370577c2ba5eed918977",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7be12623_a00d69c7",
        "filename": "lib/fconf/fconf.c",
        "patchSetId": 9
      },
      "lineNbr": 38,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2020-06-18T09:58:29Z",
      "side": 1,
      "message": "(minor) This comment is now inaccurate (could be the TB_FW_CONFIG we failed to load). Suggest removing it, as I don\u0027t think it added much value anyway.",
      "range": {
        "startLine": 38,
        "startChar": 2,
        "endLine": 38,
        "endChar": 41
      },
      "revId": "79afb5262c3c8b8464a3370577c2ba5eed918977",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c546ddaa_8a9f2cba",
        "filename": "lib/fconf/fconf.c",
        "patchSetId": 9
      },
      "lineNbr": 38,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2020-06-18T10:25:27Z",
      "side": 1,
      "message": "Ack, missed to remove this comment.",
      "parentUuid": "7be12623_a00d69c7",
      "range": {
        "startLine": 38,
        "startChar": 2,
        "endLine": 38,
        "endChar": 41
      },
      "revId": "79afb5262c3c8b8464a3370577c2ba5eed918977",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cb025781_f498b212",
        "filename": "lib/fconf/fconf.c",
        "patchSetId": 9
      },
      "lineNbr": 38,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2020-06-18T11:43:55Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c546ddaa_8a9f2cba",
      "range": {
        "startLine": 38,
        "startChar": 2,
        "endLine": 38,
        "endChar": 41
      },
      "revId": "79afb5262c3c8b8464a3370577c2ba5eed918977",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "13e2f8bf_3cc6afe9",
        "filename": "lib/fconf/fconf.c",
        "patchSetId": 9
      },
      "lineNbr": 54,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2020-06-18T09:58:29Z",
      "side": 1,
      "message": "(minor) Consider improving this info message to say *which* config file was loaded.",
      "range": {
        "startLine": 54,
        "startChar": 7,
        "endLine": 54,
        "endChar": 60
      },
      "revId": "79afb5262c3c8b8464a3370577c2ba5eed918977",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c71111ed_f2f3c47c",
        "filename": "lib/fconf/fconf.c",
        "patchSetId": 9
      },
      "lineNbr": 54,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2020-06-18T10:25:27Z",
      "side": 1,
      "message": "Ack, will add update this info message with \"which\" config.",
      "parentUuid": "13e2f8bf_3cc6afe9",
      "range": {
        "startLine": 54,
        "startChar": 7,
        "endLine": 54,
        "endChar": 60
      },
      "revId": "79afb5262c3c8b8464a3370577c2ba5eed918977",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6be8e2f3_179ec37b",
        "filename": "lib/fconf/fconf.c",
        "patchSetId": 9
      },
      "lineNbr": 54,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2020-06-18T11:43:55Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c71111ed_f2f3c47c",
      "range": {
        "startLine": 54,
        "startChar": 7,
        "endLine": 54,
        "endChar": 60
      },
      "revId": "79afb5262c3c8b8464a3370577c2ba5eed918977",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda",
      "unresolved": false
    }
  ]
}