{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "e24d91ac_deaf5d99",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2022-04-06T12:07:12Z",
      "side": 1,
      "message": "FYI, I\u0027m adding a test config with measured boot enabled with RME support on FVP:\nhttps://review.trustedfirmware.org/c/ci/tf-a-ci-scripts/+/14673\n\nI\u0027ve run this patch stack through it. The results are looking good! One can clearly see the prints from the RSS measured boot backend (along side the prints from the TCG event log driver). There are also prints related to RME support. TFTF tests pass successfully.\n\nSee: https://tf.validation.linaro.org/scheduler/job/658636\n(triggered by https://ci.trustedfirmware.org/view/TF-A/job/tf-a-ci-gateway/7697/)",
      "revId": "d8e44bdc0a45d38abcd8538de0b06dfb668be825",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "edb9d2ad_b0c906a2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2022-04-06T12:50:51Z",
      "side": 1,
      "message": "Just to clarify... I believe there is nothing in this patch stack that is specific to RME support. So the existing CI test configs (with MEASURED_BOOT\u003d1 and ENABLE_RME\u003d0) will already exercise these patches to some degree. The new test config I am adding is just one step further towards a future RSS+RME FVP platform.",
      "parentUuid": "e24d91ac_deaf5d99",
      "revId": "d8e44bdc0a45d38abcd8538de0b06dfb668be825",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "560ba825_35db1fb2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2022-04-13T13:36:54Z",
      "side": 1,
      "message": "Triggering the CI tests on the entire patch stack...",
      "revId": "d8e44bdc0a45d38abcd8538de0b06dfb668be825",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b2aa5b56_907c839e",
        "filename": "plat/arm/board/fvp/fvp_common_measured_boot.c",
        "patchSetId": 1
      },
      "lineNbr": 45,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2022-04-06T08:32:42Z",
      "side": 1,
      "message": "Now, RSS backend perform the hash measurement of the image using mbedTLS crypto backend. IIUC we are calculating hash of single image twice using same backend Cryoto i.e. mbedTLS using RSS and EventLog measured boot backend.\nThis is not concern though (apart from the performance), but to improvise as part of separate patch can we move out the hash measurement from \u003cbackend\u003e_mboot_measure_and_record API?",
      "range": {
        "startLine": 43,
        "startChar": 0,
        "endLine": 45,
        "endChar": 18
      },
      "revId": "d8e44bdc0a45d38abcd8538de0b06dfb668be825",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3bc53973_e1d63b03",
        "filename": "plat/arm/board/fvp/fvp_common_measured_boot.c",
        "patchSetId": 1
      },
      "lineNbr": 45,
      "author": {
        "id": 1000024
      },
      "writtenOn": "2022-04-06T12:17:50Z",
      "side": 1,
      "message": "There was already a discussion on this topic with @Sandrine Bailleux. Her opinion was:\n\n\u003e I suppose this sentence is only true if both backends use the same hash algorithm for the measurement.\n\u003e If, say, event log uses SHA-256, but RSS uses SHA-512 then we\u0027d need to do 2 measurements anyway, right?\n\n\u003e Also, I believe this concern will go away in the future. In the final solution,\n\u003e my expectation is that each image will either be measured by one or the other backend,\n\u003e but not both. More precisely, RSS will measure all CCA firmware components\n\u003e (HW_CONFIG, FW_CONFIG, BL1, BL2 + its config, BL31 + its config, RMM)\n\u003e while the event log will measure the rest.\n\nI agree with this statement so, for the time being, would leave it as is. But we might do it later anyway if we are proved to be wrong.",
      "parentUuid": "b2aa5b56_907c839e",
      "range": {
        "startLine": 43,
        "startChar": 0,
        "endLine": 45,
        "endChar": 18
      },
      "revId": "d8e44bdc0a45d38abcd8538de0b06dfb668be825",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b443cc00_ca4155eb",
        "filename": "plat/arm/board/fvp/fvp_common_measured_boot.c",
        "patchSetId": 1
      },
      "lineNbr": 45,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2022-04-06T12:41:02Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "3bc53973_e1d63b03",
      "range": {
        "startLine": 43,
        "startChar": 0,
        "endLine": 45,
        "endChar": 18
      },
      "revId": "d8e44bdc0a45d38abcd8538de0b06dfb668be825",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f785aac4_aba650ec",
        "filename": "plat/arm/board/fvp/fvp_common_measured_boot.c",
        "patchSetId": 1
      },
      "lineNbr": 45,
      "author": {
        "id": 1000043
      },
      "writtenOn": "2022-04-13T13:59:44Z",
      "side": 1,
      "message": "If event_log_measure_and_record() fails, this is going to overwrite its error code stored in variable \u0027err\u0027. If then rss_mboot_measure_and_record() succeeds and returns 0, plat_mboot_measure_image() will incorrectly succeed.\n\nWe need to preserve the error code value returned by event_log_measure_and_record() and aggregate both error codes (event log and RSS) at the end of the function.",
      "range": {
        "startLine": 43,
        "startChar": 1,
        "endLine": 45,
        "endChar": 18
      },
      "revId": "d8e44bdc0a45d38abcd8538de0b06dfb668be825",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}