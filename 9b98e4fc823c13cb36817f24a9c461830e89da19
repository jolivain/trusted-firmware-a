{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "c588a56e_a3ef2ec6",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1000098
      },
      "writtenOn": "2021-03-19T16:34:02Z",
      "side": 1,
      "message": "Just curious: what are the sources of secure interrupts?",
      "revId": "9b98e4fc823c13cb36817f24a9c461830e89da19",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "84e3abdb_54773261",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1000228
      },
      "writtenOn": "2021-03-19T17:02:02Z",
      "side": 1,
      "message": "Any peripheral for which the INTID is configured as Group 1 Secure in the GIC. It can be a crypto accelerator, secure display, SPI chip connected to a SE accessed by TZ etc. The intent is to direct it to a handler in a secure partition through the SPMD/SPMC.\nGroup0 interrupts use the same NWd pre-emption path though are likely to be handled at EL3 (or maybe a delegated service in a secure partition).",
      "parentUuid": "c588a56e_a3ef2ec6",
      "revId": "9b98e4fc823c13cb36817f24a9c461830e89da19",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "92a02de0_bf5127b5",
        "filename": "services/std_svc/spmd/spmd_main.c",
        "patchSetId": 1
      },
      "lineNbr": 231,
      "author": {
        "id": 1000098
      },
      "writtenOn": "2021-03-16T21:33:31Z",
      "side": 1,
      "message": "Does this function always have to return 0 irrespective of whether rc is zero or not(in line 218)?",
      "range": {
        "startLine": 231,
        "startChar": 8,
        "endLine": 231,
        "endChar": 10
      },
      "revId": "9b98e4fc823c13cb36817f24a9c461830e89da19",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "50140487_5ba0e14f",
        "filename": "services/std_svc/spmd/spmd_main.c",
        "patchSetId": 1
      },
      "lineNbr": 231,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2021-03-17T03:41:25Z",
      "side": 1,
      "message": "Also, i think this function needs to ensure that the current context is a non-secure context based on a recent change that went into tspd where a race condition causes this handler to be entered even when executing in secure state. May not happen here, but good to use asserts to explicitly document assumptions..",
      "parentUuid": "92a02de0_bf5127b5",
      "range": {
        "startLine": 231,
        "startChar": 8,
        "endLine": 231,
        "endChar": 10
      },
      "revId": "9b98e4fc823c13cb36817f24a9c461830e89da19",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a5adb459_fffc243e",
        "filename": "services/std_svc/spmd/spmd_main.c",
        "patchSetId": 1
      },
      "lineNbr": 352,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2021-03-16T09:36:52Z",
      "side": 1,
      "message": "In case of error, can we return this value with some error message?",
      "range": {
        "startLine": 352,
        "startChar": 1,
        "endLine": 352,
        "endChar": 3
      },
      "revId": "9b98e4fc823c13cb36817f24a9c461830e89da19",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fc23c731_d29dc4a5",
        "filename": "services/std_svc/spmd/spmd_main.c",
        "patchSetId": 1
      },
      "lineNbr": 352,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2021-03-17T03:41:25Z",
      "side": 1,
      "message": "should not fail, so panic would be appropriate here i think.",
      "parentUuid": "a5adb459_fffc243e",
      "range": {
        "startLine": 352,
        "startChar": 1,
        "endLine": 352,
        "endChar": 3
      },
      "revId": "9b98e4fc823c13cb36817f24a9c461830e89da19",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4619866a_9fdeb8be",
        "filename": "services/std_svc/spmd/spmd_main.c",
        "patchSetId": 1
      },
      "lineNbr": 352,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2021-03-17T17:42:43Z",
      "side": 1,
      "message": "Agree! \u0027panic\u0027 makes more sense.",
      "parentUuid": "fc23c731_d29dc4a5",
      "range": {
        "startLine": 352,
        "startChar": 1,
        "endLine": 352,
        "endChar": 3
      },
      "revId": "9b98e4fc823c13cb36817f24a9c461830e89da19",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4c535980_758938ab",
        "filename": "services/std_svc/spmd/spmd_main.c",
        "patchSetId": 1
      },
      "lineNbr": 352,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2021-03-21T15:41:11Z",
      "side": 1,
      "message": "Hold on, caller of this function at line no. 387 continue the execution in case of failure.\nHence IMO, it is not appropriate to panic here (in case of interrupt registration failure). Let me know what do you think?",
      "parentUuid": "4619866a_9fdeb8be",
      "range": {
        "startLine": 352,
        "startChar": 1,
        "endLine": 352,
        "endChar": 3
      },
      "revId": "9b98e4fc823c13cb36817f24a9c461830e89da19",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9bbde2c4_3427e8e9",
        "filename": "services/std_svc/spmd/spmd_main.c",
        "patchSetId": 1
      },
      "lineNbr": 352,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2021-03-22T00:00:46Z",
      "side": 1,
      "message": "right, but what does it really mean to run the SPM if we cannot route secure interrupts when running the normal world? Are we just saying we drop the interrupts? without an interrupt handler, who clears the interrupt etc? I\u0027m not sure it is meaningful here or at line 387.. perhaps that needs to be changed as well to panic...",
      "parentUuid": "4c535980_758938ab",
      "range": {
        "startLine": 352,
        "startChar": 1,
        "endLine": 352,
        "endChar": 3
      },
      "revId": "9b98e4fc823c13cb36817f24a9c461830e89da19",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "91e3dd6b_fcfe8294",
        "filename": "services/std_svc/spmd/spmd_main.c",
        "patchSetId": 1
      },
      "lineNbr": 352,
      "author": {
        "id": 1000098
      },
      "writtenOn": "2021-03-22T14:01:17Z",
      "side": 1,
      "message": "I too believe panic would be appropriate here if rc is not successful i.e., when the secure interrupt handler cannot be registered for the SEL1 interrupts.",
      "parentUuid": "9bbde2c4_3427e8e9",
      "range": {
        "startLine": 352,
        "startChar": 1,
        "endLine": 352,
        "endChar": 3
      },
      "revId": "9b98e4fc823c13cb36817f24a9c461830e89da19",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5ccc2501_d013a30a",
        "filename": "services/std_svc/spmd/spmd_main.c",
        "patchSetId": 1
      },
      "lineNbr": 352,
      "author": {
        "id": 1000328
      },
      "writtenOn": "2021-03-22T16:37:15Z",
      "side": 1,
      "message": "@Raghu Thanks, agree with your explanation! It doesn\u0027t make sense to run SPM without this interrupt registration.\n\nLooking through code, I observed this is not quite followed in all dispatchers [1],[2]. Do we need to correct these also?\n\n[1] https://git.trustedfirmware.org/TF-A/trusted-firmware-a.git/tree/services/spd/tlkd/tlkd_main.c?h\u003dintegration#n142\n[2] https://git.trustedfirmware.org/TF-A/trusted-firmware-a.git/tree/services/spd/trusty/trusty.c?h\u003dintegration#n484",
      "parentUuid": "91e3dd6b_fcfe8294",
      "range": {
        "startLine": 352,
        "startChar": 1,
        "endLine": 352,
        "endChar": 3
      },
      "revId": "9b98e4fc823c13cb36817f24a9c461830e89da19",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}